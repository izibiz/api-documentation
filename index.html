<!doctype html>
<html>
  <head>
    <meta charset="utf-8">
    <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <title>İZİBİZ E-Dönüşüm Entegrasyon Kılavuzu</title>

    <link href="stylesheets/screen.css" rel="stylesheet" type="text/css" media="screen" />
    <link href="stylesheets/print.css" rel="stylesheet" type="text/css" media="print" />
    <link href="stylesheets/fakeloader.css" rel="stylesheet" type="text/css" />
    <link href="stylesheets/izibiz.css" rel="stylesheet" type="text/css" />
    <link rel="icon" href="https://izibiz.com.tr/templates/theme3181/favicon.ico">
    <script src="https://ajax.googleapis.com/ajax/libs/jquery/2.1.3/jquery.min.js"></script>
    <script src="javascripts/fakeloader.js"></script>
      <script src="javascripts/all.js" type="text/javascript"></script>

    <!-- Global site tag (gtag.js) - Google Analytics -->
    <script async src="https://www.googletagmanager.com/gtag/js?id=UA-122965680-2"></script>
    <script>
        /* Google Analytics start*/
        window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());

        gtag('config', 'UA-122965680-2');
        /* Google Analytics end*/

 $(document).ready(function() {
      $('.tocify-item a').on('click', function(){
        ga('send', 'pageview', {'page': location.pathname + location.search  + location.hash});
      });
    });
    </script>

      <script>
        $(document).ready(
          function() {
              window.FakeLoader.init( );
          }
        );
        $(function() {
          setupLanguages(["csharp"]);
        });
      </script>
  </head>

  <body class="index">
    <div id="fakeloader-overlay" class="visible incoming"><div class="loader-wrapper-outer"><div class="loader-wrapper-inner"><div class="loader"></div></div></div></div>
    <a href="#" id="nav-button">
      <span>
        NAV
        <img src="images/navbar.png" alt="Navbar" />
      </span>
    </a>
    <div class="tocify-wrapper">
      <div class="logo-holder">
        <a href="https://izibiz.com.tr"><img src="images/logo.png" alt="Logo" /></a>
      </div>
        <div class="lang-selector">
              <a href="#" data-language-name="csharp">C#</a>
        </div>
     <!-- <div class="key-replace">
        <input type="text" class="key-replace" placeholder="Your API Key (optional)">
      </div>
-->   
        <div class="search">
          <input type="text" class="search" id="input-search" placeholder="Search">
        </div>
        <ul class="search-results"></ul>
      <div id="toc">
      </div>
        <ul class="toc-footer">
            <li><a href='https://www.izibiz.com.tr/index.php/urun-ve-hizmetler/e-fatura-destek/efatura-portal-test-hesabi' target='_blank'>Test Hesabı Talep Formu</a></li>
        </ul>
    </div>
    <div class="page-wrapper">
      <div class="dark-box"></div>
      <div class="content">
        
          <h1 id="ba-larken">Başlarken</h1>

<h2 id="versiyon-tarih-esi">Versiyon Tarihçesi</h2>

<table><thead>
<tr>
<th>Tarih</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>2019-12-31 (Yeni)</strong></td>
<td><strong>E-Fatura</strong> menüsünde <code class="prettyprint">Hal Tipi Fatura</code> başlığı ve fatura senaryoları başlığı altınada Hal Tipi fatura örnekleri eklenmiştir.</td>
</tr>
<tr>
<td><strong>2019-12-27 (Yeni)</strong></td>
<td><strong>E-İrsaliye</strong> menüsünde  muhtelif müşteriler ya da alıcısı e-irsaliye sistemine kayıtlı olmayanlara belge düzenlemenin açıklandığı <code class="prettyprint">E-İrsaliye</code> başlığı güncellendi.</td>
</tr>
<tr>
<td>2019-10-05</td>
<td>Kamu kurumlarına düzenlenecek e-fatura kılavuzu GİB Dokümanları ve UBL-Fatura Örnekleri bölümüne eklendi.</td>
</tr>
<tr>
<td>2019-08-16</td>
<td>Z-Rapor servisi eklendi</td>
</tr>
<tr>
<td>2019-07-02</td>
<td>E-Mutabakat servisi eklendi</td>
</tr>
<tr>
<td>2019-04-18</td>
<td>E-SMM (Serbest meslek makbuz) servisi eklendi</td>
</tr>
<tr>
<td>2019-04-13</td>
<td>Proxy servisi eklendi</td>
</tr>
<tr>
<td>2019-04-02</td>
<td>Faturalama (Kontör, Bakiye, Kullanım) servisi eklendi</td>
</tr>
<tr>
<td>2019-01-01</td>
<td>E-Fatura, e-arşiv fatura, e-irsaliye entegrasyon kılavuzu ilk versiyon yayınlandı</td>
</tr>
</tbody></table>

<h2 id="ba-larken">Başlarken</h2>

<p>İZİBİZ E-Dönüşüm Entegrasyon kılavuzuna hoşgeldiniz. Bu kılavuz yazılımlarını İZİBİZ sistemlerine entegre etmek isteyen firmalara yol göstermek için hazırlanmıştır.  Entegrasyon kılavuzumuz aşağıda ki ürünleri desteklemektedir  |</p>

<ul>
<li>E-Fatura</li>
<li>E-Arşiv Fatura</li>
<li>E-İrsaliye</li>
<li>E-Mutabakat</li>
<li>E-Defter</li>
<li>E-Müstahsil Makbuzu</li>
<li>E-Serbest Meslek Makbuzu</li>
<li>E-ZRapor</li>
<li>Faturalama (Kontor, Bakiye, Kullanım vs.)</li>
</ul>

<p>Eğer entegrasyona yeni başlıyorsanız <code class="prettyprint">Başlarken</code> başlığı altında ki bilgileri okumanızı tavsiye ederiz.</p>

<h2 id="yard-m-talebi">Yardım Talebi</h2>

<p>Entegrasyon süreci ile ilgili her türlü teknik sorularınızı <strong>entegrasyon@izibiz.com.tr</strong> adresine iletebilirsiniz.</p>

<h2 id="tan-mlar-ve-k-saltmalar">Tanımlar ve Kısaltmalar</h2>

<table><thead>
<tr>
<th>Tanım</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td>Başkanlık</td>
<td>T.C. Maliye Bakanlığı Gelir İdaresi Başkanlığı</td>
</tr>
<tr>
<td>GİB</td>
<td>T.C. Maliye Bakanlığı Gelir İdaresi Başkanlığı</td>
</tr>
<tr>
<td>E-Fatura</td>
<td>Elektronik Fatura</td>
</tr>
<tr>
<td>Gönderici Birim</td>
<td>e-Faturanın düzenlenmesinden ve gönderilmesinden sorumlu birim</td>
</tr>
<tr>
<td>Posta Kutusu</td>
<td>Gönderilen e-faturanın alınmasından sorumlu birim</td>
</tr>
<tr>
<td>HTTP</td>
<td>(Hyper Text Transfer Protocol) Hiper Metin Transferi Protokolü</td>
</tr>
<tr>
<td>HTTPS</td>
<td>(Hyper Text Transfer Protocol Secure) Hiper Metin Transferi Protokolü–Güvenli</td>
</tr>
<tr>
<td>Merkez</td>
<td>Gönderici Birim ile Posta Kutusu arasındaki iletişimi sağlayan ve denetleyen birim</td>
</tr>
<tr>
<td>MTOM</td>
<td>(Message Transfer Optimization Method) Mesaj Transferi Optimizasyon Mekanizması. Web servisleri üzerinden verimli bir şekilde ikilik dosya iletimine olanak sağlayan veri iletim yöntemi</td>
</tr>
<tr>
<td>MD5</td>
<td>(Message-Digest Algorithm 5) Veri bütünlüğünü test etmek içinkullanılan, tek yönlü şifreleme algoritması</td>
</tr>
<tr>
<td>Schematron/Şematron</td>
<td>XML belgelerini mantıksal olarak kontrol etmek için kullanılan kural tabanlı doğrulama dili</td>
</tr>
<tr>
<td>Sistem Yanıtı</td>
<td>Fatura veya uygulama yanıtı içeren zarfların durumları ile ilgili olarak birimlerden gönderilen cevap mesajlarıdır.</td>
</tr>
<tr>
<td>SOAP</td>
<td>(Simple Object Access Protocol) Basit Nesne Erişim Protokolü. Dağıtık uygulamalarda ve web servislerinin haberleşmesinde kullanılmak üzere tasarlanan, sunucu/istemci mantığına dayalıiletişim protokolü</td>
</tr>
<tr>
<td>SSL</td>
<td>(Secure Sockets Layer) Bilginin bütünlüğü ve gizliliği için,internet üzerinde iki taraf arasında oluşan trafiğin şifrelenerek, gizliliğinin ve bütünlüğünün korunmasını sa ğlayan bir protokol</td>
</tr>
<tr>
<td>Schema/Şema</td>
<td>XML dosyalarında taşınan verilerin nasıl yorumlanacağının belirtimi</td>
</tr>
<tr>
<td>TCKN</td>
<td>T.C. Kimlik Numarası</td>
</tr>
<tr>
<td>VKN</td>
<td>Vergi Kimlik Numarası</td>
</tr>
<tr>
<td>Veritabanı</td>
<td>Çeşitli kaynaklardan elde edilen verilerin depolandığı veri yapısı</td>
</tr>
<tr>
<td>VPN</td>
<td>(Virtual Private Network) Telekomünikasyon altyapısı kullanılarak güvenli ve özel veri aktarımını sağlayan sanal özel ağ teknolojisi</td>
</tr>
<tr>
<td>W3C</td>
<td>WWW Birliği</td>
</tr>
<tr>
<td>Web Servis</td>
<td>Bilgisayarlar arasında ağ üzerinden etkileşimi ve uyumluluğu sağlayan yazılım sistemi</td>
</tr>
<tr>
<td>WSDL</td>
<td>(Web Services Description Language) Web Servislerinin tanımlandığı, erişim ve işlev bilgilerinin detaylı olarak sunulduğu XML tabanlı metin işaretleme dili</td>
</tr>
<tr>
<td>WS-I</td>
<td>(Web Services Interoperability) Değişik web servis belirtimlerinin birlikte çalışabilmesini sağlayan endüstri konsorsiyumu</td>
</tr>
<tr>
<td>WS-I Basic Profile</td>
<td>SOAP, WSDL, UDDI gibi temel web servis belirtimlerinin birlikte çalışabilmesini sağlayan profil</td>
</tr>
<tr>
<td>XML</td>
<td>(Extensible Markup Language) Verinin tanımlanması ve tarif edilmesi için kullanılan genişletilebilir işaretleme dili</td>
</tr>
<tr>
<td>XSD</td>
<td>(XML Schema Definition) XML belgelerinin uyması gereken kuralların belirlendiği metin işaretleme dili</td>
</tr>
<tr>
<td>XSLT</td>
<td>(Extensible Stylesheet Language Transformations) Genişletilebilir Biçimlendirme Dili Dönüşümleri, XML dokümanlarını dönüştürmek için kullanılan ve orijinal dokümanı değiştirmeden, yeni bir doküman oluşturmaya olanak sağlayan</td>
</tr>
<tr>
<td>UBL</td>
<td>(Universal Business Language) Evrensel İş Dili</td>
</tr>
<tr>
<td>UBL-TR</td>
<td>UBL Türkiye Özelleştirmesi</td>
</tr>
<tr>
<td>Uygulama</td>
<td>Elektronik Fatura Uygulaması</td>
</tr>
<tr>
<td>Uygulama Yanıtı</td>
<td>Ticari fatura senaryosunda alınan bir faturaya ait “KABUL”, “RED” veya “İADE” bilgisini içeren belge türüdür.</td>
</tr>
<tr>
<td>Fatura Tarihi</td>
<td>Faturanın kaynak sistemde düzenleme tarihi</td>
</tr>
<tr>
<td>E-Fatura Numarası</td>
<td>Faturaya Ait E-fatura Numarası</td>
</tr>
<tr>
<td>Sistem Referansı</td>
<td>Kaynak sistemden gelen folyo/çek/fatura referans numarası</td>
</tr>
<tr>
<td>Senaryo</td>
<td>Kullanılan fatura senaryosu (Temel Fatura / Ticari Fatura)</td>
</tr>
<tr>
<td>Fatura Tipi</td>
<td>Fatura Tipi Kodu (Satış / İade)</td>
</tr>
<tr>
<td>Alıcı Ünvan / Ad Soyad</td>
<td>Alıcı cari hesap ünvanı</td>
</tr>
<tr>
<td>TCKN / VKN</td>
<td>Alıcı vergi kimlik numarası</td>
</tr>
<tr>
<td>Fatura Net Tutar</td>
<td>KDV Tutarı / Toplam Tutarı</td>
</tr>
<tr>
<td>GTB</td>
<td>Gümrük ve Ticaret Bakanlığı</td>
</tr>
<tr>
<td>GÇB</td>
<td>Gümrük Çıkış Belgesi</td>
</tr>
<tr>
<td>ZIP</td>
<td>Veri sıkıştırma ve arşivleme formatı</td>
</tr>
</tbody></table>

<h2 id="belge-numaras-y-netimi">Belge Numarası Yönetimi</h2>

<ul>
<li>E-Dönüşüm sisteminde düzenlenen bir belgeyi tanımlayan iki önemli bilgi vardır. Bir tanesi Evrensel Tekil Tanımlama Numarası (ETTN), diğeri ise belge numarasıdır.</li>
<li>ETTN numarası GUID formatında olurken, belge numarası aşağıda açıklanmış formata olması zorunludur.</li>
<li>Belge numarası toplam 16 haneden oluşmak zorundadır.</li>
<li>3 hane alfanumerik seri ön eki  + 4 hane belgenin düzenlendiği yılı + 9 hane müteselsil sıra numarasını ifade etmektedir.  <strong>Örnek: IZI+2018+000000001</strong></li>
<li>Her yıl sıra numarası 1 den başlamak zorundadır.</li>
<li>Ser ön eki (ilk 3 hane) Türkçe karakter içermemeli ve büyük harfler yada sayılardan oluşmalıdr.</li>
<li>İlk 3 Karakter firmalar tarafından serbestçe belirlebilir. Her firma İstediği kadar seri kullanabilir. Her seri kendi içerisinde 1’den başlayarak sıralı devam etmelidir.</li>
<li>E-Fatura, E-İhracat fatura, E-Arşiv normal satış ve E-Arşiv internet üzerinden yapılan satışlar için düzenlenen faturalar  <strong>mutlaka</strong> farklı seriden düzenlenmelidir.</li>
<li>Belge numarası takibi gönderici sistemde yapılmalıdır.</li>
<li>Fatura düzenleyen bünyesinde aynı fatura numarası birden fazla kullanılamaz.</li>
</ul>

<h2 id="belge-g-r-nt-leme">Belge Görüntüleme</h2>

<ul>
<li><p>Bilindiği gibi e-dönüşüm sisteminde düzenlenen ve saklanan belgeler UBL-TR XML formatındadır. Düzenlenmiş her XML belgenin içerisinde görüntüsünü sağlayacak bir şablon (XSLT) dosya bulunmak zorundadır. Şablon belgesinin formatı XSLT (Extensible Stylesheet Language Transformations) Genişletilebilir Biçimlendirme Dili Dönüşümleridir. Bu dosya XML dokümanlarını insanların anlayacağı formata (HTML/PDF) dönüştürmek için kullanılır.</p></li>
<li><p>Belge şablon dosyası XML dosya içerisinde ki <strong>AdditionalDocumentReference</strong> elemanına eklenmek zorundadır.
<img src="/images/xslt_ekleme.png" height="200" width="400"/></p></li>
<li><p>Gelir İdaresi Başkanlığı tarafından mükellefler arasında ki anlaşmazlıklarda kullanabilecekleri ortak bir uygulama olan <strong>E-Belge Görüntüleyici</strong> uygulaması yayınlamıştır. Bu uygulama UBL-TR formatında ki belgenin içerisinde ki şablon ile görüntülemesini sağlar, şema ve şematron kontrolü yapar, belgenin içerisinde ki imzanın geçerliliğini kontrol eder ve belgenin GİB&#39;de ki durumunu kontrol eder.</p></li>
</ul>

<p>Kullandığınız Java Versiyonuna Göre E-Belge Görüntüleyici İndirebilirsiniz:
<a href="http://www.efatura.gov.tr/EFaturaGoruntuleyici/Windows/EFaturaGoruntuleyici.jnlp">E-Belge Görüntüleyici Java 1.6 İndir</a><br>
<a href="http://www.efatura.gov.tr/EFaturaGoruntuleyici/Windows/Java17/EFaturaGoruntuleyici.jnlp">E-Belge Görüntüleyici Java 1.7 İndir</a></p>

<h2 id="belge-g-nderme-kontrolleri">Belge Gönderme Kontrolleri</h2>

<p>Özel entegratör sistemi senkron çalışmaktadır. Yani herhangi bir servise gönderilen istek sunucu tarafından anlık olarak işlenerek sonuç dönülür. Yüklenen belgelerde hatalı durum tespit edilmesi durumunda webservis hata (SOAP Fault) dönülmektedir.</p>

<p>Belge gönderiminde aşağıda ki kontroller yapılmaktadır:</p>

<ul>
<li>Webservis parametre kontrolü</li>
<li>İşlem yapılacak aktif oturum kontrolü</li>
<li>Gönderici firmanın özel entegratör sisteminde ki tanımlama kontrolü</li>
<li>Gönderici ve alıcı firmaların mükellefiyet ve etiket kontrolü</li>
<li>Belgenin UBL-TR şemasına uygunluk kontrolü</li>
<li>Belgenin UBL-TR şematronuna uygunluk kontrolü</li>
<li>Gönderilen belge(lerin) özel entegratör sisteminde tekillik kontrolü</li>
</ul>

<h2 id="belge-olu-turma">Belge Oluşturma</h2>

<p>Özel Entegeratör webservislerine gönderilecek belgelerin (fatura, irsaliye, müstahsil vs) UBL-TR formatında istemci ortamında oluşturulması gerekmektedir. UBL-TR XML belge oluşturmak için <strong>iki yöntem kullanılabilir</strong> :</p>

<aside class="notice">
1. Gelir İdaresi Başkanlığı tarafından yayınlan UBL-TR paketinde bulunan belgelere ait şema (XSD) dosyasında uygulama geliştirme ortamına uygun sınıflar üretilebilir. Üretilen sınıftan obje oluşturarak fieldleri doldurarak belge hazırlanır. Hazırlanan belge webservise parametre olarak gönderilebiir.
</aside>

<ul>
<li><p>Güncel <a href="http://www.efatura.gov.tr/dosyalar/kilavuzlar/UBL-TR1.2.1_Paketi.zip">GİB UBL-TR Paketi</a> indirilip yerel C: disizine çıkarılır (unzip/extract).</p></li>
<li><p>Eğer <strong>Visual Studio 2015 öncesi</strong> yüklü olan bir bilgisayar kullanılıyorsa <strong>V(StudioVersiyonu) Command Prompt</strong> komutu çalıştırılır. Örneğin Visual studio 2013 kurulu bir bilgisayarda <strong>V2013 Command Prompt</strong> şeklinde çalıştırılır.</p></li>
<li><p>Eğer <strong>Visual Studio 2015 ve sonrası</strong> yüklü olan bir bilgisayar kullanılıyorsa <strong>Developer Command Prompt</strong> komut çalıştırılır.</p></li>
<li><p>Açılan komut satırında UBL-TR paketinin unzip edildiği dizinde bulunan <strong>maindoc</strong> klasörüne geçiş yapılır. <br> <strong>Örneğin:</strong> cd %UNZIP_EDILEN_KLASOR%\UBLTR_1.2.1_Paketi\xsdrt\maindoc\</p></li>
<li><p>Sınıfı oluşturulacak belge türüne uygun komut aşağıda ki listeye göre çalıştırılır.</p></li>
</ul>

<table><thead>
<tr>
<th>Belge Tipi</th>
<th>Çalıştırılacak Komut</th>
<th>Oluşacak Sınıf</th>
<th>Belge Tipi</th>
</tr>
</thead><tbody>
<tr>
<td>E-Fatura / E-Arşiv Fatura</td>
<td>xsd /c UBL-Invoice-2.1.xsd ../common/UBL-CommonExtensionComponents-2.1.xsd ../common/UBL-CommonBasicComponents-2.1.xsd ../common/UBL-UnqualifiedDataTypes-2.1.xsd ../common/UBL-CoreComponentParameters-2.1.xsd ../common/CCTS_CCT_SchemaModule-2.1.xsd ../common/UBL-CommonAggregateComponents-2.1.xsd</td>
<td>UBL-Invoice-2.1.cs</td>
<td>InvoiceType</td>
</tr>
<tr>
<td>E-İrsaliye</td>
<td>xsd /c UBL-DespatchAdvice-2.1.xsd ../common/UBL-CommonExtensionComponents-2.1.xsd ../common/UBL-CommonBasicComponents-2.1.xsd ../common/UBL-UnqualifiedDataTypes-2.1.xsd ../common/UBL-CoreComponentParameters-2.1.xsd ../common/CCTS_CCT_SchemaModule-2.1.xsd ../common/UBL-CommonAggregateComponents-2.1.xsd</td>
<td>UBL-DespatchAdvice-2.1.cs</td>
<td>DespatchAdviceType</td>
</tr>
<tr>
<td>E-İrsaliye Yanıtı</td>
<td>xsd /c UBL-ReceiptAdvice-2.1.xsd ../common/UBL-CommonExtensionComponents-2.1.xsd ../common/UBL-CommonBasicComponents-2.1.xsd ../common/UBL-UnqualifiedDataTypes-2.1.xsd ../common/UBL-CoreComponentParameters-2.1.xsd ../common/CCTS_CCT_SchemaModule-2.1.xsd ../common/UBL-CommonAggregateComponents-2.1.xsd</td>
<td>UBL-ReceiptAdvice-2.1.cs</td>
<td>ReceiptAdviceType</td>
</tr>
<tr>
<td>Müstahsil Makbuzu</td>
<td>xsd /c UBL-CreditNote-2.1.xsd ../common/UBL-CommonExtensionComponents-2.1.xsd ../common/UBL-CommonBasicComponents-2.1.xsd ../common/UBL-UnqualifiedDataTypes-2.1.xsd ../common/UBL-CoreComponentParameters-2.1.xsd ../common/CCTS_CCT_SchemaModule-2.1.xsd ../common/UBL-CommonAggregateComponents-2.1.xsd</td>
<td>UBL-CreditNote-2.1.cs</td>
<td>CreditNoteType</td>
</tr>
</tbody></table>

<p><br>
<aside class="notice">
2. Diğer bir yöntem ise String Replacement yöntemidir. Belgelere ait değişecek alanların belirlendiği bir şablon oluşturulur. Belge düzenlenirken ilgili alanlar güncellenir. Oluşan belge webservice parametre olarak gönderilir.
</aside></p>

<h2 id="deme-ekilleri">Ödeme Şekilleri</h2>

<p>e-Arşiv ve e-Fatura ödeme paymentmeans tag’ini fatura içerisinde kullanıyorsanız bu alanın örnek kod’ları aşağıdaki gibidir.</p>

<table><thead>
<tr>
<th>KOD</th>
<th>AÇIKLAMASI</th>
</tr>
</thead><tbody>
<tr>
<td>48</td>
<td>KREDIKARTI/BANKAKARTI</td>
</tr>
<tr>
<td>46</td>
<td>EFT/HAVALE</td>
</tr>
<tr>
<td>10</td>
<td>KAPIDAODEME</td>
</tr>
<tr>
<td>1</td>
<td>Diğerleri</td>
</tr>
</tbody></table>

<p>Diğer kodlar için aşağıdaki referanslardan yararlanabilirsiniz.
* Referans 1: http://www.unece.org/trade/untdid/d11a/tred/tred4461.htm
** Referans 2: https://www.stylusstudio.com/edifact/D01C/4461.htm</p>

<h2 id="webservice-endpoint-wsdl-url">Webservice Endpoint (WSDL) URL</h2>

<table><thead>
<tr>
<th>Ürün</th>
<th>Endpoint URL</th>
</tr>
</thead><tbody>
<tr>
<td>Kimlik Doğrulama</td>
<td><a href="https://efaturatest.izibiz.com.tr/AuthenticationWS?wsdl">https://efaturatest.izibiz.com.tr/AuthenticationWS?wsdl</a></td>
</tr>
<tr>
<td>E-Fatura Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/EInvoiceWS?wsdl">https://efaturatest.izibiz.com.tr/EInvoiceWS?wsdl</a></td>
</tr>
<tr>
<td>E-Arşiv Fatura Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/EIArchiveWS/EFaturaArchive?wsdl">https://efaturatest.izibiz.com.tr/EIArchiveWS/EFaturaArchive?wsdl</a></td>
</tr>
<tr>
<td>E-İrsaliye Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/EIrsaliyeWS/EIrsaliye?wsdl">https://efaturatest.izibiz.com.tr/EIrsaliyeWS/EIrsaliye?wsdl</a></td>
</tr>
<tr>
<td>E-Müstahsil Webservis</td>
<td><a href="http://efaturatest.izibiz.com.tr/CreditNoteWS/CreditNote?wsdl">http://efaturatest.izibiz.com.tr/CreditNoteWS/CreditNote?wsdl</a></td>
</tr>
<tr>
<td>E-Mutabakat Webservis</td>
<td><a href="http://efaturatest.izibiz.com.tr/ReconciliationWS?wsdl">http://efaturatest.izibiz.com.tr/ReconciliationWS?wsdl</a></td>
</tr>
<tr>
<td>E-Serbest Meslek Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/SmmWS?wsdl">https://efaturatest.izibiz.com.tr/SmmWS?wsdl</a></td>
</tr>
<tr>
<td>E-ZRapor Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/ZReportWS?wsdl">https://efaturatest.izibiz.com.tr/ZReportWS?wsdl</a></td>
</tr>
<tr>
<td>Faturalama Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/BillingWS?wsdl">https://efaturatest.izibiz.com.tr/BillingWS?wsdl</a></td>
</tr>
</tbody></table>

<h3 id="portal-uygulamas">Portal Uygulaması</h3>

<p>Entegrasyon sürecinde Portal uygulamamızı aşağıda ki durumlar için kullanabilirsiniz:</p>

<ul>
<li>Belgelerin durumunu kontrol</li>
<li>Farklı senaryolar için belge düzenleyerek XML içeriğini kontrol</li>
<li>Alıcı firmanın mükellefiyet sorgulaması</li>
</ul>

<p>Test Portal Adresimiz: <a href="https://portaltest.izibiz.com.tr">https://portaltest.izibiz.com.tr</a></p>

<p>Test portali erişim bilgileri için <strong>entegrasyon@izibiz.com.tr</strong> adresi ile iletişime geçebilirsiniz.</p>

<h2 id="entegrasyon-s-k-a-sorulan-sorular">Entegrasyon Sıkça Sorulan Sorular</h2>

<p>Entegrasyon sürecinde karşılaşılan soruların cevapları:</p>

<p><strong>Soru:</strong> Ürün bazlı (E-Fatura, E-İrsaliye) kayıtlı kullanıcıları sorgulayabileceğimiz bir servis mevcut mu ?</p>

<p><strong>Cevap:</strong> Kimlik Doğrulama webservisinde bulunan <strong>Mükellef Listesi Çekme (GetGibUserList)</strong> metodumuzu kullanarak E-Fatura ve E-İrsaliye mükellef listesini çekebilirsiniz. <strong>DOCUMENT_TYPE</strong>  parametresine E-Fatura için <code class="prettyprint">INVOICE</code>, E-İrsaliye için <code class="prettyprint">DESPATCHADVICE</code> gönderilmelidir. Her iki ürüne ait etiketleri toplu çekmek için <code class="prettyprint">ALL</code> değeri gönderilebilir. Parametre gönderilmez veya boş gönderilirse bütün liste dönülecektir.</p>

          <h1 id="kimlik-do-rulama-webservisi">Kimlik Doğrulama Webservisi</h1>

<p>Entegrasyon sürecinin ilk adımı olan kimlik doğrulamayı sağlayan servistir.  Yapılan her işlem mutlaka aktif bir oturum ile yapılmalıdır.</p>

<h2 id="stemci-client-rnek-projeler">İstemci (client) Örnek Projeler</h2>

<p>Webservice entegrasyonu için sunucu taraflı programlama diline uygun farklı istemci(client) örnekleri sunar. Bu istemcilerden programlama yapmak istediğiniz dile uygun olanı seçip test bilgileri ile kullanmaya başlayabilirsiniz.</p>

<p><a href="https://github.com/izibiz/izibiz-dotnet-soap-client" target="_blank"><img src="/images/icon_dotnet.png"/></a>
<a href="https://github.com/izibiz/ws-client-php" target="_blank"><img src="/images/icon_php.png" height="100" width="100"/></a>
<a href="https://github.com/izibiz/ws-client-java" target="_blank"><img src="/images/icon_java.png"/></a>
<a href="https://github.com/izibiz/ws-client-delphi" target="_blank"><img src="/images/icon_delphi.png" height="80" width="80"/></a>
<a href="https://github.com/izibiz/ws-client-soapui" target="_blank"><img src="/images/icon_soapui.png" height="90" width="100"/></a></p>

<h2 id="ortak-kullan-lan-eleman">Ortak Kullanılan Eleman</h2>

<p>Her webservis isteğinde gönderilmesi beklen ortak elemandır (REQUEST_HEADER)</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login Metodunda sistem tarafında gönderilen SESSION_ID bilgisi. Sonraki tüm metod çağrılarında parametre olarak metoda geçmelidir.</td>
</tr>
<tr>
<td><strong>APPLICATION_NAME</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Metodu çağıran uygulamanın adı. Mutlaka uygulama adının yazılması gerekmektedir.</td>
</tr>
<tr>
<td><strong>CHANNEL_NAME</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Metodun çağrıldığı kanal adı.</td>
</tr>
<tr>
<td><strong>COMPRESSED</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İçerikte taşınan bilginin ZIP formatında sıkıştırılmış mı gönderildiği/talep edildiği bilgisi. Belge gönderim ve belge okuma servislerinde gönderilen değere göre işlem yapılmaktadır.</td>
</tr>
<tr>
<td><strong>CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İstemci uygulama tarafından işlem için üretilen işlem bilgisi (transaction id) varsa istek esnasında gönderilip, sonuçta alabileceğiniz bir değerdir. request/response eşleşmesi yapmak için kullanılabilir.</td>
</tr>
<tr>
<td><strong>INT_PARENT_TXN_ID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İstemci uygulamasında ana modül entitileri ile ilişkilendirelmek istenen ana transaction ID.</td>
</tr>
<tr>
<td><strong>ACTION_DATE</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Metodun çağrılma tarihi</td>
</tr>
<tr>
<td><strong>CHANGE_INFO</strong></td>
<td>Array</td>
<td>Hayır</td>
<td>Bu eleman ile eğer verilerde bir değişiklik yapılacak ise o değişikliği ait bilgi.</td>
</tr>
<tr>
<td><strong>REASON</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İşlem sebebi. Fatura gönderme, fatura alma vs.</td>
</tr>
<tr>
<td><strong>HOST_NAME</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Metodu çağıran sunucunun host bilgisi.</td>
</tr>
<tr>
<td><strong>SIMULATION_FLAG</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Metod çağrılır ancak arkadaki işlem yapılmaz.</td>
</tr>
</tbody></table>

<h2 id="ba-ar-sonu-nesnesi">Başarı Sonuç Nesnesi</h2>

<p>Webservis işlem başarılı olduğunda response objesi içerisinde <code class="prettyprint">REQUEST_RETURN</code> tipinde sonuç dönülecektir.</p>

<p>Servisten dönen hata sonuç nesnesi şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN</strong></td>
<td>ComplexType</td>
<td>İşlem sonucunu içeren başarılı sonuç objesi</td>
</tr>
<tr>
<td><strong>INT_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda bu eleman dönülmez.</td>
</tr>
<tr>
<td><strong>INVOICE_ID</strong></td>
<td>String</td>
<td>Fatura numarası e-arşiv platformunda atanmışsa atanan fatura numarası dönülür.</td>
</tr>
</tbody></table>

<h2 id="hata-sonu-nesnesi">Hata Sonuç Nesnesi</h2>

<p>Webservis metodunda hata oluşması durumunda response objesi içerisinde <code class="prettyprint">ERROR_TYPE</code> tipinde sonuç dönülecektir.</p>

<p>Servisten dönen hata sonuç nesnesi şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>ERROR_TYPE</strong></td>
<td>ComplexType</td>
<td>İşlem sonucunu içeren başarısız/hatalı sonuç objesi</td>
</tr>
<tr>
<td><strong>INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>ERROR_CODE</strong></td>
<td>String</td>
<td>Hata kodu. Hata kod detayları için ilgili servisteki hata kod listesini inceleyebilirsiniz.</td>
</tr>
<tr>
<td><strong>ERROR_SHORT_DESC</strong></td>
<td>String</td>
<td>Hatanın kısa açıklaması.</td>
</tr>
</tbody></table>

<h2 id="oturum-a-ma-login">Oturum Açma (Login)</h2>

<ul>
<li>Web servis istemcisinin(client) özel entegratör platformuna kimlik doğrulayarak giriş yapmasını sağlar.</li>
<li>Bu servise giriş için kullanılan kullanıcı bilgileri, portale giriş için kullanılan kullanıcı bilgileri ile aynıdır.</li>
<li><strong>Login</strong> işleminden dönen işlem ID parametresi daha sonra çağrılacak tüm metotlarda <code class="prettyprint">HEADER_REQUEST.SESSION_ID</code> elemanı olarak gönderilmelidir.</li>
</ul>

<aside class="notice">DİKKAT: Açılan oturum sistemimizde 8 saat aktif kalmaktadır. Her fatura gönderiminde oturum açma ve kapatmak zorunda değilsiniz.
</aside>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur.</td>
</tr>
<tr>
<td><strong>REQUEST_HEADER.SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde bulunan <code class="prettyprint">SESSION_ID</code> login servisinde -1 olarak gönderilmelidir.</td>
</tr>
<tr>
<td><strong>USER_NAME</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Sisteme tanımlı kullanıcı adı. <strong>Test hesabı için entegrasyon@izibiz.com.tr e-posta adresiyle iletişime geçebilirsiniz.</strong></td>
</tr>
<tr>
<td><strong>PASSWORD</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Sisteme tanımlı kullanıcıya ait şifre.</td>
</tr>
</tbody></table>

<p><br><br>
Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td>Sonraki metod çağrılarında kullanılacak oturum bilgisi.</td>
</tr>
</tbody></table>

<h2 id="oturum-kapatma-logout">Oturum Kapatma (Logout)</h2>

<p>Web servis istemcisinin özel entegratör platformunda ki oturumu kapatmasını sağlayan servistir.</p>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Oturum kapatılmak istenen session ID değeri</td>
</tr>
</tbody></table>

<p><br>
<br>
Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>RETURN_CODE</strong></td>
<td>String</td>
<td>Oturum başarı ile sonlandırılmışsa <code class="prettyprint">0</code> döner</td>
</tr>
</tbody></table>

<h2 id="m-kellef-listesi-ekme-getgibuserlist">Mükellef Listesi Çekme (GetGibUserList)</h2>

<p>E-Fatura ve E-İrsaliye sistemine kayıtlı firmalara ait GB/PK etiketlerinin sıkıştırılmış olarak istenilen tipte dönüldüğü servistir.</p>

<h3 id="m-kellef-ekme-senaryolar">Mükellef Çekme Senaryoları</h3>

<table><thead>
<tr>
<th><div style="width:500px">İşlem</div></th>
<th>DOCUMENT</th>
<th>ALIAS</th>
<th>ALIAS_MODIFY</th>
<th>REGISTER_TIME</th>
</tr>
</thead><tbody>
<tr>
<td><code class="prettyprint">Aktif</code> E-Fatura ve E-İrsaliye posta kutusu etiketlerini çekme</td>
<td>ALL</td>
<td>PK</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><code class="prettyprint">Aktif</code> E-Fatura ve E-İrsaliye GB ve PK etiketlerini çekme</td>
<td>ALL</td>
<td>ALL</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><code class="prettyprint">Aktif</code> E-Fatura posta kutusu etiketlerini çekme</td>
<td>INVOICE</td>
<td>PK</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td><code class="prettyprint">Aktif</code> E-İrsaliye posta kutusu etiketlerini çekme</td>
<td>DESPATCHADVICE</td>
<td>PK</td>
<td>-</td>
<td>-</td>
</tr>
<tr>
<td>Belirli tarihten sonra (2019-12-01) <code class="prettyprint">eklenen veya silinen</code> E-Fatura ve E-İrsaliye posta kutusu etiketlerini çekme</td>
<td>ALL</td>
<td>PK</td>
<td>2019-12-01</td>
<td>-</td>
</tr>
<tr>
<td>Belirli tarihten sonra (2019-12-01) <code class="prettyprint">eklenen veya silinen</code> E-Fatura ve E-İrsaliye GB ve PK etiketlerini çekme</td>
<td>ALL</td>
<td>ALL</td>
<td>2019-12-01</td>
<td>-</td>
</tr>
<tr>
<td>Belirli tarihten sonra (2019-12-01) <code class="prettyprint">eklenen veya silinen</code> E-Fatura posta kutusu etiketlerini çekme</td>
<td>INVOICE</td>
<td>PK</td>
<td>2019-12-01</td>
<td>-</td>
</tr>
<tr>
<td>Belirli tarihten sonra (2019-12-01) <code class="prettyprint">eklenen veya silinen</code> E-İrsaliye posta kutusu etiketlerini çekme</td>
<td>DESPATCHADVICE</td>
<td>PK</td>
<td>2019-12-01</td>
<td></td>
</tr>
<tr>
<td>Belirli tarihten sonra (2019-12-01) E-Fatura veya E-İrsaliye <code class="prettyprint">mükellefi</code> olan firmaların etiketlerini çekme</td>
<td>ALL</td>
<td>ALL</td>
<td>-</td>
<td>2019-12-01</td>
</tr>
<tr>
<td>Belirli tarihten sonra (2013-12-01) E-Fatura veya E-İrsaliye <code class="prettyprint">mükellefi</code> olan firmaların belirtilen bir tarihten (2019-12-01) sonra <code class="prettyprint">eklenen veya silinen</code> etiketlerini çekme</td>
<td>ALL</td>
<td>ALL</td>
<td>2019-12-01</td>
<td>2013-12-01</td>
</tr>
</tbody></table>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td>Evet</td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur.</td>
</tr>
<tr>
<td><strong>TYPE</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Listenin dönüleceği dosya tipi. <code class="prettyprint">XML</code> ve <code class="prettyprint">CSV</code> olabilir. Varsayılan <code class="prettyprint">XML</code>dir.</td>
</tr>
<tr>
<td><strong>DOCUMENT_TYPE</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Mükellef listesi çekilmek istenilen ürün tipi. E-Fatura için <code class="prettyprint">INVOICE</code>, E-İrsaliye için <code class="prettyprint">DESPATCHADVICE</code> gönderilmelidir. Her iki ürüne ait etiketleri çekmek için <code class="prettyprint">ALL</code> değeri gönderilebilir. Parametre gönderilmez bütün ürünlere ait <code class="prettyprint">Aktif</code> etiket listesi dönülecektir.</td>
</tr>
<tr>
<td><strong>ALIAS_TYPE</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Mükelleflerin etiketlerine göre çekmek için kullanılır. Sadece Gönderici Birim etiketini çekmek için <code class="prettyprint">GB</code>, Posta Kutusu etiketini çekmek için  <code class="prettyprint">PK</code> gönderilmelidir. Bütün etiketleri çekmek için <code class="prettyprint">ALL</code> değeri gönderilebilir. Varsayılan <code class="prettyprint">PK</code>dir.  Parametre gönderilmez ise sadece <code class="prettyprint">PK</code> etiket listesi dönülecektir. Belge göndermek için sadece PK etiketlerine ihtiyaç bulunmaktadır.</td>
</tr>
<tr>
<td><strong>REGISTER_TIME_START</strong></td>
<td>DateTime</td>
<td>Hayır</td>
<td>Mükellefiyet başlangıç tarihi. Belirli bir tarihten sonra e-fatura veya e-irsaliye mükellefi sisteme dahil olmuş mükellefleri çekmek için kullanılabilir. Eğer tarih içerisinde saat bilgisi gönderilirse sonuç dönülürken dikkate alınacaktır. format: YYYY-AA-GG veya YYYY-AA-GGTSS:DD:SS formatında 2013-01-01, 2013-01-01T01:01:01</td>
</tr>
<tr>
<td><strong>ALIAS_MODIFY_DATE</strong></td>
<td>DateTime</td>
<td>Hayır</td>
<td>Etiket durum değişiklik tarihi. Belirli bir tarihten sonra sisteme eklenen veya silinen etiketleri çekmek için kullanılabilir. Bu parametre gönderilirse gönderilen tarihten sonra sisteme eklenen veya silinen etiketler dönülecektir. Eğer tarih içerisinde saat bilgisi gönderilirse sonuç dönülürken dikkate alınacaktır. format: YYYY-AA-GG veya YYYY-AA-GGTSS:DD:SS formatında 2013-01-01, 2013-01-01T01:01:01</td>
</tr>
</tbody></table>

<p><br><br>
Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>CONTENT</strong></td>
<td>Base64Encoded</td>
<td>Kriterlere uygun mükelleflere ait GB ve PK adresleri</td>
</tr>
</tbody></table>

<aside class="success">
Sonuç sıkıştırılmış XML dosyası içerisinde `USER` tipinde değer dönülmektedir. Sonuç istemci tarafına çekildikten sonra zipten çıkarılmalı ve XML dosya işlenmelidir.
</aside>

<p><strong>XML dosyasının içerisinde bulunan USER objesinin elamanları şu şekildedir :</strong></p>

<table><thead>
<tr>
<th>Eleman</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>USER.IDENTIFIER</strong></td>
<td>String</td>
<td>Mükellefe ait VKNsı.</td>
</tr>
<tr>
<td><strong>USER.ALIAS</strong></td>
<td>String</td>
<td>Mükellefe ait GB veya PK etiketi. format: urn:mail:defaultgb@firma.com</td>
</tr>
<tr>
<td><strong>USER.TITLE</strong></td>
<td>String</td>
<td>Firmanın GİB e-fatura sisteminde tanımlı ünvanı.</td>
</tr>
<tr>
<td><strong>USER.TYPE</strong></td>
<td>String</td>
<td>Firmanın GİB e-fatura sisteminde tanımlı tipi. <code class="prettyprint">OZEL</code> veya <code class="prettyprint">KAMU</code> olabilir.</td>
</tr>
<tr>
<td><strong>USER.UNIT</strong></td>
<td>String</td>
<td>Etiketin tipi. <code class="prettyprint">GB</code> veya <code class="prettyprint">PK</code></td>
</tr>
<tr>
<td><strong>USER.DOCUMENT_TYPE</strong></td>
<td>String</td>
<td>E-Fatura için <code class="prettyprint">INVOICE</code>, E-İrsaliye için <code class="prettyprint">DESPATCHADVICE</code> dönülmektedir.</td>
</tr>
<tr>
<td><strong>USER.REGISTER_TIME</strong></td>
<td>DateTime</td>
<td>Firmanın GİB e-fatura sistemine ilk kayıt olduğu tarih. formatı: 2013-07-01T15:22:11</td>
</tr>
<tr>
<td><strong>USER.ALIAS_CREATION_TIME</strong></td>
<td>DateTime</td>
<td>Etiketin oluşturulduğu tarih. formatı: 2013-07-01T15:22:11</td>
</tr>
<tr>
<td><strong>USER.DELETED</strong></td>
<td>String</td>
<td>Eleman sadece silinmiş etiketlerde bulunur. Değeri <code class="prettyprint">Y</code> olur. Silinmemiş etiketlerde bu eleman bulunmaz.</td>
</tr>
<tr>
<td><strong>USER.DELETION_TIME</strong></td>
<td>DateTime</td>
<td>Eleman sadece silinmiş etiketlerde bulunur. Etiketin GİB sisteminde kapatıldığı tarih. formatı: 2013-07-01T15:22:11</td>
</tr>
</tbody></table>

<h2 id="e-fatura-m-kellefi-sorgulama-checkuser">E-Fatura Mükellefi Sorgulama (CheckUser)</h2>

<ul>
<li>Mükellefin, Gelir İdaresi Başkanlığı sistemine kayıtlı olup olmadığının kontrol edildiği servistir.</li>
<li>Sorgulanan VKN GİB sistemine kayıtlıysa, sistemde tanımlanmış etiket listesi dönülmektedir.</li>
<li>Sorgulanan VKN GİB sistemine kayıtlı değilse liste boş dönülür. <strong>Sonuç boş ise firma mükellef değildir.</strong></li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur.</td>
</tr>
<tr>
<td><strong>USER.IDENTIFIER</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Mükellefiyeti sorgulanacak firmanın vergi kimlik numarası</td>
</tr>
<tr>
<td><strong>DOCUMENT_TYPE</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Mükelleffiyet kontrol edilecek ürün tipi. E-Fatura için <code class="prettyprint">INVOICE</code>, E-İrsaliye için <code class="prettyprint">DESPATCHADVICE</code> gönderilmelidir.</td>
</tr>
</tbody></table>

<p><br><br>
Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>USER.IDENTIFIER</strong></td>
<td>String</td>
<td>Mükellefe ait VKNsı.</td>
</tr>
<tr>
<td><strong>USER.ALIAS</strong></td>
<td>String</td>
<td>Mükellefe ait GB veya PK etiketi.</td>
</tr>
<tr>
<td><strong>USER.TITLE</strong></td>
<td>String</td>
<td>Firmanın GİB sisteminde tanımlı ünvanı.</td>
</tr>
<tr>
<td><strong>USER.TYPE</strong></td>
<td>String</td>
<td>Firmanın GİB sisteminde tanımlı tipi. <code class="prettyprint">OZEL</code> veya <code class="prettyprint">KAMU</code> olabilir.</td>
</tr>
<tr>
<td><strong>USER.REGISTER_TIME</strong></td>
<td>Date</td>
<td>Firmanın GİB sistemine ilk kayıt olduğu tarih. formatı: 2013-07-01T15:22:11</td>
</tr>
<tr>
<td><strong>USER.UNIT</strong></td>
<td>String</td>
<td>Etiketin tipi. <code class="prettyprint">GB</code> veya <code class="prettyprint">PK</code></td>
</tr>
<tr>
<td><strong>USER.ALIAS_CREATION_TIME</strong></td>
<td>DateTime</td>
<td>Etiketin oluşturulduğu tarih. formatı: 2013-07-01T15:22:11</td>
</tr>
</tbody></table>

          <h1 id="e-fatura-webservisi">E-Fatura Webservisi</h1>

<p>e-Fatura servisi, e-fatura mükellefinin fatura gönderimini ve gelen faturaları kendisi sistemine çekmesini sağlayan webservis uygulamasıdır.</p>

<h2 id="g-b-dok-manlar">GİB Dokümanları</h2>

<table><thead>
<tr>
<th>Doküman</th>
<th>Açıklama</th>
<th>İndir</th>
</tr>
</thead><tbody>
<tr>
<td><strong>UBL-TR Fatura</strong></td>
<td>UBL-TR v1.2 (UBL 2.1 Türkiye Özelleştirmesi) paketinde yer alan fatura belgesinde geçen elemanlara ait XSD, tanımlama, kullanım şekilleri, kardinaliteler hakkında bilgi vermek ve örnek kullanım şekillerini göstermek amacı ile hazırlanmıştır.</td>
<td><a href="/resource/BELGELER/UBL-TR Fatura - V 1.0.pdf"><img src="/images/icon_pdf.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>UBL-TR Ortak Elemanlar</strong></td>
<td>UBL-TR (UBL 2.1 Türkiye Özelleştirmesi) paketinde yer alan belgelerde geçmesi muhtemel elemanlara ait (ortak elemanlar örneğin: Adres, Parasal Toplamlar, Taraf gibi) XSD, açıklama, kullanım şartları, kardinaliteler hakkında bilgi vermek ve örnek kullanım şekillerini göstermek amacı ile hazırlanmıştır.</td>
<td><a href="/resource/BELGELER/UBL-TR Ortak Elemanlar - V 0.7.pdf"><img src="/images/icon_pdf.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>UBL-TR Kod Listeleri</strong></td>
<td>UBL-TR kapsamında kullanılan Kodlama Sistemleri ve Kimlik Şemaları hakkında bilgi vermek amacı ile hazırlanmıştır.</td>
<td><a href="/resource/BELGELER/UBL-TR Kod Listeleri - V 1.18.pdf"><img src="/images/icon_pdf.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Gümrük İşlemleri Kılavuzu</strong></td>
<td>Elektronik Fatura Uygulamasında yolcu beraberi eşya ihracı ve mal ihracı faturalarını e-fatura sistemine entegre edecek ve uygulamaya ilişkin yazılım geliştireceklerin teknik konularda ihtiyaç duyabilecekleri bilgileri vermek amacıyla hazırlanmıştır.</td>
<td><a href="/resource/GUMRUK/Gumruk_Islemleri_Kilavuzu_Versiyon_1_8.pdf"><img src="/images/icon_pdf.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>İhracat Faturası Ek Alanlar</strong></td>
<td>İhracat faturalarında eklenmesi zorunlu ve isteğe bağlı alanların açıklamak için hazırlanmıştır.</td>
<td><a href="/resource/GUMRUK/Gumruk_Islemleri_Kilavuzu_Versiyon_1_8.pdf"><img src="/images/icon_pdf.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>SGK E-Fatura Teknik Kılavuzu</strong></td>
<td>Elektronik Fatura Uygulamasında Sosyal Güvenlik Kurumuna (SGK) düzenlenecek  faturaların e-fatura sistemine entegre edecek uygulamaya ilişkin yazılım geliştireceklerin teknik konularda ihtiyaç duyabilecekleri bilgileri vermek amacıyla hazırlanmıştır.</td>
<td><a href="https://ebelge.gib.gov.tr/dosyalar/kilavuzlar/SGK_e-FATURA_UYGULAMA_KILAVUZU.pdf"><img src="/images/icon_pdf.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Kamu E-Fatura Teknik Kılavuzu</strong></td>
<td>e-Fatura Uygulamasına kayıtlı olan vergi mükelleflerimiz, 5018 sayılı Kamu Mali Yönetimi ve Kontrol Kanunu ile belirlenmiş merkezi yönetim kapsamında yer alan ve Muhasebat ve Mali Kontrol Genel Müdürlüğü (MGM) tarafından geliştirilen Yeni Harcama Yönetim Sistemini (MYS) kullanan kamu idareleri ve bunlara bağlı harcama birimleri adına, 1.3.2019 tarihinden itibaren GİB e-Fatura Uygulaması aracılığı ile e-Fatura düzenleyip gönderebileceklerdir. Teknik kılavuz hazırlanmıştır.</td>
<td><a href="https://ebelge.gib.gov.tr/dosyalar/kilavuzlar/Kamu_e-Fatura_Teknik_Kilavuzu.pdf"><img src="/images/icon_pdf.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Hal Tipi Fatura Kılavuzu</strong></td>
<td>Hal Komisyoncularının düzenlediği KOMİSYONCU veya SATIŞ faturalarının işleyişinin açıklandığı teknik kılavuzdur.</td>
<td><a href="/resource/HAL/Hal-Fatura.docx"><img src="/images/icon_pdf.png" height="40" width="35"/></a></td>
</tr>
</tbody></table>

<h2 id="ubl-fatura-rnekleri">UBL-Fatura Örnekleri</h2>

<p>E-Fatura ve E-Arşiv Fatura sistemi üzerinden düzenlebilecek ve gönderilebilecek fatura senaryoları ve örnek fatura XML dosyası aşağıda listelenmiştir.</p>

<aside class="notice">Listede bulunmayan senaryolar için fatura üretmek için  E-Fatura Portale erişebilirsiniz.</aside>

<table><thead>
<tr>
<th>Fatura Senaryosu</th>
<th>Açıklama</th>
<th>XML</th>
<th>HTML</th>
</tr>
</thead><tbody>
<tr>
<td><strong>Temel Satış Faturası</strong></td>
<td>Alıcısı tarafından elektronik ortamda kabul veya reddedilemeyen fatura tipidir.</td>
<td><a href="/resource/xml/FATURA_2.xml" target="_blank"><img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_2.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Ticari Satış Faturası</strong></td>
<td>Alıcısı tarafından elektronik ortamda kabul veya reddedilebilen fatura tipidir.</td>
<td><a href="/resource/xml/FATURA_1.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_1.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>İade Faturası</strong></td>
<td>Alınan bir fatura üzerinde ki yanlış tutar veya eksik bilgi sebebi ile düzenlenen fatura tipidir. <strong>İade faturası TEMELFATURA olarak gönderilmesi zorunludur.</strong></td>
<td><a href="/resource/xml/FATURA_4.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_4.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Farklı KDV Oranlarına Sahip Fatura</strong></td>
<td>Fatura satırında farklı KDV oranlarının bulunduğu fatura örneğidir. Her satırda farklı KDV oranı vardır.</td>
<td><a href="/resource/xml/FATURA_5.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_5.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>0 KDV Fatura</strong></td>
<td>Fatura satırında KDV oranı 0 olan satış faturası örneğidir. KDV 0 olduğu durumlarda muafiyet sebebi belirtilmelidir.</td>
<td><a href="/resource/xml/FATURA_6.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_6.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Dövizli Satış Faturası</strong></td>
<td>Fatura para birimi TL dışında farklı bir para birimi ile düzenlenen fatura örneğidir. Faturanın içerisinde tutarlar döviz cinsindendir.  TL karşlıkları XML içerisinde bulunmaz. TL karşılıkları görsel üzerinde tutar ile kur çarpılarak gösterilir.</td>
<td><a href="/resource/xml/FATURA_7.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_7.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Bedelsiz (%100 İskontolu) Satış Faturası</strong></td>
<td>Promosyon, Eşantiyon veya Numune Ürün Teslimlerinde bedelsiz düzenlenen fatura örneğidir. Bu faturalarda KDV 0 hesaplandığı için muafiyet sebebi belirtilmelidir.  Bu faturaların muafiyet kodu 351 olur. Muafiyet sebebi ise müşteri tarafından girilebilir.</td>
<td><a href="/resource/xml/FATURA_10.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_10.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Satırda Çoklu İskontolu Satış Faturası</strong></td>
<td>Bir fatura satırında birden fazla iskonto içeren fatura örneğidir.</td>
<td><a href="/resource/xml/FATURA_9.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_9.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>İstisna Faturası</strong></td>
<td>İstisna Faturası</td>
<td><a href="/resource/xml/FATURA_11.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_11.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Özel Mathrah Faturası</strong></td>
<td>Özel Matrah Faturası</td>
<td><a href="/resource/xml/FATURA_12.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_12.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Tevkifat Faturası</strong></td>
<td>Tevkifat Faturası</td>
<td><a href="/resource/xml/FATURA_13.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_13.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>İhraç Kayıtlı Fatura</strong></td>
<td>İhraç Kayıtlı Fatura</td>
<td><a href="/resource/xml/FATURA_17.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_17.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>İhracat Faturası</strong></td>
<td>İhracat Faturası</td>
<td><a href="/resource/xml/FATURA_18.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_18.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Yolcu Beraberi (Taxfree)</strong></td>
<td>Yolcu Beraberi (Taxfree)</td>
<td><a href="/resource/xml/FATURA_19.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_19.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>SGK Faturası</strong></td>
<td>SGK Faturası TEMELFATURA senaryosunda gönderilmek zorundadır.</td>
<td><a href="/resource/xml/FATURA_20.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_20.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Kamu Faturası</strong></td>
<td>Kamu kurum ve kuruluşlarına düzenlenen fatura örneğidir. TEMELFATURA senaryosunda göndermek zorundadır.</td>
<td><a href="/resource/xml/FATURA_23.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_23.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Hal Komisyon Faturası</strong></td>
<td>Hal Komisyoncularının komisyon kazançları için düzenledikleri fatura tipidir. Faturanın HKS senaryosunda gönderilmesi zorunludur.</td>
<td><a href="/resource/xml/HAL-KOMISYONCU.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/HAL-KOMISYONCU.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Hal Satış Faturası</strong></td>
<td>Hal Komisyoncularının mal üretici veya tüccarın malını satışında düzenledikleri fatura tipidir. Satış fatura tipinde var olan özelliklerinin yanında Mal Sahibi Bilgileri (mal sahibi Ad Soyad /Unvan ve Mal Sahibi VKN/TCKN olmak üzere iki ayrı alan)ve künye numarası sütunlarının olması gerekmektedir. Künye no sütunu zorunlu alan olup  19 Haneden az veya çok girilememelidir.</td>
<td><a href="/resource/xml/HAL-SATIS.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/HAL-SATIS.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Gelir Vergisi(GV) Stopajlı Fatura</strong></td>
<td>Gelir vergisi stopajı uygulanan fatura örneğidir.</td>
<td><a href="/resource/xml/FATURA_14.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_14.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Kurumlar Vergisi(KV) Stopajlı Fatura</strong></td>
<td>Kurumlar vergisi stopajı uygulanan fatura örneğidir.</td>
<td><a href="/resource/xml/FATURA_15.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_15.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Ek Belge İçeren Fatura</strong></td>
<td>Faturanın ekinde belge gönderildiği durumlarda düzenlenecek fatura örneğidir.</td>
<td><a href="/resource/xml/FATURA_16.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_16.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>E-Arşiv Fatura - İnternet</strong></td>
<td>Internet üzerine yapılan satış için düzenlenen fatura tipidir. Bu faturalar alıcısına elektronik ortamda iletilmek zorundadır. Bu faturalar diğer satış faturalarından farklı bir seriden gönderilmeldir.</td>
<td><a href= "/resource/xml/FATURA_21.xml" target="_blank"><img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_21.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>E-Arşiv Fatura - Normal</strong></td>
<td>Internet üzerine yapılan satış dışında düzenlenen fatura tipidir. Bu faturalar alıcısına elektronik ortamda iletilebileceği gibi kağıt olarakta teslim edilebilir.</td>
<td><a href= "/resource/xml/FATURA_22.xml" target="_blank"><img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_22.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
</tbody></table>

<h2 id="webservice-endpoint-wsdl-url">Webservice Endpoint (WSDL) URL</h2>

<table><thead>
<tr>
<th>Ürün</th>
<th>Endpoint URL</th>
</tr>
</thead><tbody>
<tr>
<td>Kimlik Doğrulama</td>
<td><a href="https://efaturatest.izibiz.com.tr/AuthenticationWS?wsdl">https://efaturatest.izibiz.com.tr/AuthenticationWS?wsdl</a></td>
</tr>
<tr>
<td>E-Fatura Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/EInvoiceWS?wsdl">https://efaturatest.izibiz.com.tr/EInvoiceWS?wsdl</a></td>
</tr>
<tr>
<td>E-Arşiv Fatura Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/EIArchiveWS/EFaturaArchive?wsdl">https://efaturatest.izibiz.com.tr/EIArchiveWS/EFaturaArchive?wsdl</a></td>
</tr>
<tr>
<td>E-İrsaliye Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/EIrsaliyeWS/EIrsaliye?wsdl">https://efaturatest.izibiz.com.tr/EIrsaliyeWS/EIrsaliye?wsdl</a></td>
</tr>
<tr>
<td>E-Müstahsil Webservis</td>
<td><a href="http://efaturatest.izibiz.com.tr/CreditNoteWS/CreditNote?wsdl">http://efaturatest.izibiz.com.tr/CreditNoteWS/CreditNote?wsdl</a></td>
</tr>
<tr>
<td>E-Mutabakat Webservis</td>
<td><a href="http://efaturatest.izibiz.com.tr/ReconciliationWS?wsdl">http://efaturatest.izibiz.com.tr/ReconciliationWS?wsdl</a></td>
</tr>
<tr>
<td>E-Serbest Meslek Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/SmmWS?wsdl">https://efaturatest.izibiz.com.tr/SmmWS?wsdl</a></td>
</tr>
<tr>
<td>E-ZRapor Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/ZReportWS?wsdl">https://efaturatest.izibiz.com.tr/ZReportWS?wsdl</a></td>
</tr>
<tr>
<td>Faturalama Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/BillingWS?wsdl">https://efaturatest.izibiz.com.tr/BillingWS?wsdl</a></td>
</tr>
</tbody></table>

<h3 id="portal-uygulamas">Portal Uygulaması</h3>

<p>Entegrasyon sürecinde Portal uygulamamızı aşağıda ki durumlar için kullanabilirsiniz:</p>

<ul>
<li>Belgelerin durumunu kontrol</li>
<li>Farklı senaryolar için belge düzenleyerek XML içeriğini kontrol</li>
<li>Alıcı firmanın mükellefiyet sorgulaması</li>
</ul>

<p>Test Portal Adresimiz: <a href="https://portaltest.izibiz.com.tr">https://portaltest.izibiz.com.tr</a></p>

<p>Test portali erişim bilgileri için <strong>entegrasyon@izibiz.com.tr</strong> adresi ile iletişime geçebilirsiniz.</p>

<h2 id="test-hesaplar">Test Hesaplar</h2>

<p>Test sürecinde düzenlenen faturaların/irsaliyelerin göndericisi, alıcısı ve etiketler için aşağıda ki bilgiler kullanılmalıdır.</p>

<table><thead>
<tr>
<th>Gönderici VKN</th>
<th>Gönderici Etiket</th>
<th>Alıcı VKN</th>
<th>Alıcı Etiket</th>
</tr>
</thead><tbody>
<tr>
<td>4840847211</td>
<td>urn:mail:defaultgb@izibiz.com.tr</td>
<td>4840847211</td>
<td>urn:mail:defaultpk@izibiz.com.tr</td>
</tr>
</tbody></table>

<h2 id="dikkat-edilecek-hususlar">Dikkat Edilecek Hususlar</h2>

<p>Uygulamanızı tasarlarken aşağıda ki bilgiler faydalı olacaktır:</p>

<ol>
<li><strong>Kimlik Doğrulama (Authentication)</strong> Webservisinde bulunan <strong>Login</strong> servisi ile oturum açarak session id alınacak. Session Id sistemimiz tarafında 8 saate kadar zaman aşımına uğramadığı için kullanıcı giriş yapınca session id alıp bütün kullanım süresinde aynı session id kullanabilirsiniz.</li>
<li><strong>Kimlik Doğrulama (Authentication)</strong> Webservisinde bulunan <strong>GetGibUserList</strong> servisi ile GIB e-fatura mükellef listesini her 2 saatte özel entegratör platformundan çekmeniz gerekmektedir. Güncel listeyi çektikten sonra Cari listenizde ki firmaların e-fatura mükellefi olup olmadığını güncellemelisiniz.</li>
<li>E-Fatura Mükellefi olan firmalara kesilen faturaları UBL-TR formatına dönüştürerek (ekte örnek fatura bulunuyor) İzibiz sunucularına gönderebilirsiniz. Her fatura içerisinde faturanın görüntülenmesini sağlayan XSLT dokümanı olmalıdır.</li>
<li><strong>SendInvoice</strong> metodu ile fatura gönderimi yapılacak. Gönderim esnasında eğer faturanın alıcısına ait birden fazla Posta Kutusu bulunuyorsa ekranda seçilerek gönderilmesi sağlanmalı. Sadece 1 adet PK adresi varsa seçim yapılmadan gönderim sağlanabilir.</li>
<li><strong>GetInvoiceStatus</strong> metodu ile gelen/giden faturaların durumları sorgulanacak. Nihai duruma erişene kadar faturanın durumu özel entegratör sisteminden minumum 4 saatte bir sorgulanmalıdır. <strong>Sık sorgulama yapmayınız.</strong></li>
<li><strong>GetInvoice</strong> metodu ile firmaya gelen faturalar müşteri bilgisayarına aktarılır. İzibiz sistemlerine gelen yeni faturaları almanız gerekmektedir. Servis ile yeni gelen en fazla 100 adet faturayı çekebilirsiniz. Eğer dönen listede 100 adet fatura varsa yeniden getinvoice servisi çağırılarak başka fatura olup olmadığı kontrol edilmelidir. Dönen listede 100den az fatura varsa tekrar sorgulama yapmaya gerek yoktur. Fatura çekme zamanlayıcı ile yapılıyorsa en az 15 dk bir servis çağırılmalıdır.</li>
<li><strong>MarkInvoice</strong> metodu ile başarılı şekilde teslim alınan faturalar izibiz sistemlerinde okundu olarak işaretlenir. Böylece bir sonra ki getinvoice servisi çağrılınca dönülmez.</li>
<li><strong>SendInvoiceResponseWithServerSign</strong> metodu ile gelen ticari bir faturaya kabul veya red yanıtı gönderebilirsiniz.</li>
<li>Gelen bir faturaya 8 gün içerisinde kabul veya red gönderilebilir. <strong>8 günü geçtikten sonra kabul/red yapılması engellenmelidir. Temel faturalar için yanıt gönderilmesi kısıtlanmalıdır.</strong></li>
<li>Ticari bir faturaya elektronik ortamda en fazla 1 adet yanıt gönderilebilir. Bundan dolayı bir faturaya başarıyla yanıt (kabul/red) gönderilmişse farklı bir yanıt gönderilmesi kısıtlanmalıdır.</li>
<li><strong>Kimlik Doğrulama (Authentication)</strong> Webservisinde bulunan <strong>Logout</strong> metodu ile kullanıcı e-fatura programını kapatınca veya sizin belirlediğiniz bir sürede oturumu kapatabilirsiniz.</li>
</ol>

<h2 id="e-fatura-entegrasyon-kontrol-listesi">E-Fatura Entegrasyon Kontrol Listesi</h2>

<table><thead>
<tr>
<th>Durum</th>
<th>Kontrol</th>
</tr>
</thead><tbody>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Oturum Açmak için <strong>Kimlik Doğrulama (Authentication)</strong> webservisinde ki <strong>Login</strong> metodu kullanıldı.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Oturum açıldıktan sonra bütün isteklerde aynı Session ID kullanılıyor. Eğer Aktif session bulunamadı hatası dönülürse yeni oturum açılıyor.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>E-Fatura mükellef listesi çekmek için <strong>Kimlik Doğrulama (Authentication)</strong> webservisinde ki <strong>GetGibUserList</strong> metodu kullanılıyor.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Gönderilen her istek ile REQUEST_HEADER objesinde ki <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanları dolu gönderiliyor.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Fatura numarası ataması müteselsilliği sağlıyor.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Her türlü fatura senaryosuna göre fatura <strong>SendInvoice</strong> metodu kullanılarak gönderildi (TEMEL, TICARI, IHRACAT, YOLCUBERABERI,SGK)</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Her türlü fatura tipinden örnek fatura gönderildi. (Satış, Iade, Tevkifat, Özel Matrah vs)</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Özel entegratöre iletilen faturalar için muhasebe paketi/ERP&#39;de değişiklik yapılamıyor. Kayıt kitleniyor.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Alıcı tarafında hata almış faturalar <strong>aynı fatura numarası ama farklı ETTN</strong> ile tekrar <strong>SendInvoice</strong> servisi kullanılarak gönderilebiliyor.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>7 günden geriye fatura düzenlenemiyor.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td><strong>GetInvoice</strong> metodu kullanılarak yeni gelen bütün faturalar içerikleri ile beraber (XML) müşteri ortamına çekiliyor.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Özel entegratörden fatura çekme özelliği ekranda bir butona değilde zamanlayıcı ile belirli aralıkta otomatik yapılıyorsa bu süre konfiguratif ve en az 15dk olarak belirlendi.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Özel entegratörden fatura çekme ekranda bir buton ile kullanıcıya bırakıldıysa kullanıcı çok sık butona tıklasa bile 5 dakika da bir yapılıyor.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Özel entegratörden <strong>GetInvoice</strong> metodu ile çekilen faturaların XMLleri (file sisteme veya veritabanına) kaydediliyor.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Başarı ile kaydedilen faturalar için <strong>MarkInvoice</strong> kullanılarak alındı mesajı gönderildi.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Alınan bütün faturalar için toplu alındı mesajı gönderilmek için <strong>GetInvoice</strong> metodu ile dönülen INVOICE listesi <strong>MarkInvoice</strong> metoduna parametre olarak gönderiliyorsa fatura içeriğinin (Base64Binary) bulunduğu <code class="prettyprint">INVOICE.CONTENT</code> alanı boşaltılıyor. Böylece network trafik oluşturulması önleniyor.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Faturaların durumu zamanlayıcı ile otomatik sorgulanıyorsa bu süre konfiguratif ve en az 4 saat olarak belirlendi.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Nihai duruma ulaşmış <strong>giden</strong> faturaların (GetInvoiceStatus servisi ile dönülen SUBSTATUS parametresinin değeri <code class="prettyprint">SUCCEED</code> veya <code class="prettyprint">FAILED</code> ise) durumları sorgulanmıyor.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td><strong>Gelen</strong> temel faturaların durumları sorgulanmıyor.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td><strong>Gelen</strong> ticari faturaların durumları yanıt verildikten sonra sorugulanmaya başlanıyor ve GetInvoiceStatus servisi ile dönülen STATUS parametresinin değeri <code class="prettyprint">SUCCEED</code> veya <code class="prettyprint">FAILED</code> olana kadar sorgulanıyor.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Alıcı sisteme ulaştıktan sonra üzerinden <strong>8 gün geçmiş</strong> gelen veya giden faturaların durumları sorgulanmıyor.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Nihai duruma ulaşmamış faturalar için durum sorgulaması <strong>GetInvoiceStatus</strong> metodu ile yapılıyor.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Durum sorgulaması yapılacak fatura birden fazla ise <strong>GetInvoiceStatus</strong> metodunda <code class="prettyprint">UUID</code> parametresi çoklanarak tek bir istek ile yapılıyor. Yani her fatura için ayrı ayrı durum sorgulaması yapılmıyor.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>İhracat faturaların durumları sorgulanınca GTB numarası vs alınıp müşteriye gösteriliyor.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Gelen temel fatura senaryosunda ki faturalara kabul veya ret yanıtı gönderilemiyor.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Gelen ticari fatura senaryosunda ki faturalara kabul veya red yanıtı <strong>SendInvoiceResponseWithServerSign</strong> metodu ile gönderildi.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Ret edilen ticari faturalar için red sebebi <strong>mutlaka</strong> gönderiliyor.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Fatura görüntülemek için indirdilen fatura XML içerisinde ki XSLT ile transform edip HTML görüntüsünü oluşturuluyor.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Kullanıcı uygulamayı kapattığında <strong>Kimlik Doğrulama (Authentication)</strong> webservisinde ki <strong>Logout</strong> metodu kullanarak oturum kapatıldı.</td>
</tr>
</tbody></table>

<h2 id="stemci-client-rnek-projeler">İstemci (client) Örnek Projeler</h2>

<p>Webservice entegrasyonu için sunucu taraflı programlama diline uygun farklı istemci(client) örnekleri sunar. Bu istemcilerden programlama yapmak istediğiniz dile uygun olanı seçip test bilgileri ile kullanmaya başlayabilirsiniz.</p>

<p><a href="https://github.com/izibiz/izibiz-dotnet-soap-client" target="_blank"><img src="/images/icon_dotnet.png"/></a>
<a href="https://github.com/izibiz/ws-client-php" target="_blank"><img src="/images/icon_php.png" height="100" width="100"/></a>
<a href="https://github.com/izibiz/ws-client-java" target="_blank"><img src="/images/icon_java.png"/></a>
<a href="https://github.com/izibiz/ws-client-delphi" target="_blank"><img src="/images/icon_delphi.png" height="80" width="80"/></a>
<a href="https://github.com/izibiz/ws-client-soapui" target="_blank"><img src="/images/icon_soapui.png" height="90" width="100"/></a></p>

<h2 id="fatura-s-n-f-invoicetype-nas-l-retilir">Fatura Sınıfı (InvoiceType) Nasıl Üretilir ?</h2>

<p>.NET üzerinden XSD dosyasından sınıf üretmek için şu adımları uygulayınız:</p>

<ol>
<li>http://www.efatura.gov.tr/dosyalar/kilavuzlar/UBL-TR1.2.1_Paketi.zip adresinden paket indirilir.</li>
<li>İndirilen dosya unzip edilir.</li>
<li>.Net Framework yüklü olan bir bilgisayarda <strong>başlat&gt;Developer Command Prompt</strong> yazılır ve gelen seçenek tıklanarak komut dosyası açılır</li>
<li>2.maddedeki unzip yapılan dizine <strong>cd UNZIP_EDILEN_DIZIN</strong> olarak gidilir.</li>
<li>Gelen ekranda aşağıdaki komutu yapıştırıyoruz.<br>
<strong>xsd /c UBL-Invoice-2.1.xsd UBL-CommonExtensionComponents-2.1.xsd UBL-CommonBasicComponents-2.1.xsd UBL-UnqualifiedDataTypes-2.1.xsd UBL-CoreComponentParameters-2.1.xsd CCTS_CCT_SchemaModule-2.1.xsd UBL-CommonAggregateComponents-2.1.xsd</strong></li>
<li>Bu işlemin sonunda e-Fatura/E-Arşiv fatura oluşturmak için gerekli bütün sınıflar UBL-Invoice-2.1.cs dosyası içerisinde oluşturulacaktır.</li>
<li>Fatura <strong>InvoiceType</strong> sınıfı ile üretilmektedir.</li>
</ol>

<h2 id="ortak-kullan-lan-eleman">Ortak Kullanılan Eleman</h2>

<p>Her webservis isteğinde gönderilmesi beklen ortak elemandır (REQUEST_HEADER)</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login Metodunda sistem tarafında gönderilen SESSION_ID bilgisi. Sonraki tüm metod çağrılarında parametre olarak metoda geçmelidir.</td>
</tr>
<tr>
<td><strong>APPLICATION_NAME</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Metodu çağıran uygulamanın adı. Mutlaka uygulama adının yazılması gerekmektedir.</td>
</tr>
<tr>
<td><strong>CHANNEL_NAME</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Metodun çağrıldığı kanal adı.</td>
</tr>
<tr>
<td><strong>COMPRESSED</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İçerikte taşınan bilginin ZIP formatında sıkıştırılmış mı gönderildiği/talep edildiği bilgisi. Belge gönderim ve belge okuma servislerinde gönderilen değere göre işlem yapılmaktadır.</td>
</tr>
<tr>
<td><strong>CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İstemci uygulama tarafından işlem için üretilen işlem bilgisi (transaction id) varsa istek esnasında gönderilip, sonuçta alabileceğiniz bir değerdir. request/response eşleşmesi yapmak için kullanılabilir.</td>
</tr>
<tr>
<td><strong>INT_PARENT_TXN_ID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İstemci uygulamasında ana modül entitileri ile ilişkilendirelmek istenen ana transaction ID.</td>
</tr>
<tr>
<td><strong>ACTION_DATE</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Metodun çağrılma tarihi</td>
</tr>
<tr>
<td><strong>CHANGE_INFO</strong></td>
<td>Array</td>
<td>Hayır</td>
<td>Bu eleman ile eğer verilerde bir değişiklik yapılacak ise o değişikliği ait bilgi.</td>
</tr>
<tr>
<td><strong>REASON</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İşlem sebebi. Fatura gönderme, fatura alma vs.</td>
</tr>
<tr>
<td><strong>HOST_NAME</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Metodu çağıran sunucunun host bilgisi.</td>
</tr>
<tr>
<td><strong>SIMULATION_FLAG</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Metod çağrılır ancak arkadaki işlem yapılmaz.</td>
</tr>
</tbody></table>

<h2 id="ba-ar-sonu-nesnesi">Başarı Sonuç Nesnesi</h2>

<p>Webservis işlem başarılı olduğunda response objesi içerisinde <code class="prettyprint">REQUEST_RETURN</code> tipinde sonuç dönülecektir.</p>

<p>Servisten dönen hata sonuç nesnesi şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN</strong></td>
<td>ComplexType</td>
<td>İşlem sonucunu içeren başarılı sonuç objesi</td>
</tr>
<tr>
<td><strong>INT_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda bu eleman dönülmez.</td>
</tr>
<tr>
<td><strong>INVOICE_ID</strong></td>
<td>String</td>
<td>Fatura numarası e-arşiv platformunda atanmışsa atanan fatura numarası dönülür.</td>
</tr>
</tbody></table>

<h2 id="hata-sonu-nesnesi">Hata Sonuç Nesnesi</h2>

<p>Webservis metodunda hata oluşması durumunda response objesi içerisinde <code class="prettyprint">ERROR_TYPE</code> tipinde sonuç dönülecektir.</p>

<p>Servisten dönen hata sonuç nesnesi şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>ERROR_TYPE</strong></td>
<td>ComplexType</td>
<td>İşlem sonucunu içeren başarısız/hatalı sonuç objesi</td>
</tr>
<tr>
<td><strong>INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>ERROR_CODE</strong></td>
<td>String</td>
<td>Hata kodu. Hata kod detayları için ilgili servisteki hata kod listesini inceleyebilirsiniz.</td>
</tr>
<tr>
<td><strong>ERROR_SHORT_DESC</strong></td>
<td>String</td>
<td>Hatanın kısa açıklaması.</td>
</tr>
</tbody></table>

<h2 id="fatura-g-nderme-sendinvoice">Fatura Gönderme (SendInvoice)</h2>

<ul>
<li>FATURA Entegrasyon Platformu üzerinden 1 yada daha fazla faturayı GIB (Gelir İdaresi Başkanlığı) EFATURA sistemine gönderir.</li>
<li>Bu işlemden sonra gönderilen faturaların durumları GetInvoiceStatus servisi ile kontrol edilmelidir.</li>
<li>Faturanın durumu GIB’de hatalı olduğu zaman bu servis ile faturayı aynı fatura numarası ve aynı ETTN ile tekrar gönderilebilir.</li>
<li>Fatura yüklenirken fatura şema ve şematron kontrolü ve tekillik kontrolünden geçirilir. Fatura XML içerisinde hata varsa sisteme yüklenmez. Fatura XML içerisinde ki sorun düzeltilerek tekrar gönderilmelidir.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER.SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde bulunan SESSION_ID gönderilmelidir.</td>
</tr>
<tr>
<td><strong>REQUEST_HEADER.COMPRESSED</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Binary Fatura içeriği sıkıştırılmış/sıkıştırılmamış bilgisi. Varsayılan değer Y olduğu için gönderilmediği durumda fatura sıkıştırılarak/ziplenerek gönderilmesi beklenmektedir. <strong>Faturayı XML olarak göndermek için mutlaka eleman eklenmeli ve N değeri gönderilmelidir.</strong></td>
</tr>
<tr>
<td><strong>SENDER</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Faturayı gönderen tarafın vergi kimlik numarasını <code class="prettyprint">vkn</code> attribute içerisine, gönderici birim etiketini <code class="prettyprint">alias</code> attribute eklenmelidir. Eğer eleman gönderilmezse oturum açılan kullanıcının bağlı olduğu hesapta ki VKN ve gönderici birim etiketi kullanılacaktır. <strong>Sender elemanı gönderilmesini tavsiye ederiz.</strong></td>
</tr>
<tr>
<td><strong>RECEIVER</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Faturanın alıcı tarafının vergi kimlik numarasını <code class="prettyprint">vkn</code> attribute içerisine, posta kutusu etiketini <code class="prettyprint">alias</code> attribute içerisine eklenmelidir. Eğer eleman gönderilmezse fatura içerisinde ki alıcı taraf (AccountingCustomerParty) içerisinde ki VKN ve o VKN için tanımlanmış herhangi bir posta kutusu etiketi kullanılacaktır. <strong>Receiver elemanı gönderilmesini tavsiye ederiz. Özellikle alıcı tarafından posta kutusu tercihi talep edilmişse bu eleman kullanılmalıdır.</strong></td>
</tr>
<tr>
<td><strong>INVOICE.CONTENT</strong></td>
<td>Array</td>
<td><strong>Evet</strong></td>
<td>Faturanın Base64Binary tipinde XML veya Ziplenmiş içeriği. Bir istek ile çoklu fatura gönderimi yapılabilir. <strong>Birden fazla fatura göndermek için INVOICE elemanı çoklanmalıdır.</strong></td>
</tr>
</tbody></table>

<h3 id="ba-ar-sonu-nesnesi">Başarı Sonuç Nesnesi</h3>

<p>Webservis işlem başarılı olduğunda response objesi içerisinde <code class="prettyprint">REQUEST_RETURN</code> tipinde sonuç dönülecektir.</p>

<p>Servisten dönen hata sonuç nesnesi şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN</strong></td>
<td>ComplexType</td>
<td>İşlem sonucunu içeren başarılı sonuç objesi</td>
</tr>
<tr>
<td><strong>INT_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı işlemlerde <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda bu eleman dönülmez.</td>
</tr>
<tr>
<td><strong>INVOICE_ID</strong></td>
<td>String</td>
<td>Fatura numarası e-arşiv platformunda atanmışsa atanan fatura numarası dönülür.</td>
</tr>
</tbody></table>

<h3 id="hata-sonu-nesnesi">Hata Sonuç Nesnesi</h3>

<p>Webservis metodunda hata oluşması durumunda response objesi içerisinde <code class="prettyprint">ERROR_TYPE</code> tipinde sonuç dönülecektir.</p>

<p>Servisten dönen hata sonuç nesnesi şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>ERROR_TYPE</strong></td>
<td>ComplexType</td>
<td>İşlem sonucunu içeren başarısız/hatalı sonuç objesi</td>
</tr>
<tr>
<td><strong>INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>ERROR_CODE</strong></td>
<td>String</td>
<td>Hata kodu. Hata kod detayları için ilgili servisteki hata kod listesini inceleyebilirsiniz.</td>
</tr>
<tr>
<td><strong>ERROR_SHORT_DESC</strong></td>
<td>String</td>
<td>Hatanın kısa açıklaması.</td>
</tr>
</tbody></table>

<h3 id="hata-kodlar">Hata Kodları</h3>

<table><thead>
<tr>
<th>Hata Kodu</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td>-1</td>
<td>Beklenmedik bir hata oluştu. Lütfen daha sonra tekrar deneyiniz.</td>
</tr>
<tr>
<td>10001</td>
<td>Sistemde Beklenmedik Bir Hata Oluştu: {HATA SEBEBİ}</td>
</tr>
<tr>
<td>10002</td>
<td>Oturum oluşturulamadı</td>
</tr>
<tr>
<td>10003</td>
<td>Belge Şematron Kontrolünden Geçemedi: {HATA SEBEBİ}</td>
</tr>
<tr>
<td>10004</td>
<td>Geçersiz oturum. Lütfen tekrar oturum oluşturunuz ve tekrar deneyiniz</td>
</tr>
<tr>
<td>10005</td>
<td>Hesabınızın {ÜRÜN ADI} ürün aktif degildir</td>
</tr>
<tr>
<td>10006</td>
<td>Yetkiniz bulunmamaktadır</td>
</tr>
<tr>
<td>10007</td>
<td>İstek ZİP bir dosya içermelidir</td>
</tr>
<tr>
<td>10008</td>
<td>Belirtilen kriterlere uygun kayıt bulunamamıştır</td>
</tr>
<tr>
<td>10009</td>
<td>Gönderilen belge daha önce gönderilmiş bir belge ile eşleşmektedir. ID: ve UUID:</td>
</tr>
<tr>
<td>10010</td>
<td>Bir istek  boyutu maksimum 5MB veya 100 adet belge  içerebilir</td>
</tr>
<tr>
<td>10011</td>
<td>Tekrarlanan işlem: kayıt sistemde mevcuttur</td>
</tr>
<tr>
<td>10012</td>
<td>Kullanıcı aktif degil {kullanıcı adı}</td>
</tr>
<tr>
<td>10013</td>
<td>Gönderilen istek geçersizdir. Hata sebebi {0}</td>
</tr>
<tr>
<td>10014</td>
<td>Geçersiz İmza</td>
</tr>
<tr>
<td>10015</td>
<td>Servis desteklenmemektedir. Servis adı</td>
</tr>
<tr>
<td>10016</td>
<td>Müşteri sistemde aktif degildir.</td>
</tr>
<tr>
<td>10017</td>
<td>Gönderilen belge daha önce gönderilmiş bir belge ile eşleşmektedir. ID: ve UUID:</td>
</tr>
<tr>
<td>10018</td>
<td>Yetkisiz erişim tespit edildi! {HATA SEBEBİ}</td>
</tr>
</tbody></table>

<h2 id="taslak-fatura-y-kleme-loadinvoice">Taslak Fatura Yükleme (LoadInvoice)</h2>

<ul>
<li>FATURA Entegrasyon Platformu üzerinden 1 yada daha fazla faturayı E-Fatura sistemine yükler.</li>
<li>Eğer fatura numarası atanmışsa (16 hane ise) şema ve şematron kontrolünden geçirilir. Fatura numarası atanmamışsa şema ve şematron kontrolü yapılmaz.</li>
<li>Aynı faturanın tekrar yüklenmesine müsade edilir. Farklı kayıt oluşturulmaz. Oluşan kayıt yeni içerik ile güncellenir.</li>
</ul>

<p><br>
Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur. Fatura sıkıştırılarak/ziplenerek gönderiliyorsa <code class="prettyprint">COMPRESSED</code> alanı gönderilmeyebilir veya <code class="prettyprint">Y</code> olarak gönderilebilir. <strong>Faturayı XML formatında sıkıştırılmadan yüklemek için mutlaka <code class="prettyprint">COMPRESSED</code> eleman eklenmeli ve <code class="prettyprint">N</code> değeri gönderilmelidir.</strong></td>
</tr>
<tr>
<td><strong>INVOICE.CONTENT</strong></td>
<td>Array</td>
<td><strong>Evet</strong></td>
<td>Faturanın Base64Binary olarak encode edilmiş XML veya Ziplenmiş içeriği. Bir istek ile çoklu fatura gönderimi yapılabilir. <strong>Birden fazla fatura göndermek için INVOICE elemanı çoklanmalıdır.</strong></td>
</tr>
</tbody></table>

<h3 id="ba-ar-sonu-nesnesi">Başarı Sonuç Nesnesi</h3>

<p>Webservis işlem başarılı olduğunda response objesi içerisinde <code class="prettyprint">REQUEST_RETURN</code> tipinde sonuç dönülecektir.</p>

<p>Servisten dönen hata sonuç nesnesi şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN</strong></td>
<td>ComplexType</td>
<td>İşlem sonucunu içeren başarılı sonuç objesi</td>
</tr>
<tr>
<td><strong>INT_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı işlemlerde <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda bu eleman dönülmez.</td>
</tr>
<tr>
<td><strong>INVOICE_ID</strong></td>
<td>String</td>
<td>Fatura numarası e-arşiv platformunda atanmışsa atanan fatura numarası dönülür.</td>
</tr>
</tbody></table>

<h3 id="hata-sonu-nesnesi">Hata Sonuç Nesnesi</h3>

<p>Webservis metodunda hata oluşması durumunda response objesi içerisinde <code class="prettyprint">ERROR_TYPE</code> tipinde sonuç dönülecektir.</p>

<p>Servisten dönen hata sonuç nesnesi şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>ERROR_TYPE</strong></td>
<td>ComplexType</td>
<td>İşlem sonucunu içeren başarısız/hatalı sonuç objesi</td>
</tr>
<tr>
<td><strong>INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>ERROR_CODE</strong></td>
<td>String</td>
<td>Hata kodu. Hata kod detayları için ilgili servisteki hata kod listesini inceleyebilirsiniz.</td>
</tr>
<tr>
<td><strong>ERROR_SHORT_DESC</strong></td>
<td>String</td>
<td>Hatanın kısa açıklaması.</td>
</tr>
</tbody></table>

<h3 id="hata-kodlar">Hata Kodları</h3>

<table><thead>
<tr>
<th>Hata Kodu</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td>-1</td>
<td>Beklenmedik bir hata oluştu. Lütfen daha sonra tekrar deneyiniz.</td>
</tr>
<tr>
<td>10001</td>
<td>Sistemde Beklenmedik Bir Hata Oluştu: {HATA SEBEBİ}</td>
</tr>
<tr>
<td>10002</td>
<td>Oturum oluşturulamadı</td>
</tr>
<tr>
<td>10003</td>
<td>Belge Şematron Kontrolünden Geçemedi: {HATA SEBEBİ}</td>
</tr>
<tr>
<td>10004</td>
<td>Geçersiz oturum. Lütfen tekrar oturum oluşturunuz ve tekrar deneyiniz</td>
</tr>
<tr>
<td>10005</td>
<td>Hesabınızın {ÜRÜN ADI} ürün aktif degildir</td>
</tr>
<tr>
<td>10006</td>
<td>Yetkiniz bulunmamaktadır</td>
</tr>
<tr>
<td>10007</td>
<td>İstek ZİP bir dosya içermelidir</td>
</tr>
<tr>
<td>10008</td>
<td>Belirtilen kriterlere uygun kayıt bulunamamıştır</td>
</tr>
<tr>
<td>10009</td>
<td>Gönderilen belge daha önce gönderilmiş bir belge ile eşleşmektedir. ID: ve UUID:</td>
</tr>
<tr>
<td>10010</td>
<td>Bir istek  boyutu maksimum 5MB veya 100 adet belge  içerebilir</td>
</tr>
<tr>
<td>10011</td>
<td>Tekrarlanan işlem: kayıt sistemde mevcuttur</td>
</tr>
<tr>
<td>10012</td>
<td>Kullanıcı aktif degil {kullanıcı adı}</td>
</tr>
<tr>
<td>10013</td>
<td>Gönderilen istek geçersizdir. Hata sebebi {0}</td>
</tr>
<tr>
<td>10014</td>
<td>Geçersiz İmza</td>
</tr>
<tr>
<td>10015</td>
<td>Servis desteklenmemektedir. Servis adı</td>
</tr>
<tr>
<td>10016</td>
<td>Müşteri sistemde aktif degildir.</td>
</tr>
<tr>
<td>10017</td>
<td>Gönderilen belge daha önce gönderilmiş bir belge ile eşleşmektedir. ID: ve UUID:</td>
</tr>
<tr>
<td>10018</td>
<td>Yetkisiz erişim tespit edildi! {HATA SEBEBİ}</td>
</tr>
</tbody></table>

<h2 id="e-fatura-okuma-getinvoice">E-Fatura Okuma (GetInvoice)</h2>

<ul>
<li>E-Fatura sisteminden giden imzalı faturaları veya gelen faturaları muhasebe paketine çekmek için kullanılır.</li>
<li>Fatura özet bilgilerini veya fatura özet bilgileri ile beraber XML içeriğini de çekmek için kullanılabilir.</li>
<li>Entegrasyon yapan iş ortaklarımızdan yeni gelen bütün faturaları içerikleri (XML) beraber müşteri ortamına çekilmesini tavsiye ediyoruz.</li>
<li>İçerik ile beraber en fazla 100 fatura çekilebilir.</li>
<li>Fatura özet bilgileri ile en fazla 25000 adet fatura dönülmektedir.</li>
<li>Alıcı tarafından zamanlanmış fatura çekme özelliği eklenecekse en fazla 15 dakika aralığında olmalıdır.</li>
</ul>

<p><br>
Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur. Faturaları XML formatında sıkıştırılmadan çekmek için mutlaka <code class="prettyprint">COMPRESSED</code> elemanı eklenmeli ve <code class="prettyprint">N</code> değeri gönderilmelidir. Eğer gönderilmezse faturalar sıkıştırılmış/ziplenmiş olarak dönülecektir. Değerler: Y/N</td>
</tr>
<tr>
<td><strong>SEARCH_KEY.LIMIT</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Kaç fatura okunmak istendiği. Eğer eleman gönderilmezse 10 adet fatura, fatura içerikleri (XML) ile beraber en fazla 100 adet fatura, sadece fatura başlıklarını çekildiğindeise en fazla 25.000 adet fatura dönülür.</td>
</tr>
<tr>
<td><strong>SEARCH_KEY.FROM</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Gönderici firma gönderici birim (GB) etiketine göre çekmek için kullanılabilir. Örneğin birden fazla GB etiketi olan bir firmanın sadece muhasebe departmanından gelen faturaları okumak için kullanılabilir. format: urn:mail:muhasebegb@firma.com</td>
</tr>
<tr>
<td><strong>SEARCH_KEY.TO</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Birden fazla Posta Kutusu (PK) etiketi olan bir firmanın sadece bir PK adresine gelen faturaları çekmek için kullanılabilir. Eğer etiket gönderilmez ise kullanıcının yetkisine bağlı olarak bütün faturalar dönülür. format: urn:mail:muhasebepk@firma.com</td>
</tr>
<tr>
<td><strong>SEARCH_KEY.ID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Fatura numarası ile fatura okumak için kullanılabilir. format: FYA2018000000001</td>
</tr>
<tr>
<td><strong>SEARCH_KEY.UUID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Evrensel Tekil Tanımlama Numarası (ETTN) ile fatura okumak için kullanılabilir.  GUID formatında</td>
</tr>
<tr>
<td><strong>SEARCH_KEY.DATE_TYPE</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Belirli tarih aralığında fatura çekmek istendiğinde belirlenen tarih tipidir. <code class="prettyprint">CREATE</code> değeri gönderilirse fatura oluşturulma tarihine göre getirilir, boş veya <code class="prettyprint">ISSUE</code> değeri gönderilirse fatura tarihine göre getirilmektedir.</td>
</tr>
<tr>
<td><strong>SEARCH_KEY.START_DATE</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Belirli tarih aralığında fatura çekmek istendiğinde dönem başlangıç tarihi format: YYYY-MM-DD</td>
</tr>
<tr>
<td><strong>SEARCH_KEY.END_DATE</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Belirli tarih aralığında fatura çekmek istendiğinde dönem bitiş tarihi format: YYYY-MM-DD</td>
</tr>
<tr>
<td><strong>SEARCH_KEY.READ_INCLUDED</strong></td>
<td>Boolean</td>
<td>Hayır</td>
<td>Fatura okurken daha önce okunmuş faturaları dönüşe dahil edilip edilmeyeceğini belirler. <code class="prettyprint">true</code> değeri gönderilirse fatura daha önce okunmuş olsa bile yanıta eklenir. Gönderilmezse veya <code class="prettyprint">false</code> gönderilirse sadece yeni gelen faturalar dönülür. Değerler: true/false</td>
</tr>
<tr>
<td><strong>SEARCH_KEY.DRAFT_FLAG</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Taslak faturaları sonuca eklenmesi için kullanılan parametredir. <code class="prettyprint">Y</code> değeri gönderilirse taslak faturalar diğer kriterlere uyan faturalarla beraber sonuca eklenir. Parametre gönderilmezse veya <code class="prettyprint">N</code> gönderilirse taslak faturalar sonuca eklenmez. Değerler: Y/N</td>
</tr>
<tr>
<td><strong>SEARCH_KEY.DIRECTION</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Belge yönü. Gelen veya Giden faturaları çekmek için kullanılabilir. Gelen faturaları çekmek için <code class="prettyprint">IN</code>, giden faturaları çekmek için <code class="prettyprint">OUT</code> değeri gönderilebilir. Varsayılan değer <code class="prettyprint">IN</code> olduğu için eğer parametre gönderilmezse sadece gelen faturalar dönülecektir.  Gönderilebilecek değerler: <code class="prettyprint">IN</code>, <code class="prettyprint">OUT</code></td>
</tr>
<tr>
<td><strong>HEADER_ONLY</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Fatura içerik ile beraber mi yoksa sadece özet bilgisi mi okunmak istenildiğini belirler. Eleman <strong>gönderilmezse</strong> veya <code class="prettyprint">N</code> değeri gönderilirse faturalar XML ile beraber dönülür. <code class="prettyprint">Y</code> değeri gönderilirse faturaların özeti dönülür.  Değerler: Y/N</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>INVOICE</strong></td>
<td>ComplexType</td>
<td>Sorgu kriterine uyan fatura(lar)ın listesi. Fatura numarası <code class="prettyprint">ID</code>, fatura evrensel tekil tanımlama numarası  <code class="prettyprint">UUID</code> ve e-fatura sisteminde tanımlı tekil numara değeri  <code class="prettyprint">LIST_ID</code> attribute içerisinde dönülmektedir.</td>
</tr>
<tr>
<td><strong>INVOICE.HEADER</strong></td>
<td>ComplexType</td>
<td>Faturaya ait özet bilgiler içermektedir.</td>
</tr>
<tr>
<td><strong>HEADER.SENDER</strong></td>
<td>String</td>
<td>Faturayı gönderen firma VKN&#39;si.</td>
</tr>
<tr>
<td><strong>HEADER.RECEIVER</strong></td>
<td>String</td>
<td>Faturayı alan firma VKN&#39;si.</td>
</tr>
<tr>
<td><strong>HEADER.SUPPLIER</strong></td>
<td>String</td>
<td>Faturayı gönderen firma ünvanı.</td>
</tr>
<tr>
<td><strong>HEADER.CUSTOMER</strong></td>
<td>String</td>
<td>Faturayı alan firma ünvanı.</td>
</tr>
<tr>
<td><strong>HEADER.ISSUE_DATE</strong></td>
<td>String</td>
<td>Fatura tarihi.</td>
</tr>
<tr>
<td><strong>HEADER.PAYABLE_AMOUNT</strong></td>
<td>String</td>
<td>Toplam ödenecek tutar.</td>
</tr>
<tr>
<td><strong>HEADER.FROM</strong></td>
<td>String</td>
<td>Faturayı gönderen Gönderici Birim (GB)</td>
</tr>
<tr>
<td><strong>HEADER.TO</strong></td>
<td>String</td>
<td>Faturanın geldiği Posta Kutusu (PK)</td>
</tr>
<tr>
<td><strong>HEADER.PROFILEID</strong></td>
<td>String</td>
<td>Faturanın senaryosu. TEMELFATURA, TICARIFATURA,IHRACATFATURA, YOLCUBERABER değerleri olabilir.</td>
</tr>
<tr>
<td><strong>HEADER.INVOICE_TYPE_CODE</strong></td>
<td>String</td>
<td>Faturanın tipi. SATIS, IADE, ISTISNA, IHRACAT, OZELMATRAH, TEVKIFAT, IHRACKAYITLI değerleri olabilir.</td>
</tr>
<tr>
<td><strong>HEADER.STATUS</strong></td>
<td>String</td>
<td>Faturanın durumu. Detay için Fatura durum sorgulama ekranında bulunan <strong>Fatura Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Fatura durum açıklaması. Detay için Fatura durum sorgulama ekranında bulunan <strong>Fatura Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.GIB_STATUS_CODE</strong></td>
<td>String</td>
<td>Faturanın GİB&#39;de ki durum kodu. Detay için Fatura durum sorgulama ekranında bulunan <strong>GİB Durum Kodları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.GIB_STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Faturanın GİB&#39;de ki durumunun kodunun açıklaması. Detay için <strong>GİB Durum Kodları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.RESPONSE_CODE</strong></td>
<td>String</td>
<td>Ticari fatura için verilen yanıtı içeren zarfın durum kodu</td>
</tr>
<tr>
<td><strong>HEADER.RESPONSE_DESC</strong></td>
<td>String</td>
<td>Ticari fatura için verilen yanıtı içeren zarfın durum açıklaması</td>
</tr>
<tr>
<td><strong>HEADER.CDATE</strong></td>
<td>String</td>
<td>Faturanın sistemimize ulaştığı tarih</td>
</tr>
<tr>
<td><strong>HEADER.ENVELOPE_IDENTIFIER</strong></td>
<td>String</td>
<td>Faturanın zarf IDsi.</td>
</tr>
<tr>
<td><strong>INVOICE.CONTENT</strong></td>
<td>String</td>
<td>Faturanın içeriği. Eğer <code class="prettyprint">COMPRESSED</code> elemanı <code class="prettyprint">N</code> olarak gönderilmişse XML dosya, <code class="prettyprint">COMPRESSED</code> elemanı gönderilmemiş veya <code class="prettyprint">Y</code> değeri gönderilmişse sıkıştırılmış/ziplenmiş XML dosyası dönülür.</td>
</tr>
</tbody></table>

<h2 id="fatura-g-rsel-okuma-getinvoicewithtype">Fatura Görsel Okuma (GetInvoiceWithType)</h2>

<ul>
<li>E-Fatura sisteminden bulunan bir faturanın görselini çekmek için tasarlanmış servistir.</li>
<li>Faturaların HTML ve PDF görsellerini çekebilirsiniz.</li>
<li>Fatura görseli içerisinde ki XSLT ile yapılacaktır. Eğer fatura içerisinde ki şablonda sorun varsa hata fırlatılacaktır.</li>
<li>İçerik sıkıştırılmış olarak dönülmektedir. İstemciye çektikten sonra unzip edilmelidir.</li>
</ul>

<p><br>
Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur. <strong>Bu serviste <code class="prettyprint">COMPRESSED</code> elemanı dikkate alınmamaktadır.</strong>   Talep edilen formatta sıkıştırılmış/ziplenmiş olarak dönülecektir. İstemciye çektikten sonra unzip edilmelidir.</td>
</tr>
<tr>
<td><strong>SEARCH_KEY.ID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Fatura numarası ile fatura okumak için kullanılabilir. örnek FYA2018000000001 <code class="prettyprint">UUID</code> elamanı gönderilmemişse zorunludur.</td>
</tr>
<tr>
<td><strong>SEARCH_KEY.UUID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Fatura Evrensel Tekil Tanımlama Numarası (ETTN) ile fatura okumak için kullanılabilir. <code class="prettyprint">ID</code> elamanı gönderilmemişse zorunludur.</td>
</tr>
<tr>
<td><strong>SEARCH_KEY.TYPE</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Faturanın çekilmek istenilen tipi: PDF, HTML, XML olabilir.</td>
</tr>
<tr>
<td><strong>SEARCH_KEY.DIRECTION</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Belge yönü. Gelen veya Giden faturaları çekmek için kullanılabilir. Gelen faturaları çekmek için <code class="prettyprint">IN</code>, giden faturaları çekmek için <code class="prettyprint">OUT</code> değeri gönderilebilir. Varsayılan değer <code class="prettyprint">IN</code> olduğu için eğer parametre gönderilmezse sadece gelen faturalar dönülecektir.  Gönderilebilecek değerler: <code class="prettyprint">IN</code>, <code class="prettyprint">OUT</code></td>
</tr>
<tr>
<td><strong>HEADER_ONLY</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Fatura görseli çekmek için <code class="prettyprint">N</code> gönderilmelidir.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>INVOICE</strong></td>
<td>ComplexType</td>
<td>Sorgu kriterine uyan fatura(lar)ın listesi. Fatura numarası <code class="prettyprint">ID</code>, fatura evrensel tekil tanımlama numarası  <code class="prettyprint">UUID</code> ve e-fatura sisteminde tanımlı tekil numara değeri  <code class="prettyprint">LIST_ID</code> attribute içerisinde dönülmektedir.</td>
</tr>
<tr>
<td><strong>INVOICE.HEADER</strong></td>
<td>ComplexType</td>
<td>Faturaya ait özet bilgiler içermektedir.</td>
</tr>
<tr>
<td><strong>HEADER.SENDER</strong></td>
<td>String</td>
<td>Faturayı gönderen firma VKN&#39;si.</td>
</tr>
<tr>
<td><strong>HEADER.RECEIVER</strong></td>
<td>String</td>
<td>Faturayı alan firma VKN&#39;si.</td>
</tr>
<tr>
<td><strong>HEADER.SUPPLIER</strong></td>
<td>String</td>
<td>Faturayı gönderen firma ünvanı.</td>
</tr>
<tr>
<td><strong>HEADER.CUSTOMER</strong></td>
<td>String</td>
<td>Faturayı alan firma ünvanı.</td>
</tr>
<tr>
<td><strong>HEADER.ISSUE_DATE</strong></td>
<td>String</td>
<td>Fatura tarihi.</td>
</tr>
<tr>
<td><strong>HEADER.PAYABLE_AMOUNT</strong></td>
<td>String</td>
<td>Toplam ödenecek tutar.</td>
</tr>
<tr>
<td><strong>HEADER.FROM</strong></td>
<td>String</td>
<td>Faturayı gönderen Gönderici Birim (GB)</td>
</tr>
<tr>
<td><strong>HEADER.TO</strong></td>
<td>String</td>
<td>Faturanın geldiği Posta Kutusu (PK)</td>
</tr>
<tr>
<td><strong>HEADER.PROFILEID</strong></td>
<td>String</td>
<td>Faturanın senaryosu. TEMELFATURA, TICARIFATURA,IHRACATFATURA, YOLCUBERABER değerleri olabilir.</td>
</tr>
<tr>
<td><strong>HEADER.INVOICE_TYPE_CODE</strong></td>
<td>String</td>
<td>Faturanın tipi. SATIS, IADE, ISTISNA, IHRACAT, OZELMATRAH, TEVKIFAT, IHRACKAYITLI değerleri olabilir.</td>
</tr>
<tr>
<td><strong>HEADER.STATUS</strong></td>
<td>String</td>
<td>Faturanın durumu. Detay için <strong>Fatura Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Fatura durum açıklaması. Detay için <strong>Fatura Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.GIB_STATUS_CODE</strong></td>
<td>String</td>
<td>Faturanın GİB&#39;de ki durum kodu. Detay için <strong>GİB Durum Kodları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.GIB_STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Faturanın GİB&#39;de ki durumunun kodunun açıklaması. Detay için <strong>GİB Durum Kodları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.RESPONSE_CODE</strong></td>
<td>String</td>
<td>Ticari fatura için verilen yanıtı içeren zarfın durum kodu</td>
</tr>
<tr>
<td><strong>HEADER.RESPONSE_DESC</strong></td>
<td>String</td>
<td>Ticari fatura için verilen yanıtı içeren zarfın durum açıklaması</td>
</tr>
<tr>
<td><strong>HEADER.CDATE</strong></td>
<td>String</td>
<td>Faturanın sistemimize ulaştığı tarih</td>
</tr>
<tr>
<td><strong>HEADER.ENVELOPE_IDENTIFIER</strong></td>
<td>String</td>
<td>Faturanın zarf IDsi.</td>
</tr>
<tr>
<td><strong>INVOICE.CONTENT</strong></td>
<td>Base64Binary</td>
<td>Faturanın talep edilen formatta <strong>(PDF, HTML)</strong> sıkıştırılmış/ziplenmiş dosyası dönülür. <strong>İstemciye çektikten sonra unzip edilmeldir.</strong></td>
</tr>
</tbody></table>

<h2 id="fatura-okundu-aretleme-markinvoice">Fatura Okundu İşaretleme (MarkInvoice)</h2>

<ul>
<li>E-Fatura sisteminde bir veya birden fazla faturayı alındı/alınmadı olarak işaretlemek için geliştirilmiş servistir.</li>
<li>GetInvoice servisi ile müşteri ortamına başarı alınan faturaların tekrar sorgulandığında listede gelmemesi için MarkInvoice servisi ile alındı olarak işaretlenmeli.</li>
</ul>

<p><br>
Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur.</td>
</tr>
<tr>
<td><strong>MARK.value</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Başarı ile alındıysa <code class="prettyprint">READ</code> gönderilmeli. Daha önce alındı olarak işaretlenen bir faturayı tekrar çekmeden önce <code class="prettyprint">UNREAD</code> olarak gönderilebilir.</td>
</tr>
<tr>
<td><strong>INVOICE.ID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İşaretlenecek faturanın numarası. Örnek: FYA2018000000001</td>
</tr>
<tr>
<td><strong>INVOICE.UUID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İşaretlenecek faturanın ETTNsi. GUID formatında olmalı.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda WS Fault objesi dönecektir.</td>
</tr>
</tbody></table>

<h2 id="fatura-durum-sorgulama-getinvoicestatus">Fatura Durum Sorgulama (GetInvoiceStatus)</h2>

<ul>
<li>E-Fatura sisteminde bulunan bir veya birden fazla taslak, gelen ve giden faturaların durumunu sorgulamayı sağlayan servistir.</li>
</ul>

<p><br>
Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur.</td>
</tr>
<tr>
<td><strong>INVOICE.ID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Durumu sorgulanacak faturanın 16 hane fatura numarası. örnek: FYA2018000000001 <strong>Eğer UUID elemanı gönderilmezse zorunludur.</strong></td>
</tr>
<tr>
<td><strong>INVOICE.UUID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Durumu sorgulanacak faturanın GUID formatında Evrensel Tekil Tanımlama Numarası. <strong>Eğer ID elemanı gönderilmezse zorunludur.</strong></td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>INVOICE_STATUS</strong></td>
<td>ComplexType</td>
<td>Sorgu kriterine uyan fatura(lar)ın listesi. Fatura numarası <code class="prettyprint">ID</code>, fatura evrensel tekil tanımlama numarası  <code class="prettyprint">UUID</code> attribute içerisinde dönülmektedir.</td>
</tr>
<tr>
<td><strong>INVOICE_STATUS.STATUS</strong></td>
<td>String</td>
<td>Faturanın e-fatura sisteminde ki durumu. Detay için <strong>Fatura Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>INVOICE_STATUS.STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Fatura durum açıklaması. Detay için <strong>Fatura Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>INVOICE_STATUS.GIB_STATUS_CODE</strong></td>
<td>String</td>
<td>Faturanın GİB&#39;de ki durum kodu. Faturanın GİB&#39;de ki durumu e-fatura sistemi tarafından henüz sorgulanmadıysa eleman dönülmez. Detay için <strong>GİB Durum Kodları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>INVOICE_STATUS.GIB_STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Faturanın GİB&#39;de ki durumunun kodunun açıklaması. Faturanın GİB&#39;de ki durumu e-fatura sistemi tarafından henüz sorgulanmadıysa eleman dönülmez. Detay için <strong>GİB Durum Kodları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>INVOICE_STATUS.RESPONSE_CODE</strong></td>
<td>String</td>
<td>Ticari fatura için verilen yanıtı içeren zarfın durum kodu. Eğer faturanın senaryosu TICARIFATURA değilse eleman dönülmez.</td>
</tr>
<tr>
<td><strong>INVOICE_STATUS.RESPONSE_DESC</strong></td>
<td>String</td>
<td>Ticari fatura için verilen yanıtı içeren zarfın durum açıklaması. Eğer faturanın senaryosu TICARIFATURA değilse eleman dönülmez.</td>
</tr>
<tr>
<td><strong>INVOICE_STATUS.GTB_REFNO</strong></td>
<td>String</td>
<td>Gümrük Sistemine alınan ihracat faturaları için, Gümrük ve Ticaret Bakanlığı tarafından üretilen 23 haneli bir referans numarasıdır.  23 haneli bir referans numarası ile belge tarihi yükümlü tarafından gümrük beyannamesinin 44 no’lu kutusunda “Belge Referans No” ve “Belge Tarihi” alanlarında beyan edilecektir. <strong>İhracat faturası değilse dönülmez.</strong></td>
</tr>
<tr>
<td><strong>INVOICE_STATUS.GTB_GCB_TESCILNO</strong></td>
<td>String</td>
<td>Gümrük İdaresi fiili ihracatı tamamlanan eşyanın kabul uygulama yanıtı ile ilgilisine dönülen Gümrük Çıkış Belgesi (GÇB) tescil numarasıdır. <strong>İhracat faturası değilse dönülmez.</strong></td>
</tr>
<tr>
<td><strong>INVOICE_STATUS.GTB_FIILI_IHRACAT_TARIHI</strong></td>
<td>String</td>
<td>Gümrük İdaresi tarafından fiili ihracatı tamamlanan ihracat faturaları için döndüğü fiili ihraç tarihi bilgisidir.  Gümrük İdaresi bu bilgiyi fiili ihracat (intaç) gerçekleştiğinde dönecektir. Eğer ihracat faturası için bu alan dönülmemişse hala fiili ihracat yapılmamıştır. <strong>İhracat faturası değilse dönülmez.</strong></td>
</tr>
<tr>
<td><strong>INVOICE_STATUS.CDATE</strong></td>
<td>String</td>
<td>Faturanın e-fatura sistemine yüklendiği/ulaştığı tarih</td>
</tr>
<tr>
<td><strong>INVOICE_STATUS.DIRECTION</strong></td>
<td>String</td>
<td>Gelen fatura için <code class="prettyprint">IN</code>, Gönderilen fatura için <code class="prettyprint">OUT</code></td>
</tr>
<tr>
<td><strong>INVOICE_STATUS.ENVELOPE_IDENTIFIER</strong></td>
<td>String</td>
<td>Faturanın zarf IDsi. Taslak faturalar için eleman dönülmez.</td>
</tr>
</tbody></table>

<h3 id="giden-fatura-durumlar">Giden Fatura Durumları</h3>

<table><thead>
<tr>
<th>DURUM KODU</th>
<th><div style="width:200px">DURUM AÇIKLAMASI</div></th>
<th>STATUS_SUBSTATUS</th>
<th>ALINACAK AKSİYON</th>
</tr>
</thead><tbody>
<tr>
<td>100</td>
<td>DURUM HENÜZ GÜNCELLENMEDİ</td>
<td>LOAD_SUCCEED</td>
<td>Durum sorgulanması yapmaya devam edilecek</td>
</tr>
<tr>
<td>101</td>
<td>KUYRUĞA EKLENDİ</td>
<td>LOAD_SUCCEED</td>
<td>Fatura Yükleme - Başarılı</td>
</tr>
<tr>
<td>102</td>
<td>TASLAK İŞLENİYOR</td>
<td>LOAD_PROCESSING</td>
<td>Belge İşleniyor</td>
</tr>
<tr>
<td>103</td>
<td>PAKETLENİYOR</td>
<td>PACKAGE_PROCESSING</td>
<td>Belge GİB&#39;e Göndermek İçin Zarflanıyor</td>
</tr>
<tr>
<td>104</td>
<td>PAKETLENDİ</td>
<td>PACKAGE_SUCCEED</td>
<td>Belge Zarflandı GİB&#39;e Gönderilecek</td>
</tr>
<tr>
<td>105</td>
<td>PAKETLEME HATASI</td>
<td>PACKAGE_FAILED</td>
<td>Belge Zarflanırken Hata Oluştu. Tekrar Denenecektir.</td>
</tr>
<tr>
<td>106</td>
<td>İMZALANIYOR</td>
<td>SIGN_PROCESSING</td>
<td>Belge İmzalanıyor</td>
</tr>
<tr>
<td>107</td>
<td>İMZALANDI&quot;</td>
<td>SIGN_SUCCEED</td>
<td>Belge İmzalandı</td>
</tr>
<tr>
<td>109</td>
<td>GİB&#39;DEN YANIT BEKLİYOR</td>
<td>SEND_WAIT_GIB_RESPONSE</td>
<td>Belge GİB&#39;e Gönderildi</td>
</tr>
<tr>
<td>110</td>
<td>ALICIDAN YANIT BEKLİYOR</td>
<td>SEND_WAIT_SYSTEM_RESPONSE</td>
<td>Belge Alıcıya Başarıyla Ulaştırıldı. Sistem Yanıtı Bekliyor.</td>
</tr>
<tr>
<td>111</td>
<td>ALICIDAN ONAY BEKLİYOR</td>
<td>SEND_WAIT_APPLICATION_RESPONSE</td>
<td>Ticari Belge Alıcıdan Onay Bekliyor</td>
</tr>
<tr>
<td>112</td>
<td>KABUL EDİLDİ</td>
<td>ACCEPTED_SUCCEED</td>
<td>Belge Kabul Edildi</td>
</tr>
<tr>
<td>120</td>
<td>RET EDİLDİ</td>
<td>REJECTED_SUCCEED</td>
<td>Belge Ret Edildi</td>
</tr>
<tr>
<td>134</td>
<td>ZAMAN AŞIMI OLUŞTU</td>
<td>SEND_TIMEOUT</td>
<td>Belge GİB&#39;e Gönderilirken Zaman Aşımına Uğradı.</td>
</tr>
<tr>
<td>135</td>
<td>GÖNDERİLİYOR</td>
<td>SEND_PROCESSING</td>
<td>Belge GİB&#39;e Gönderiliyor</td>
</tr>
<tr>
<td>136</td>
<td>GÖNDERME İŞLEMİ BAŞARISIZ</td>
<td>SEND_FAILED</td>
<td>Belge GİB&#39;e Gönderilirken Hata Oluştu</td>
</tr>
<tr>
<td>137</td>
<td>GÖNDERİLDİ</td>
<td>SEND_SUCCEED</td>
<td>Belge GİB&#39;e Gönderildi</td>
</tr>
<tr>
<td>139</td>
<td>OTOMATİK GÖNDERİM HATASI</td>
<td>AUTO_FAILED</td>
<td>Otomatik Gönderim Hatası</td>
</tr>
<tr>
<td>140</td>
<td>FATURA NUMARASI ATANDI</td>
<td>LOAD_ID_ASSIGNED</td>
<td>Belge Numarası Atandı</td>
</tr>
<tr>
<td>141</td>
<td>FATURA NUMARASI ATANMA BEKLENİYOR</td>
<td>LOAD_WAIT_ID_ASSIGNED</td>
<td>Belge Numarası Atandı</td>
</tr>
</tbody></table>

<h3 id="gelen-fatura-durumlar">Gelen Fatura Durumları</h3>

<table><thead>
<tr>
<th>DURUM KODU</th>
<th><div style="width:200px">DURUM AÇIKLAMASI</div></th>
<th>STATUS_SUBSTATUS</th>
<th>ALINACAK AKSİYON</th>
</tr>
</thead><tbody>
<tr>
<td>133</td>
<td>ALINDI</td>
<td>RECEIVE_SUCCEED</td>
<td>Temel fatura alındı</td>
</tr>
<tr>
<td>132</td>
<td>ALINDI</td>
<td>RECEIVE_WAIT_APPLICATION_RESPONSE</td>
<td>Ticari Fatura yanıt bekliyor</td>
</tr>
<tr>
<td>134</td>
<td>ZAMAN AŞIMI OLUŞTU</td>
<td>ACCEPT/REJECT_TIMEOUT</td>
<td>İŞLEM SİSTEM TARAFINDAN OTOMATİK TEKRARLANCAKTIR</td>
</tr>
<tr>
<td>122</td>
<td>KABUL EDİLDİ</td>
<td>ACCEPTED_SUCCEED</td>
<td></td>
</tr>
<tr>
<td>123</td>
<td>KABUL İŞLENİYOR</td>
<td>ACCEPTED_PROCESSING</td>
<td></td>
</tr>
<tr>
<td>124</td>
<td>KABUL GİBDEN YANIT BEKLİYOR</td>
<td>ACCEPT_GIB_RESPONSE</td>
<td></td>
</tr>
<tr>
<td>125</td>
<td>KABUL ALICIDAN YANIT BEKLİYOR</td>
<td>ACCEPT_WAIT_SYSTEM_RESPONSE</td>
<td></td>
</tr>
<tr>
<td>126</td>
<td>KABUL İŞLEMİ BAŞARISIZ</td>
<td>ACCEPT_FAILED</td>
<td></td>
</tr>
<tr>
<td>127</td>
<td>RED ALICIDAN YANIT BEKLİYOR</td>
<td>REJECT_WAIT_SYSTEM_RESPONSE</td>
<td></td>
</tr>
<tr>
<td>128</td>
<td>RED GİBDE YANIT BEKLİYOR</td>
<td>REJECT_WAIT_GIB_RESPONSE</td>
<td></td>
</tr>
<tr>
<td>129</td>
<td>RED İŞLENİYOR</td>
<td>REJECT_PROCESSING</td>
<td></td>
</tr>
<tr>
<td>130</td>
<td>REDDEDİLDİ</td>
<td>REJECT_SUCCEED</td>
<td></td>
</tr>
<tr>
<td>131</td>
<td>RED İŞLEMİ BAŞARISIZ</td>
<td>FAILED</td>
<td></td>
</tr>
</tbody></table>

<h3 id="g-b-durum-kodlar">GİB Durum Kodları</h3>

<table><thead>
<tr>
<th>Kod</th>
<th>Açıklama</th>
<th>Alınacak Aksiyon</th>
</tr>
</thead><tbody>
<tr>
<td>1000</td>
<td>ZARF KUYRUĞA EKLENDİ</td>
<td>Durum kodunun güncellenmesi beklenmelidir.</td>
</tr>
<tr>
<td>1100</td>
<td>ZARF İŞLENİYOR</td>
<td>Durum kodunun güncellenmesi beklenmelidir.</td>
</tr>
<tr>
<td>1110</td>
<td>ZIP DOSYASI DEĞİL</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1111</td>
<td>ZARF ID UZUNLUĞU GEÇERSİZ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1120</td>
<td>ZARF ARŞİVDEN KOPYALANAMADI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1130</td>
<td>ZIP AÇILAMADI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1131</td>
<td>ZIP BİR DOSYA İÇERMELİ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1132</td>
<td>XML DOSYASI DEĞİL</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1133</td>
<td>ZARF ID VE XML DOSYASININ ADI AYNI OLMALI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1140</td>
<td>DOKUMAN AYRIŞTIRILAMADI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1141</td>
<td>ZARF ID YOK</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1142</td>
<td>ZARF ID VE ZIP DOSYASI ADI AYNI OLMALI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1143</td>
<td>GEÇERSİZ VERSİYON</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1150</td>
<td>SCHEMATRON KONTROL SONUCU HATALI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1160</td>
<td>XML SEMA KONTROLÜNDEN GEÇEMEDİ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1161</td>
<td>İMZA SAHİBİ TCKN VKN ALINAMADI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1162</td>
<td>İMZA KAYDEDİLEMEDİ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1163</td>
<td>GÖNDERİLEN ZARF SİSTEMDE DAHA ÖNCE KAYITLI OLAN BİR FATURAYI İÇERMEKTEDİR</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1170</td>
<td>YETKİ KONTROL EDİLEMEDİ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1171</td>
<td>GÖNDERİCİ BİRİM YETKİSİ YOK</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1172</td>
<td>POSTA KUTUSU YETKİSİ YOK</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1175</td>
<td>İMZA YETKİSİ KONTROL EDİLEMEDİ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1176</td>
<td>İMZA SAHİBİ YETKİSİZ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1177</td>
<td>GEÇERSİZ İMZA</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1180</td>
<td>ADRES KONTROL EDİLEMEDİ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1181</td>
<td>ADRES BULUNAMADI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1182</td>
<td>KULLANICI EKLENEMEDİ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1183</td>
<td>KULLANICI SİLİNEMEDİ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1190</td>
<td>SİSTEM YANITI HAZIRLANAMADI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1195</td>
<td>SİSTEM HATASI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1200</td>
<td>ZARF BAŞARIYLA İŞLENDİ</td>
<td>Özel entegratörden gönderilen Belgede sorun tespit edilmedi. Sonra ki aşamalara geçilecek.</td>
</tr>
<tr>
<td>1210</td>
<td>DOKUMAN BULUNAN ADRESE GÖNDERİLEMEDİ</td>
<td>GİB’in tekrar gönderme denemesi sonlandıktan sonra, 1215 durum kodu alınır ise belgeler yeniden gönderilmeli</td>
</tr>
<tr>
<td>1215</td>
<td>DOKÜMAN GÖNDERİMİ BAŞARISIZ. TEKRAR GÖNDERME SONLANDI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1220</td>
<td>HEDEFTEN SİSTEM YANITI GELMEDİ</td>
<td>Bu durum kodundan sonra 1230 HEDEFTEN SİSTEM YANITI BAŞARISIZ GELDİ durum kodu alınır ise Belge yeniden gönderilmelidir.</td>
</tr>
<tr>
<td>1230</td>
<td>HEDEFTEN SİSTEM YANITI BAŞARISIZ GELDİ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1300</td>
<td>BAŞARIYLA TAMAMLANDI</td>
<td>Başarılı olan Belge aynı numara ile gönderilemez.</td>
</tr>
</tbody></table>

<h2 id="toplu-fatura-durum-sorgulama-getinvoicestatusall">Toplu Fatura Durum Sorgulama (GetInvoiceStatusAll)</h2>

<ul>
<li>E-Fatura sisteminde bulunan bir veya birden fazla taslak, gelen ve giden faturaların durumunu sorgulamayı sağlayan servistir.</li>
</ul>

<p><br>
Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur.</td>
</tr>
<tr>
<td><strong>UUID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Durumu sorgulanacak faturanın GUID formatında Evrensel Tekil Tanımlama Numarası. Birden fazla fatura durum sorgulamak için <code class="prettyprint">INVOICE</code> elementini çoklayınız.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>INVOICE_STATUS</strong></td>
<td>ComplexType</td>
<td>Sorgu kriterine uyan fatura(lar)ın listesi. Fatura numarası <code class="prettyprint">ID</code>, fatura evrensel tekil tanımlama numarası  <code class="prettyprint">UUID</code> attribute içerisinde dönülmektedir.</td>
</tr>
<tr>
<td><strong>INVOICE_STATUS.STATUS</strong></td>
<td>String</td>
<td>Faturanın e-fatura sisteminde ki durumu. Detay için <strong>Fatura Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>INVOICE_STATUS.STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Fatura durum açıklaması. Detay için <strong>Fatura Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>INVOICE_STATUS.GIB_STATUS_CODE</strong></td>
<td>String</td>
<td>Faturanın GİB&#39;de ki durum kodu. Faturanın GİB&#39;de ki durumu e-fatura sistemi tarafından henüz sorgulanmadıysa eleman dönülmez. Detay için <strong>GİB Durum Kodları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>INVOICE_STATUS.GIB_STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Faturanın GİB&#39;de ki durumunun kodunun açıklaması. Faturanın GİB&#39;de ki durumu e-fatura sistemi tarafından henüz sorgulanmadıysa eleman dönülmez. Detay için <strong>GİB Durum Kodları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>INVOICE_STATUS.RESPONSE_CODE</strong></td>
<td>String</td>
<td>Ticari fatura için verilen yanıtı içeren zarfın durum kodu. Eğer faturanın senaryosu TICARIFATURA değilse eleman dönülmez.</td>
</tr>
<tr>
<td><strong>INVOICE_STATUS.RESPONSE_DESC</strong></td>
<td>String</td>
<td>Ticari fatura için verilen yanıtı içeren zarfın durum açıklaması. Eğer faturanın senaryosu TICARIFATURA değilse eleman dönülmez.</td>
</tr>
<tr>
<td><strong>INVOICE_STATUS.GTB_REFNO</strong></td>
<td>String</td>
<td>Gümrük Sistemine alınan ihracat faturaları için, Gümrük ve Ticaret Bakanlığı tarafından üretilen 23 haneli bir referans numarasıdır.  23 haneli bir referans numarası ile belge tarihi yükümlü tarafından gümrük beyannamesinin 44 no’lu kutusunda “Belge Referans No” ve “Belge Tarihi” alanlarında beyan edilecektir. <strong>İhracat faturası değilse dönülmez.</strong></td>
</tr>
<tr>
<td><strong>INVOICE_STATUS.GTB_GCB_TESCILNO</strong></td>
<td>String</td>
<td>Gümrük İdaresi fiili ihracatı tamamlanan eşyanın kabul uygulama yanıtı ile ilgilisine dönülen Gümrük Çıkış Belgesi (GÇB) tescil numarasıdır. <strong>İhracat faturası değilse dönülmez.</strong></td>
</tr>
<tr>
<td><strong>INVOICE_STATUS.GTB_FIILI_IHRACAT_TARIHI</strong></td>
<td>String</td>
<td>Gümrük İdaresi tarafından fiili ihracatı tamamlanan ihracat faturaları için döndüğü fiili ihraç tarihi bilgisidir.  Gümrük İdaresi bu bilgiyi fiili ihracat (intaç) gerçekleştiğinde dönecektir. Eğer ihracat faturası için bu alan dönülmemişse hala fiili ihracat yapılmamıştır. <strong>İhracat faturası değilse dönülmez.</strong></td>
</tr>
<tr>
<td><strong>INVOICE_STATUS.CDATE</strong></td>
<td>String</td>
<td>Faturanın e-fatura sistemine yüklendiği/ulaştığı tarih</td>
</tr>
<tr>
<td><strong>INVOICE_STATUS.DIRECTION</strong></td>
<td>String</td>
<td>Gelen fatura için <code class="prettyprint">IN</code>, Gönderilen fatura için <code class="prettyprint">OUT</code></td>
</tr>
<tr>
<td><strong>INVOICE_STATUS.ENVELOPE_IDENTIFIER</strong></td>
<td>String</td>
<td>Faturanın zarf IDsi. Taslak faturalar için eleman dönülmez.</td>
</tr>
</tbody></table>

<h3 id="giden-fatura-durumlar">Giden Fatura Durumları</h3>

<table><thead>
<tr>
<th>DURUM KODU</th>
<th><div style="width:200px">DURUM AÇIKLAMASI</div></th>
<th>STATUS_SUBSTATUS</th>
<th>ALINACAK AKSİYON</th>
</tr>
</thead><tbody>
<tr>
<td>100</td>
<td>DURUM HENÜZ GÜNCELLENMEDİ</td>
<td>LOAD_SUCCEED</td>
<td>Durum sorgulanması yapmaya devam edilecek</td>
</tr>
<tr>
<td>101</td>
<td>KUYRUĞA EKLENDİ</td>
<td>LOAD_SUCCEED</td>
<td>Fatura Yükleme - Başarılı</td>
</tr>
<tr>
<td>102</td>
<td>TASLAK İŞLENİYOR</td>
<td>LOAD_PROCESSING</td>
<td>Belge İşleniyor</td>
</tr>
<tr>
<td>103</td>
<td>PAKETLENİYOR</td>
<td>PACKAGE_PROCESSING</td>
<td>Belge GİB&#39;e Göndermek İçin Zarflanıyor</td>
</tr>
<tr>
<td>104</td>
<td>PAKETLENDİ</td>
<td>PACKAGE_SUCCEED</td>
<td>Belge Zarflandı GİB&#39;e Gönderilecek</td>
</tr>
<tr>
<td>105</td>
<td>PAKETLEME HATASI</td>
<td>PACKAGE_FAILED</td>
<td>Belge Zarflanırken Hata Oluştu. Tekrar Denenecektir.</td>
</tr>
<tr>
<td>106</td>
<td>İMZALANIYOR</td>
<td>SIGN_PROCESSING</td>
<td>Belge İmzalanıyor</td>
</tr>
<tr>
<td>107</td>
<td>İMZALANDI&quot;</td>
<td>SIGN_SUCCEED</td>
<td>Belge İmzalandı</td>
</tr>
<tr>
<td>109</td>
<td>GİB&#39;DEN YANIT BEKLİYOR</td>
<td>SEND_WAIT_GIB_RESPONSE</td>
<td>Belge GİB&#39;e Gönderildi</td>
</tr>
<tr>
<td>110</td>
<td>ALICIDAN YANIT BEKLİYOR</td>
<td>SEND_WAIT_SYSTEM_RESPONSE</td>
<td>Belge Alıcıya Başarıyla Ulaştırıldı. Sistem Yanıtı Bekliyor.</td>
</tr>
<tr>
<td>111</td>
<td>ALICIDAN ONAY BEKLİYOR</td>
<td>SEND_WAIT_APPLICATION_RESPONSE</td>
<td>Ticari Belge Alıcıdan Onay Bekliyor</td>
</tr>
<tr>
<td>112</td>
<td>KABUL EDİLDİ</td>
<td>ACCEPTED_SUCCEED</td>
<td>Belge Kabul Edildi</td>
</tr>
<tr>
<td>120</td>
<td>RET EDİLDİ</td>
<td>REJECTED_SUCCEED</td>
<td>Belge Ret Edildi</td>
</tr>
<tr>
<td>134</td>
<td>ZAMAN AŞIMI OLUŞTU</td>
<td>SEND_TIMEOUT</td>
<td>Belge GİB&#39;e Gönderilirken Zaman Aşımına Uğradı.</td>
</tr>
<tr>
<td>135</td>
<td>GÖNDERİLİYOR</td>
<td>SEND_PROCESSING</td>
<td>Belge GİB&#39;e Gönderiliyor</td>
</tr>
<tr>
<td>136</td>
<td>GÖNDERME İŞLEMİ BAŞARISIZ</td>
<td>SEND_FAILED</td>
<td>Belge GİB&#39;e Gönderilirken Hata Oluştu</td>
</tr>
<tr>
<td>137</td>
<td>GÖNDERİLDİ</td>
<td>SEND_SUCCEED</td>
<td>Belge GİB&#39;e Gönderildi</td>
</tr>
<tr>
<td>139</td>
<td>OTOMATİK GÖNDERİM HATASI</td>
<td>AUTO_FAILED</td>
<td>Otomatik Gönderim Hatası</td>
</tr>
<tr>
<td>140</td>
<td>FATURA NUMARASI ATANDI</td>
<td>LOAD_ID_ASSIGNED</td>
<td>Belge Numarası Atandı</td>
</tr>
<tr>
<td>141</td>
<td>FATURA NUMARASI ATANMA BEKLENİYOR</td>
<td>LOAD_WAIT_ID_ASSIGNED</td>
<td>Belge Numarası Atandı</td>
</tr>
</tbody></table>

<h3 id="gelen-fatura-durumlar">Gelen Fatura Durumları</h3>

<table><thead>
<tr>
<th>DURUM KODU</th>
<th><div style="width:200px">DURUM AÇIKLAMASI</div></th>
<th>STATUS_SUBSTATUS</th>
<th>ALINACAK AKSİYON</th>
</tr>
</thead><tbody>
<tr>
<td>133</td>
<td>ALINDI</td>
<td>RECEIVE_SUCCEED</td>
<td></td>
</tr>
<tr>
<td>134</td>
<td>ZAMAN AŞIMI OLUŞTU</td>
<td>ACCEPT/REJECT_TIMEOUT - YANLIŞ</td>
<td></td>
</tr>
<tr>
<td>122</td>
<td>KABUL EDİLDİ</td>
<td>ACCEPTED_SUCCEED</td>
<td></td>
</tr>
<tr>
<td>123</td>
<td>KABUL İŞLENİYOR</td>
<td>ACCEPTED_PROCESSING</td>
<td></td>
</tr>
<tr>
<td>124</td>
<td>KABUL GİBDEN YANIT BEKLİYOR</td>
<td>ACCEPT_GIB_RESPONSE</td>
<td></td>
</tr>
<tr>
<td>125</td>
<td>KABUL ALICIDAN YANIT BEKLİYOR</td>
<td>ACCEPT_WAIT_SYSTEM_RESPONSE</td>
<td></td>
</tr>
<tr>
<td>126</td>
<td>KABUL İŞLEMİ BAŞARISIZ</td>
<td>ACCEPT_FAILED</td>
<td></td>
</tr>
<tr>
<td>127</td>
<td>RED ALICIDAN YANIT BEKLİYOR</td>
<td>REJECT_WAIT_SYSTEM_RESPONSE</td>
<td></td>
</tr>
<tr>
<td>128</td>
<td>RED GİBDE YANIT BEKLİYOR</td>
<td>REJECT_WAIT_GIB_RESPONSE</td>
<td></td>
</tr>
<tr>
<td>129</td>
<td>RED İŞLENİYOR</td>
<td>REJECT_PROCESSING</td>
<td></td>
</tr>
<tr>
<td>130</td>
<td>REDDEDİLDİ</td>
<td>REJECT_SUCCEED</td>
<td></td>
</tr>
<tr>
<td>131</td>
<td>RED İŞLEMİ BAŞARISIZ</td>
<td>FAILED</td>
<td></td>
</tr>
</tbody></table>

<h3 id="g-b-durum-kodlar">GİB Durum Kodları</h3>

<table><thead>
<tr>
<th>Kod</th>
<th>Açıklama</th>
<th>Alınacak Aksiyon</th>
</tr>
</thead><tbody>
<tr>
<td>1000</td>
<td>ZARF KUYRUĞA EKLENDİ</td>
<td>Durum kodunun güncellenmesi beklenmelidir.</td>
</tr>
<tr>
<td>1100</td>
<td>ZARF İŞLENİYOR</td>
<td>Durum kodunun güncellenmesi beklenmelidir.</td>
</tr>
<tr>
<td>1110</td>
<td>ZIP DOSYASI DEĞİL</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1111</td>
<td>ZARF ID UZUNLUĞU GEÇERSİZ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1120</td>
<td>ZARF ARŞİVDEN KOPYALANAMADI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1130</td>
<td>ZIP AÇILAMADI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1131</td>
<td>ZIP BİR DOSYA İÇERMELİ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1132</td>
<td>XML DOSYASI DEĞİL</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1133</td>
<td>ZARF ID VE XML DOSYASININ ADI AYNI OLMALI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1140</td>
<td>DOKUMAN AYRIŞTIRILAMADI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1141</td>
<td>ZARF ID YOK</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1142</td>
<td>ZARF ID VE ZIP DOSYASI ADI AYNI OLMALI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1143</td>
<td>GEÇERSİZ VERSİYON</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1150</td>
<td>SCHEMATRON KONTROL SONUCU HATALI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1160</td>
<td>XML SEMA KONTROLÜNDEN GEÇEMEDİ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1161</td>
<td>İMZA SAHİBİ TCKN VKN ALINAMADI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1162</td>
<td>İMZA KAYDEDİLEMEDİ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1163</td>
<td>GÖNDERİLEN ZARF SİSTEMDE DAHA ÖNCE KAYITLI OLAN BİR FATURAYI İÇERMEKTEDİR</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1170</td>
<td>YETKİ KONTROL EDİLEMEDİ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1171</td>
<td>GÖNDERİCİ BİRİM YETKİSİ YOK</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1172</td>
<td>POSTA KUTUSU YETKİSİ YOK</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1175</td>
<td>İMZA YETKİSİ KONTROL EDİLEMEDİ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1176</td>
<td>İMZA SAHİBİ YETKİSİZ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1177</td>
<td>GEÇERSİZ İMZA</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1180</td>
<td>ADRES KONTROL EDİLEMEDİ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1181</td>
<td>ADRES BULUNAMADI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1182</td>
<td>KULLANICI EKLENEMEDİ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1183</td>
<td>KULLANICI SİLİNEMEDİ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1190</td>
<td>SİSTEM YANITI HAZIRLANAMADI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1195</td>
<td>SİSTEM HATASI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1200</td>
<td>ZARF BAŞARIYLA İŞLENDİ</td>
<td>Özel entegratörden gönderilen Belgede sorun tespit edilmedi. Sonra ki aşamalara geçilecek.</td>
</tr>
<tr>
<td>1210</td>
<td>DOKUMAN BULUNAN ADRESE GÖNDERİLEMEDİ</td>
<td>GİB’in tekrar gönderme denemesi sonlandıktan sonra, 1215 durum kodu alınır ise belgeler yeniden gönderilmeli</td>
</tr>
<tr>
<td>1215</td>
<td>DOKÜMAN GÖNDERİMİ BAŞARISIZ. TEKRAR GÖNDERME SONLANDI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1220</td>
<td>HEDEFTEN SİSTEM YANITI GELMEDİ</td>
<td>Bu durum kodundan sonra 1230 HEDEFTEN SİSTEM YANITI BAŞARISIZ GELDİ durum kodu alınır ise Belge yeniden gönderilmelidir.</td>
</tr>
<tr>
<td>1230</td>
<td>HEDEFTEN SİSTEM YANITI BAŞARISIZ GELDİ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1300</td>
<td>BAŞARIYLA TAMAMLANDI</td>
<td>Başarılı olan Belge aynı numara ile gönderilemez.</td>
</tr>
</tbody></table>

<h2 id="uygulama-yan-t-g-nderme-sendinvoiceresponsewithserversign">Uygulama Yanıtı Gönderme (SendInvoiceResponseWithServerSign)</h2>

<ul>
<li>E-Fatura sisteminde bulunan bir veya birden fazla gelen ticari faturaya uygulama yanıtı göndermeyi sağlayan servistir.</li>
<li>Belgelerinin <strong>imzalanmasını Özel Entegratör&#39;e devretmiş</strong> müşteriler için uygulama yanıtların e-fatura platformunda imzalanarak gönderilmesini sağlamak için hazırlanmıştır.</li>
<li>Bir faturaya en fazla 1 defa yanıt gönderilebilmektedir.</li>
<li>Yanıt gönderilmiş faturalara tekrar yanıt gönderilmesi istemci tarafında kısıtlanmalıdır.</li>
</ul>

<p><br>
Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur.</td>
</tr>
<tr>
<td><strong>STATUS</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Faturaya verilecek yanıt. <code class="prettyprint">KABUL</code> veya <code class="prettyprint">RED</code> değeri alabilir.</td>
</tr>
<tr>
<td><strong>INVOICE</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Yanıt gönderilecek fatura listesi</td>
</tr>
<tr>
<td><strong>DESCRIPTION</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Yanıt ile beraber gönderilecek mesaj. Ret edilen faturalar için <code class="prettyprint">Red Sebebi</code> bu alana yazılabilir. <code class="prettyprint">STATUS</code> KABUL ise ve bu alan gönderilmezse <em>Fatura kabul edildi</em>, <code class="prettyprint">STATUS</code> RED ise <strong>Reddedildi</strong> mesajı varsayılan olarak eklenecektir.</td>
</tr>
</tbody></table>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>RETURN_CODE</strong></td>
<td>String</td>
<td>İşlem başarılı ise <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda WS Fault objesi dönecektir.</td>
</tr>
</tbody></table>

<p><br></p>

<h3 id="servisten-d-nebilecek-hatalar">Servisten Dönebilecek Hatalar</h3>

<table><thead>
<tr>
<th>Hata Açıklaması</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td>Daha önce yanıtlanmış bir fatura için tekrar yanıt gönderilemez! Fatura UUID:xxxxxxx</td>
<td>Bir faturaya en fazla 1 defa yanıt gönderilebilmektedir. <strong>Bundan dolayı yanıt gönderilmiş faturalara tekrar yanıt gönderilmesi istemci tarafında kısıtlanmalıdır.</strong></td>
</tr>
<tr>
<td>Fatura ID : FYA201800000001 sistemde bulunamadı!</td>
<td>E-Fatura sisteminde gelen fatura kutusunda bulunmayan bir faturaya uygulama yanıtı gönderme yapıldığı zaman dönülmektedir. Özellikle birden fazla hesabı olan firmalarda, erişim yetkisi olan bir kullanıcı tarafından istemciye indirilen bir faturaya, faturaya erişim yetkisi olmayan bir kullanıcı tarafından yanıt gönderilince karşılaşılmaktadır.</td>
</tr>
<tr>
<td>Uygulama yanıtı 8 gün geciktiği için cevap gönderilemez</td>
<td>Ticari fatura özel entegratör sistemine ulaştıktan sonra 8 gün içerisinde yanıtlanmalıdır. İstemci 8 günü geçen faturalar için kontrol eklemelidir. 8 günü hesaplamak için GetInvoice servisinde fatura için dönülen CDATE alanına 8 gün eklenebilir.</td>
</tr>
<tr>
<td>Fatura durumu yanıtlama için uygun olmadıgından işlem sonlandı! Fatura UUID:XXX-XXX-, STATUS:XXXXX-XXXXX</td>
<td>Uygulama yanıtı gönderilmiş ve hala süreci tamamlanmamış bir faturaya tekrar yanıt gönderildiğinde dönülen hatadır.</td>
</tr>
</tbody></table>

<!-- partial "includes/efatura/envelope"
partial "includes/efatura/moved"-->

          <h1 id="e-ar-iv-fatura-webservisi">E-Arşiv Fatura Webservisi</h1>

<p>E-Fatura mükellefi olmayan firma veya nihai tüketiciye düzenlenen faturaların özel entegratör sistemine gönderilmesi ve raporlamasını sağlayan webservis uygulamasıdır.</p>

<h2 id="g-b-dok-manlar">GİB Dokümanları</h2>

<table><thead>
<tr>
<th>Doküman</th>
<th>Açıklama</th>
<th>İndir</th>
</tr>
</thead><tbody>
<tr>
<td><strong>UBL-TR Fatura</strong></td>
<td>UBL-TR v1.2 (UBL 2.1 Türkiye Özelleştirmesi) paketinde yer alan fatura belgesinde geçen elemanlara ait XSD, tanımlama, kullanım şekilleri, kardinaliteler hakkında bilgi vermek ve örnek kullanım şekillerini göstermek amacı ile hazırlanmıştır.</td>
<td><a href="/resource/BELGELER/UBL-TR Fatura - V 1.0.pdf"><img src="/images/icon_pdf.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>UBL-TR Ortak Elemanlar</strong></td>
<td>UBL-TR (UBL 2.1 Türkiye Özelleştirmesi) paketinde yer alan belgelerde geçmesi muhtemel elemanlara ait (ortak elemanlar örneğin: Adres, Parasal Toplamlar, Taraf gibi) XSD, açıklama, kullanım şartları, kardinaliteler hakkında bilgi vermek ve örnek kullanım şekillerini göstermek amacı ile hazırlanmıştır.</td>
<td><a href="/resource/BELGELER/UBL-TR Ortak Elemanlar - V 0.7.pdf"><img src="/images/icon_pdf.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>UBL-TR Kod Listeleri</strong></td>
<td>UBL-TR kapsamında kullanılan Kodlama Sistemleri ve Kimlik Şemaları hakkında bilgi vermek amacı ile hazırlanmıştır.</td>
<td><a href="/resource/BELGELER/UBL-TR Kod Listeleri - V 1.18.pdf"><img src="/images/icon_pdf.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Gümrük İşlemleri Kılavuzu</strong></td>
<td>Elektronik Fatura Uygulamasında yolcu beraberi eşya ihracı ve mal ihracı faturalarını e-fatura sistemine entegre edecek ve uygulamaya ilişkin yazılım geliştireceklerin teknik konularda ihtiyaç duyabilecekleri bilgileri vermek amacıyla hazırlanmıştır.</td>
<td><a href="/resource/GUMRUK/Gumruk_Islemleri_Kilavuzu_Versiyon_1_8.pdf"><img src="/images/icon_pdf.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>İhracat Faturası Ek Alanlar</strong></td>
<td>İhracat faturalarında eklenmesi zorunlu ve isteğe bağlı alanların açıklamak için hazırlanmıştır.</td>
<td><a href="/resource/GUMRUK/Gumruk_Islemleri_Kilavuzu_Versiyon_1_8.pdf"><img src="/images/icon_pdf.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>SGK E-Fatura Teknik Kılavuzu</strong></td>
<td>Elektronik Fatura Uygulamasında Sosyal Güvenlik Kurumuna (SGK) düzenlenecek  faturaların e-fatura sistemine entegre edecek uygulamaya ilişkin yazılım geliştireceklerin teknik konularda ihtiyaç duyabilecekleri bilgileri vermek amacıyla hazırlanmıştır.</td>
<td><a href="https://ebelge.gib.gov.tr/dosyalar/kilavuzlar/SGK_e-FATURA_UYGULAMA_KILAVUZU.pdf"><img src="/images/icon_pdf.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Kamu E-Fatura Teknik Kılavuzu</strong></td>
<td>e-Fatura Uygulamasına kayıtlı olan vergi mükelleflerimiz, 5018 sayılı Kamu Mali Yönetimi ve Kontrol Kanunu ile belirlenmiş merkezi yönetim kapsamında yer alan ve Muhasebat ve Mali Kontrol Genel Müdürlüğü (MGM) tarafından geliştirilen Yeni Harcama Yönetim Sistemini (MYS) kullanan kamu idareleri ve bunlara bağlı harcama birimleri adına, 1.3.2019 tarihinden itibaren GİB e-Fatura Uygulaması aracılığı ile e-Fatura düzenleyip gönderebileceklerdir. Teknik kılavuz hazırlanmıştır.</td>
<td><a href="https://ebelge.gib.gov.tr/dosyalar/kilavuzlar/Kamu_e-Fatura_Teknik_Kilavuzu.pdf"><img src="/images/icon_pdf.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Hal Tipi Fatura Kılavuzu</strong></td>
<td>Hal Komisyoncularının düzenlediği KOMİSYONCU veya SATIŞ faturalarının işleyişinin açıklandığı teknik kılavuzdur.</td>
<td><a href="/resource/HAL/Hal-Fatura.docx"><img src="/images/icon_pdf.png" height="40" width="35"/></a></td>
</tr>
</tbody></table>

<h2 id="ubl-fatura-rnekleri">UBL-Fatura Örnekleri</h2>

<p>E-Fatura ve E-Arşiv Fatura sistemi üzerinden düzenlebilecek ve gönderilebilecek fatura senaryoları ve örnek fatura XML dosyası aşağıda listelenmiştir.</p>

<aside class="notice">Listede bulunmayan senaryolar için fatura üretmek için  E-Fatura Portale erişebilirsiniz.</aside>

<table><thead>
<tr>
<th>Fatura Senaryosu</th>
<th>Açıklama</th>
<th>XML</th>
<th>HTML</th>
</tr>
</thead><tbody>
<tr>
<td><strong>Temel Satış Faturası</strong></td>
<td>Alıcısı tarafından elektronik ortamda kabul veya reddedilemeyen fatura tipidir.</td>
<td><a href="/resource/xml/FATURA_2.xml" target="_blank"><img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_2.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Ticari Satış Faturası</strong></td>
<td>Alıcısı tarafından elektronik ortamda kabul veya reddedilebilen fatura tipidir.</td>
<td><a href="/resource/xml/FATURA_1.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_1.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>İade Faturası</strong></td>
<td>Alınan bir fatura üzerinde ki yanlış tutar veya eksik bilgi sebebi ile düzenlenen fatura tipidir. <strong>İade faturası TEMELFATURA olarak gönderilmesi zorunludur.</strong></td>
<td><a href="/resource/xml/FATURA_4.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_4.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Farklı KDV Oranlarına Sahip Fatura</strong></td>
<td>Fatura satırında farklı KDV oranlarının bulunduğu fatura örneğidir. Her satırda farklı KDV oranı vardır.</td>
<td><a href="/resource/xml/FATURA_5.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_5.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>0 KDV Fatura</strong></td>
<td>Fatura satırında KDV oranı 0 olan satış faturası örneğidir. KDV 0 olduğu durumlarda muafiyet sebebi belirtilmelidir.</td>
<td><a href="/resource/xml/FATURA_6.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_6.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Dövizli Satış Faturası</strong></td>
<td>Fatura para birimi TL dışında farklı bir para birimi ile düzenlenen fatura örneğidir. Faturanın içerisinde tutarlar döviz cinsindendir.  TL karşlıkları XML içerisinde bulunmaz. TL karşılıkları görsel üzerinde tutar ile kur çarpılarak gösterilir.</td>
<td><a href="/resource/xml/FATURA_7.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_7.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Bedelsiz (%100 İskontolu) Satış Faturası</strong></td>
<td>Promosyon, Eşantiyon veya Numune Ürün Teslimlerinde bedelsiz düzenlenen fatura örneğidir. Bu faturalarda KDV 0 hesaplandığı için muafiyet sebebi belirtilmelidir.  Bu faturaların muafiyet kodu 351 olur. Muafiyet sebebi ise müşteri tarafından girilebilir.</td>
<td><a href="/resource/xml/FATURA_10.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_10.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Satırda Çoklu İskontolu Satış Faturası</strong></td>
<td>Bir fatura satırında birden fazla iskonto içeren fatura örneğidir.</td>
<td><a href="/resource/xml/FATURA_9.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_9.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>İstisna Faturası</strong></td>
<td>İstisna Faturası</td>
<td><a href="/resource/xml/FATURA_11.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_11.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Özel Mathrah Faturası</strong></td>
<td>Özel Matrah Faturası</td>
<td><a href="/resource/xml/FATURA_12.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_12.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Tevkifat Faturası</strong></td>
<td>Tevkifat Faturası</td>
<td><a href="/resource/xml/FATURA_13.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_13.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>İhraç Kayıtlı Fatura</strong></td>
<td>İhraç Kayıtlı Fatura</td>
<td><a href="/resource/xml/FATURA_17.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_17.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>İhracat Faturası</strong></td>
<td>İhracat Faturası</td>
<td><a href="/resource/xml/FATURA_18.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_18.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Yolcu Beraberi (Taxfree)</strong></td>
<td>Yolcu Beraberi (Taxfree)</td>
<td><a href="/resource/xml/FATURA_19.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_19.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>SGK Faturası</strong></td>
<td>SGK Faturası TEMELFATURA senaryosunda gönderilmek zorundadır.</td>
<td><a href="/resource/xml/FATURA_20.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_20.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Kamu Faturası</strong></td>
<td>Kamu kurum ve kuruluşlarına düzenlenen fatura örneğidir. TEMELFATURA senaryosunda göndermek zorundadır.</td>
<td><a href="/resource/xml/FATURA_23.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_23.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Hal Komisyon Faturası</strong></td>
<td>Hal Komisyoncularının komisyon kazançları için düzenledikleri fatura tipidir. Faturanın HKS senaryosunda gönderilmesi zorunludur.</td>
<td><a href="/resource/xml/HAL-KOMISYONCU.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/HAL-KOMISYONCU.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Hal Satış Faturası</strong></td>
<td>Hal Komisyoncularının mal üretici veya tüccarın malını satışında düzenledikleri fatura tipidir. Satış fatura tipinde var olan özelliklerinin yanında Mal Sahibi Bilgileri (mal sahibi Ad Soyad /Unvan ve Mal Sahibi VKN/TCKN olmak üzere iki ayrı alan)ve künye numarası sütunlarının olması gerekmektedir. Künye no sütunu zorunlu alan olup  19 Haneden az veya çok girilememelidir.</td>
<td><a href="/resource/xml/HAL-SATIS.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/HAL-SATIS.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Gelir Vergisi(GV) Stopajlı Fatura</strong></td>
<td>Gelir vergisi stopajı uygulanan fatura örneğidir.</td>
<td><a href="/resource/xml/FATURA_14.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_14.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Kurumlar Vergisi(KV) Stopajlı Fatura</strong></td>
<td>Kurumlar vergisi stopajı uygulanan fatura örneğidir.</td>
<td><a href="/resource/xml/FATURA_15.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_15.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Ek Belge İçeren Fatura</strong></td>
<td>Faturanın ekinde belge gönderildiği durumlarda düzenlenecek fatura örneğidir.</td>
<td><a href="/resource/xml/FATURA_16.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_16.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>E-Arşiv Fatura - İnternet</strong></td>
<td>Internet üzerine yapılan satış için düzenlenen fatura tipidir. Bu faturalar alıcısına elektronik ortamda iletilmek zorundadır. Bu faturalar diğer satış faturalarından farklı bir seriden gönderilmeldir.</td>
<td><a href= "/resource/xml/FATURA_21.xml" target="_blank"><img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_21.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>E-Arşiv Fatura - Normal</strong></td>
<td>Internet üzerine yapılan satış dışında düzenlenen fatura tipidir. Bu faturalar alıcısına elektronik ortamda iletilebileceği gibi kağıt olarakta teslim edilebilir.</td>
<td><a href= "/resource/xml/FATURA_22.xml" target="_blank"><img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/FATURA_22.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
</tbody></table>

<h2 id="webservice-endpoint-wsdl-url">Webservice Endpoint (WSDL) URL</h2>

<table><thead>
<tr>
<th>Ürün</th>
<th>Endpoint URL</th>
</tr>
</thead><tbody>
<tr>
<td>Kimlik Doğrulama</td>
<td><a href="https://efaturatest.izibiz.com.tr/AuthenticationWS?wsdl">https://efaturatest.izibiz.com.tr/AuthenticationWS?wsdl</a></td>
</tr>
<tr>
<td>E-Fatura Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/EInvoiceWS?wsdl">https://efaturatest.izibiz.com.tr/EInvoiceWS?wsdl</a></td>
</tr>
<tr>
<td>E-Arşiv Fatura Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/EIArchiveWS/EFaturaArchive?wsdl">https://efaturatest.izibiz.com.tr/EIArchiveWS/EFaturaArchive?wsdl</a></td>
</tr>
<tr>
<td>E-İrsaliye Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/EIrsaliyeWS/EIrsaliye?wsdl">https://efaturatest.izibiz.com.tr/EIrsaliyeWS/EIrsaliye?wsdl</a></td>
</tr>
<tr>
<td>E-Müstahsil Webservis</td>
<td><a href="http://efaturatest.izibiz.com.tr/CreditNoteWS/CreditNote?wsdl">http://efaturatest.izibiz.com.tr/CreditNoteWS/CreditNote?wsdl</a></td>
</tr>
<tr>
<td>E-Mutabakat Webservis</td>
<td><a href="http://efaturatest.izibiz.com.tr/ReconciliationWS?wsdl">http://efaturatest.izibiz.com.tr/ReconciliationWS?wsdl</a></td>
</tr>
<tr>
<td>E-Serbest Meslek Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/SmmWS?wsdl">https://efaturatest.izibiz.com.tr/SmmWS?wsdl</a></td>
</tr>
<tr>
<td>E-ZRapor Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/ZReportWS?wsdl">https://efaturatest.izibiz.com.tr/ZReportWS?wsdl</a></td>
</tr>
<tr>
<td>Faturalama Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/BillingWS?wsdl">https://efaturatest.izibiz.com.tr/BillingWS?wsdl</a></td>
</tr>
</tbody></table>

<h3 id="portal-uygulamas">Portal Uygulaması</h3>

<p>Entegrasyon sürecinde Portal uygulamamızı aşağıda ki durumlar için kullanabilirsiniz:</p>

<ul>
<li>Belgelerin durumunu kontrol</li>
<li>Farklı senaryolar için belge düzenleyerek XML içeriğini kontrol</li>
<li>Alıcı firmanın mükellefiyet sorgulaması</li>
</ul>

<p>Test Portal Adresimiz: <a href="https://portaltest.izibiz.com.tr">https://portaltest.izibiz.com.tr</a></p>

<p>Test portali erişim bilgileri için <strong>entegrasyon@izibiz.com.tr</strong> adresi ile iletişime geçebilirsiniz.</p>

<h2 id="dikkat-edilecek-hususlar">Dikkat Edilecek Hususlar</h2>

<p>Uygulamanızı tasarlarken aşağıda ki bilgiler faydalı olacaktır:</p>

<ul>
<li><strong>Kimlik Doğrulama (Authentication)</strong> Webservisinde bulunan <strong>Login</strong> servisi ile giriş yaparak session id alınacak. Session Id sistemimiz tarafında 8 saate kadar zaman aşımına uğramadığı için kullanıcı giriş yapınca session id alıp bütün kullanım süresinde aynı session id kullanabilirsiniz.</li>
<li><strong>WriteToArchieveExtended</strong> servisi ile UBL formatlı e-arşiv faturası gönderilir.</li>
<li><strong>ReadFromArchive</strong> servisi ile fatura istenilen formatta (XML, PDF, HTML) okunabilir.</li>
<li><strong>CancelEArchiveInvoice</strong> servisi ile hata tespiti veya müşterinin malı iade etmesi sebebi ile iptal edilen faturaları GIBe bildirilmek üzere gönderilir.</li>
<li><strong>GetEArchiveInvoiceStatus</strong> servisi ile özel entegratör sistemine yüklemiş e-Arşiv faturasanın durumu, e-posta durumu ve raporlanma durumunu sorgulayabilirsiniz.</li>
<li><strong>GetEArchiveReport</strong> servisi ile GİBe raporlanan e-arşiv raporlarını dönemlik olarak çekebilirsiniz.</li>
<li><strong>ReadEArchiveReport</strong> serivisi ile GİBe gönderilen rapor detayını sorgulayabilirsiniz.</li>
<li><strong>GetEmailEarchiveInvoice</strong> servisi ile özel entegratör sistemine daha önce yüklenen e-arşiv faturasının tekrardan e-posta olarak gönderilmesini tetikleyebilirsiniz.</li>
<li>E-Fatura ve E-Arşiv faturaları farklı seri ile düzenlenmelidir.</li>
<li>İnternet üzerinden yapılan satışlar için düzenlenen E-Arşiv faturaları ile diğer satışlardan (E-Fatura veya E-Arşiv) farklı serilerden düzenlenmesi zorunludur.</li>
<li>UBL-TR olarak hazırlanan E-Arşiv faturaların ProfileId alanı <code class="prettyprint">EARSIVFATURA</code> olarak yazılmalıdır. Bu alan eğer sizin tarafınızda farklı bir değer belirtilmiş ise sistem bu alan otomatik olarak “EARSIVFATURA” yazacaktır.</li>
<li>E-Arşiv faturalarda faturanın düzenlenme zamanı(IssueTime) zorunludur.</li>
<li>E-Arşiv faturalarda AdditionalDocumentReference alanında DocumentTypeCode ve DocumentType alanları zorunlu alandır.</li>
<li>İnternet üzerinden yapılan satış için düzenlenen faturalar için Ödeme Şekli (PaymentMeans) ve Kargo bilgileri (Delivery) zorunludur.</li>
</ul>

<h2 id="e-ar-iv-entegrasyon-testleri">E-Arşiv Entegrasyon Testleri</h2>

<table><thead>
<tr>
<th>Test</th>
<th>Test Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td>Oturum Açma</td>
<td></td>
</tr>
<tr>
<td>Nihai Tüketiciye Fatura Gönderme</td>
<td></td>
</tr>
<tr>
<td>Firmaya Fatura Gönderme</td>
<td></td>
</tr>
<tr>
<td>Satış Faturası Gönderme</td>
<td></td>
</tr>
<tr>
<td>İade Faturası Gönderme</td>
<td></td>
</tr>
<tr>
<td>Tevkifatlı Fatura Gönderme</td>
<td></td>
</tr>
<tr>
<td>Alıcısına Kağıt Ortamda Teslim Edilecek Fatura Gönderme</td>
<td></td>
</tr>
<tr>
<td>Alıcısına Kağıt Ortamda Teslim Edilecek ve Ayrıca Elektronik Ortamda İletilecek Fatura Gönderme</td>
<td></td>
</tr>
<tr>
<td>Alıcısına Elektronik Ortamda İletilecek Fatura Gönderme</td>
<td></td>
</tr>
<tr>
<td>İnternet Üzerinden Yapılan Satış İçin Fatura Gönderme</td>
<td></td>
</tr>
<tr>
<td>İrsaliyeli Fatura Gönderme</td>
<td></td>
</tr>
<tr>
<td>Raporlanmadan Önce Fatura İptal Etme</td>
<td></td>
</tr>
<tr>
<td>Raporlandıktan Sonra Fatura İptal Etme</td>
<td></td>
</tr>
<tr>
<td>Hatalı Düzenlenmiş Faturayı Tekrar Yüklemek Üzere İptal Etme</td>
<td></td>
</tr>
<tr>
<td>Faturayı Tekrar E-Posta Olarak İletme Talebi Gönderme</td>
<td></td>
</tr>
<tr>
<td>İmzalı Fatura Çekme</td>
<td></td>
</tr>
<tr>
<td>Fatura Görselini Çekme</td>
<td></td>
</tr>
<tr>
<td>Bir Faturanın Durumunu Sorgulama</td>
<td></td>
</tr>
<tr>
<td>Birden Fazla Faturanın Durumunu Sorgulama</td>
<td></td>
</tr>
<tr>
<td>Rapor Listesi Çekme</td>
<td></td>
</tr>
<tr>
<td>Rapor İçeriği Çekme</td>
<td></td>
</tr>
</tbody></table>

<h2 id="stemci-client-rnek-projeler">İstemci (client) Örnek Projeler</h2>

<p>Webservice entegrasyonu için sunucu taraflı programlama diline uygun farklı istemci(client) örnekleri sunar. Bu istemcilerden programlama yapmak istediğiniz dile uygun olanı seçip test bilgileri ile kullanmaya başlayabilirsiniz.</p>

<p><a href="https://github.com/izibiz/izibiz-dotnet-soap-client" target="_blank"><img src="/images/icon_dotnet.png"/></a>
<a href="https://github.com/izibiz/ws-client-php" target="_blank"><img src="/images/icon_php.png" height="100" width="100"/></a>
<a href="https://github.com/izibiz/ws-client-java" target="_blank"><img src="/images/icon_java.png"/></a>
<a href="https://github.com/izibiz/ws-client-delphi" target="_blank"><img src="/images/icon_delphi.png" height="80" width="80"/></a>
<a href="https://github.com/izibiz/ws-client-soapui" target="_blank"><img src="/images/icon_soapui.png" height="90" width="100"/></a></p>

<h2 id="ortak-kullan-lan-eleman">Ortak Kullanılan Eleman</h2>

<p>Her webservis isteğinde gönderilmesi beklen ortak elemandır (REQUEST_HEADER)</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login Metodunda sistem tarafında gönderilen SESSION_ID bilgisi. Sonraki tüm metod çağrılarında parametre olarak metoda geçmelidir.</td>
</tr>
<tr>
<td><strong>APPLICATION_NAME</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Metodu çağıran uygulamanın adı. Mutlaka uygulama adının yazılması gerekmektedir.</td>
</tr>
<tr>
<td><strong>CHANNEL_NAME</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Metodun çağrıldığı kanal adı.</td>
</tr>
<tr>
<td><strong>COMPRESSED</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İçerikte taşınan bilginin ZIP formatında sıkıştırılmış mı gönderildiği/talep edildiği bilgisi. Belge gönderim ve belge okuma servislerinde gönderilen değere göre işlem yapılmaktadır.</td>
</tr>
<tr>
<td><strong>CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İstemci uygulama tarafından işlem için üretilen işlem bilgisi (transaction id) varsa istek esnasında gönderilip, sonuçta alabileceğiniz bir değerdir. request/response eşleşmesi yapmak için kullanılabilir.</td>
</tr>
<tr>
<td><strong>INT_PARENT_TXN_ID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İstemci uygulamasında ana modül entitileri ile ilişkilendirelmek istenen ana transaction ID.</td>
</tr>
<tr>
<td><strong>ACTION_DATE</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Metodun çağrılma tarihi</td>
</tr>
<tr>
<td><strong>CHANGE_INFO</strong></td>
<td>Array</td>
<td>Hayır</td>
<td>Bu eleman ile eğer verilerde bir değişiklik yapılacak ise o değişikliği ait bilgi.</td>
</tr>
<tr>
<td><strong>REASON</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İşlem sebebi. Fatura gönderme, fatura alma vs.</td>
</tr>
<tr>
<td><strong>HOST_NAME</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Metodu çağıran sunucunun host bilgisi.</td>
</tr>
<tr>
<td><strong>SIMULATION_FLAG</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Metod çağrılır ancak arkadaki işlem yapılmaz.</td>
</tr>
</tbody></table>

<h2 id="ba-ar-sonu-nesnesi">Başarı Sonuç Nesnesi</h2>

<p>Webservis işlem başarılı olduğunda response objesi içerisinde <code class="prettyprint">REQUEST_RETURN</code> tipinde sonuç dönülecektir.</p>

<p>Servisten dönen hata sonuç nesnesi şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN</strong></td>
<td>ComplexType</td>
<td>İşlem sonucunu içeren başarılı sonuç objesi</td>
</tr>
<tr>
<td><strong>INT_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda bu eleman dönülmez.</td>
</tr>
<tr>
<td><strong>INVOICE_ID</strong></td>
<td>String</td>
<td>Fatura numarası e-arşiv platformunda atanmışsa atanan fatura numarası dönülür.</td>
</tr>
</tbody></table>

<h2 id="hata-sonu-nesnesi">Hata Sonuç Nesnesi</h2>

<p>Webservis metodunda hata oluşması durumunda response objesi içerisinde <code class="prettyprint">ERROR_TYPE</code> tipinde sonuç dönülecektir.</p>

<p>Servisten dönen hata sonuç nesnesi şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>ERROR_TYPE</strong></td>
<td>ComplexType</td>
<td>İşlem sonucunu içeren başarısız/hatalı sonuç objesi</td>
</tr>
<tr>
<td><strong>INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>ERROR_CODE</strong></td>
<td>String</td>
<td>Hata kodu. Hata kod detayları için ilgili servisteki hata kod listesini inceleyebilirsiniz.</td>
</tr>
<tr>
<td><strong>ERROR_SHORT_DESC</strong></td>
<td>String</td>
<td>Hatanın kısa açıklaması.</td>
</tr>
</tbody></table>

<h2 id="e-ar-iv-fatura-g-nderme-writetoarchieveextended">E-Arşiv Fatura Gönderme (WriteToArchieveExtended)</h2>

<ul>
<li>E-Fatura mükellefi olmayan firmalara veya nihai tüketicilere düzenlenen faturaların özel entegratör sistemine gönderilmesini sağlayan servistir.</li>
<li>Bir istek içerisinde birden fazla fatura göndermek için <strong>ArchiveInvoiceExtendedContent</strong> elemanı çoklanmalıdır.</li>
<li>Internet üzerinde yapılan satış için düzenlenen faturalarında e-arşiv tipi <code class="prettyprint">INTERNET</code> olmak zorundadır. Diğer faturalar için <code class="prettyprint">NORMAL</code> olacaktır.</li>
<li>Eğer E-Arşiv sisteminde müşterinin e-posta gönderme hizmeti yoksa ve e-posta gönderme seçeneği seçilmişse işlem hata alacaktır. Bu durumda özel entegratör ile iletişime geçerek e-posta gönderim hizmetini aktiflemesi talep edilmelidir. Eğer e-posta gönderimi farklı kanallardan yapılacaksa e-posta gönderim parametresini <code class="prettyprint">N</code> olarak gönderiniz.</li>
</ul>

<p><br>
Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur. Faturaları XML formatında sıkıştırılmadan çekmek için mutlaka <code class="prettyprint">COMPRESSED</code> elemanı eklenmeli ve <code class="prettyprint">N</code> değeri gönderilmelidir. Eğer gönderilmezse faturalar sıkıştırılmış/ziplenmiş olarak dönülecektir.</td>
</tr>
<tr>
<td><strong>INVOICE_PROPERTIES.EARSIV_FLAG</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>E-Arşiv fatura için <code class="prettyprint">Y</code> olmalıdır.</td>
</tr>
<tr>
<td><strong>INVOICE_PROPERTIES.EARSIV_PROPERTIES</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>E-Arşiv faturaları için kullanılabilecek parametreler</td>
</tr>
<tr>
<td><strong>EARSIV_PROPERTIES.EARSIV_TYPE</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Gönderilen e-arşiv faturasının tipi: <code class="prettyprint">NORMAL</code> veya <code class="prettyprint">INTERNET</code> değerleri olabilir. Internet üzerinde yapılan satış için düzenlenen faturalarında e-arşiv tipi <code class="prettyprint">INTERNET</code> olmak zorundadır. Diğerleri fatura tipleri için <code class="prettyprint">NORMAL</code> olacaktır.</td>
</tr>
<tr>
<td><strong>EARSIV_PROPERTIES.SUB_STATUS</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Varsayılan değer <code class="prettyprint">NEW</code>. E-Arşiv faturasını göndermek için <code class="prettyprint">NEW</code> değeri gönderilmelidir. Taslaklara yüklemek için ise <code class="prettyprint">DRAFT</code> değeri gönderilebilir.</td>
</tr>
<tr>
<td><strong>EARSIV_PROPERTIES.SERI</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Fatura numara atamasının E-Arşiv platformu üzerinde yapılması istenildiği durumlarda hangi seri ile numara atanacağını belirleyen alandır. Maksimum 3 hane alfanumerik değer içermelidir.  Gönderilecek seri önce portal ekranları kullanılarak e-arşiv sisteminde tanımlanmalıdır. Tanımlanmayan seri gönderildiğinde hata dönülecektir.</td>
</tr>
<tr>
<td><strong>EARSIV_PROPERTIES.EARSIV_EMAIL_FLAG</strong></td>
<td>String</td>
<td>Hayır</td>
<td>E-Arşiv faturasının alıcı tarafa e-posta olarak gönderilmek isteniyorsa <code class="prettyprint">Y</code> değeri gönderilmelidir. Varsayılan değer <code class="prettyprint">N</code> dir. DİKKAT: Eğer E-Arşiv sisteminde müşterinin e-posta gönderme hizmeti yoksa <code class="prettyprint">Y</code> değeri gönderilince hata alacaktır. Bu durumda özel entegratör ile iletişime geçerek e-posta gönderim hizmetini aktiflemesi talep edilmelidir.</td>
</tr>
<tr>
<td><strong>EARSIV_PROPERTIES.EARSIV_EMAIL</strong></td>
<td>String</td>
<td>Hayır</td>
<td>E-Arşiv faturasının iletileceği e-posta adresi. E-Posta formatında olmalıdır.  <code class="prettyprint">EARSIV_EMAIL_FLAG= Y</code> olarak gönderilmişse bu alan zorunludur. DİKKAT: Eğer <code class="prettyprint">EARSIV_EMAIL_FLAG</code> gönderilmemiş veya <code class="prettyprint">N</code> olarak gönderilmişse bu alanda ki değer veritabanına kaydedilecek ama e-posta gönderilmeyecektir.</td>
</tr>
<tr>
<td><strong>EARSIV_PROPERTIES.EARSIV_SMS_FLAG</strong></td>
<td>String</td>
<td>Hayır</td>
<td>E-Arşiv faturasının alıcıya özel entegratör sistemi üzerinden SMS olarak göndermek isteniyorsa <code class="prettyprint">Y</code> değeri gönderilmelidir. Varsayılan değer <code class="prettyprint">N</code> dir. DİKKAT: Eğer E-Arşiv sisteminde müşterinin SMS gönderme hizmeti yoksa <code class="prettyprint">Y</code> değeri gönderilince hata alacaktır. Bu durumda özel entegratör ile iletişime geçerek SMS gönderim hizmetini aktiflemesi talep edilmelidir.</td>
</tr>
<tr>
<td><strong>EARSIV_PROPERTIES.SMS_PHONE_NUMBER</strong></td>
<td>String</td>
<td>Hayır</td>
<td>E-Arşiv faturasının iletileceği 10 hane telefon numarası. <strong>Format: 1234567890</strong>. Telefon numarasının başında 0 olmadığına dikkat ediniz.  <code class="prettyprint">EARSIV_SMS_FLAG= Y</code> olarak gönderilmişse bu alan zorunludur. DİKKAT: Eğer <code class="prettyprint">EARSIV_SMS_FLAG</code> gönderilmemiş veya <code class="prettyprint">N</code> olarak gönderilmişse bu alanda ki değer veritabanına kaydedilecek ama SMS gönderilmeyecektir.</td>
</tr>
<tr>
<td><strong>EARSIV_PROPERTIES.EARCHIVE_TEST_FLAG</strong></td>
<td>String</td>
<td>Hayır</td>
<td><strong>Kullanmayınız</strong> Kullanım sonlandırılmıştır.</td>
</tr>
<tr>
<td><strong>EARSIV_PROPERTIES.ARCH_INVOICE_ID</strong></td>
<td>String</td>
<td>Hayır</td>
<td><strong>Kullanmayınız</strong> Kullanım sonlandırılmıştır.</td>
</tr>
<tr>
<td><strong>EARSIV_PROPERTIES.EARCHIVE_TEST_FLAG</strong></td>
<td>String</td>
<td>Hayır</td>
<td><strong>Kullanmayınız</strong> Kullanım sonlandırılmıştır.</td>
</tr>
<tr>
<td><strong>INVOICE_PROPERTIES.PDF_PROPERTIES</strong></td>
<td>ComplexType</td>
<td>Hayır</td>
<td><strong>Kullanmayınız</strong> Kullanım sonlandırılmıştır.</td>
</tr>
<tr>
<td><strong>INVOICE_PROPERTIES.ARCHIVE_NOTE</strong></td>
<td>String</td>
<td>Hayır</td>
<td>E-Arşiv faturalara not eklenebilecek parametredir.</td>
</tr>
<tr>
<td><strong>INVOICE_PROPERTIES.INVOICE_CONTENT</strong></td>
<td>Base64Binary</td>
<td><strong>Evet</strong></td>
<td>Faturanın UBL-TR formatında ki dosyasının Base64Binary tipinde sıkıştırılmış/ziplenmiş içeriği.</td>
</tr>
</tbody></table>

<h3 id="ba-ar-sonu-nesnesi">Başarı Sonuç Nesnesi</h3>

<p>Webservis işlem başarılı olduğunda response objesi içerisinde <code class="prettyprint">REQUEST_RETURN</code> tipinde sonuç dönülecektir.</p>

<p>Servisten dönen hata sonuç nesnesi şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN</strong></td>
<td>ComplexType</td>
<td>İşlem sonucunu içeren başarılı sonuç objesi</td>
</tr>
<tr>
<td><strong>INT_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı işlemlerde <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda bu eleman dönülmez.</td>
</tr>
<tr>
<td><strong>INVOICE_ID</strong></td>
<td>String</td>
<td>Fatura numarası e-arşiv platformunda atanmışsa atanan fatura numarası dönülür.</td>
</tr>
</tbody></table>

<h3 id="hata-sonu-nesnesi">Hata Sonuç Nesnesi</h3>

<p>Webservis metodunda hata oluşması durumunda response objesi içerisinde <code class="prettyprint">ERROR_TYPE</code> tipinde sonuç dönülecektir.</p>

<p>Servisten dönen hata sonuç nesnesi şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>ERROR_TYPE</strong></td>
<td>ComplexType</td>
<td>İşlem sonucunu içeren başarısız/hatalı sonuç objesi</td>
</tr>
<tr>
<td><strong>INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>ERROR_CODE</strong></td>
<td>String</td>
<td>Hata kodu. Hata kod detayları için ilgili servisteki hata kod listesini inceleyebilirsiniz.</td>
</tr>
<tr>
<td><strong>ERROR_SHORT_DESC</strong></td>
<td>String</td>
<td>Hatanın kısa açıklaması.</td>
</tr>
</tbody></table>

<h2 id="hata-kod-listesi">Hata Kod Listesi</h2>

<table><thead>
<tr>
<th>Hata Kodu</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td>-1</td>
<td>Beklenmedik bir hata oluştu. Lütfen daha sonra tekrar deneyiniz.: {HATA SEBEBİ}</td>
</tr>
<tr>
<td>10001</td>
<td>Sistemde Beklenmedik Bir Hata Oluştu: {HATA SEBEBİ}</td>
</tr>
<tr>
<td>10002</td>
<td>Oturum oluşturulamadı</td>
</tr>
<tr>
<td>10003</td>
<td>Belge kontrolden geçemedi. Hata sebebi: {HATA SEBEBİ}</td>
</tr>
<tr>
<td>10004</td>
<td>Geçersiz oturum. Lütfen oturum açıp tekrar deneyiniz</td>
</tr>
<tr>
<td>10005</td>
<td>Hesabınızın {ÜRÜN ADI} ürün aktif degildir. Lütfen firma yetkiliniz ile görüşünüz.</td>
</tr>
<tr>
<td>10006</td>
<td>Yetkiniz bulunmamaktadır</td>
</tr>
<tr>
<td>10007</td>
<td>İstek ZİP bir dosya içermelidir</td>
</tr>
<tr>
<td>10008</td>
<td>Belirtilen kriterlere uygun kayıt bulunamamıştır {KRITER}</td>
</tr>
<tr>
<td>10009</td>
<td>Gönderilen belge daha önce gönderilmiş bir belge ile eşleşmektedir. Belge Tipi: Belge No: ve ETTN:</td>
</tr>
<tr>
<td>10010</td>
<td>Bir istek  boyutu maksimum 5MB veya 100 adet belge  içerebilir</td>
</tr>
<tr>
<td>10011</td>
<td>Tekrarlanan işlem: kayıt sistemde mevcuttur</td>
</tr>
<tr>
<td>10012</td>
<td>Kullanıcı aktif degil {kullanıcı adı}</td>
</tr>
<tr>
<td>10013</td>
<td>Gönderilen istek geçersizdir. Hata sebebi {HATA SEBEBİ}</td>
</tr>
<tr>
<td>10014</td>
<td>Geçersiz İmza Hata Sebebi: {HATA SEBEBİ}</td>
</tr>
<tr>
<td>10015</td>
<td>Servis desteklenmemektedir. Servis adı</td>
</tr>
<tr>
<td>10016</td>
<td>Müşteri sistemde aktif degildir.</td>
</tr>
<tr>
<td>10017</td>
<td>Gönderilen belge daha önce gönderilmiş bir belge ile eşleşmektedir. ID: ve UUID:</td>
</tr>
<tr>
<td>10018</td>
<td>Yetkisiz erişim tespit edildi! {HATA SEBEBİ}</td>
</tr>
</tbody></table>

<h2 id="e-ar-iv-fatura-okuma-readfromarchive">E-Arşiv Fatura Okuma (ReadFromArchive)</h2>

<p>Özel entegratör sistemine gönderilen e-arşiv faturalarının farklı formatlarda (XML,HTML,PDF) okumasını sağlayan servistir.</p>

<p><br>
Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur. Faturaları XML formatında sıkıştırılmadan çekmek için mutlaka <code class="prettyprint">COMPRESSED</code> elemanı eklenmeli ve <code class="prettyprint">N</code> değeri gönderilmelidir. Eğer gönderilmezse faturalar sıkıştırılmış/ziplenmiş olarak dönülecektir.</td>
</tr>
<tr>
<td><strong>INVOICE_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Evrensel Tekil Tanımlama Numarası (ETTN) ile fatura okumak için kullanılabilir.  GUID formatında</td>
</tr>
<tr>
<td><strong>PORTAL_DIRECTION</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td><code class="prettyprint">OUT</code> değeri gönderilecek.</td>
</tr>
<tr>
<td><strong>EXTERNAL_ID</strong></td>
<td>String</td>
<td>Hayır</td>
<td><strong>Kullanmayınız</strong></td>
</tr>
<tr>
<td><strong>PROFILE</strong></td>
<td>String</td>
<td>Evet</td>
<td>faturayı almak istediğini formattır. PDF, HTML, XML değeri alabilir. XML değeri gönderilmezse faturanın imzalı UBL-TR XML dosyası dönülecektir.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>INVOICE</strong></td>
<td>Base64Binary</td>
<td>Faturanın talep edilen formatta ki içeriği. Eğer <code class="prettyprint">COMPRESSED</code> elemanı <code class="prettyprint">N</code> olarak gönderilmişse sıkıştırılmamış, <code class="prettyprint">COMPRESSED</code> elemanı gönderilmemiş veya <code class="prettyprint">Y</code> değeri gönderilmişse sıkıştırılmış/ziplenmiş olarak dönülür. Sonuç alındıktan sonra ilgili formatta işlem yapılabilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda request return objesi dönülmez.</td>
</tr>
</tbody></table>

<p><br>
Servisten Dönebilecek Hatalar</p>

<table><thead>
<tr>
<th>Hata Açıklaması</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td>Fatura okunurken hata oluştu..Okumaya çalıştığınız UUID: xxxxxxx ile fatura bulunmadı&hellip;</td>
<td>webservis isteğinde zorunlu olan bir veya birden fazla parametre eksik gönderilmiştir.</td>
</tr>
</tbody></table>

<h2 id="e-ar-iv-durum-sorgulama-getearchivestatus">E-Arşiv Durum Sorgulama (GetEArchiveStatus)</h2>

<p>Özel entegratör platformuna gönderilen bir veya birden çok faturanın durumunu sorgulamayı sağlayan servistir.</p>

<p><br>
Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur.</td>
</tr>
<tr>
<td><strong>UUID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Durumu sorgulanacak faturanın Evrensel Tekil Tanımlama Numarası (ETTN). GUID formatında. <strong>Birden fazla faturanın durumunu sorgulamak için bu parametre çoklanır.</strong></td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>INVOICE.HEADER</strong></td>
<td>ComplexType</td>
<td>Kritere uyan faturaların durumlarınını içeren objedir.</td>
</tr>
<tr>
<td><strong>HEADER.INVOICE_ID</strong></td>
<td>String</td>
<td>Fatura numarası</td>
</tr>
<tr>
<td><strong>HEADER.UUID</strong></td>
<td>String</td>
<td>Faturanın Evrensel Tekil Tanımlama Numarası (ETTN)</td>
</tr>
<tr>
<td><strong>HEADER.PROFILE</strong></td>
<td>String</td>
<td>Faturanın senaryosu (<code class="prettyprint">EARSIVFATURA</code>)</td>
</tr>
<tr>
<td><strong>HEADER.INVOICE_DATE</strong></td>
<td>String</td>
<td>Fatura tarihi</td>
</tr>
<tr>
<td><strong>HEADER.STATUS</strong></td>
<td>String</td>
<td>Fatura durumu kodu. <strong>Lütfen E-Arşiv Durum başlığını inceleyiniz.</strong></td>
</tr>
<tr>
<td><strong>HEADER.STATUS_DESC</strong></td>
<td>String</td>
<td>Faturanın durum açıklaması <strong>Lütfen E-Arşiv Durum başlığını inceleyiniz.</strong></td>
</tr>
<tr>
<td><strong>HEADER.EMAIL_STATUS</strong></td>
<td>String</td>
<td>E-Posta gönderim durum kodu. <strong>Lütfen E-Arşiv E-Posta Durum başlığını inceleyiniz.</strong></td>
</tr>
<tr>
<td><strong>HEADER.EMAIL_STATUS_DESC</strong></td>
<td>String</td>
<td>E-Posta gönderim durum açıklaması. <strong>Lütfen E-Arşiv E-Posta Durum başlığını inceleyiniz.</strong></td>
</tr>
<tr>
<td><strong>HEADER.REPORT_ID</strong></td>
<td>String</td>
<td>Faturanın GİB&#39;e gönderilen rapor numarası. Raporlanmamış faturalarda parametre dönülmez.</td>
</tr>
<tr>
<td><strong>HEADER.WEB_KEY</strong></td>
<td>String</td>
<td>Fatura alıcısının e-arşiv platformu üzerinden ulaşabileceği URL.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda request return objesi dönülmez.</td>
</tr>
</tbody></table>

<h3 id="e-ar-iv-durumlar">E-Arşiv Durumları</h3>

<table><thead>
<tr>
<th>Durum Kodu</th>
<th>Durum Açıklaması</th>
</tr>
</thead><tbody>
<tr>
<td>100</td>
<td>KUYRUĞA EKLENDİ</td>
</tr>
<tr>
<td>105</td>
<td>TASLAK OLARAK EKLENDİ</td>
</tr>
<tr>
<td>110</td>
<td>İŞLENİYOR</td>
</tr>
<tr>
<td>120</td>
<td>RAPORLANACAK</td>
</tr>
<tr>
<td>130</td>
<td>RAPORLANDI</td>
</tr>
<tr>
<td>150</td>
<td>RAPORLANMADAN İPTAL EDİLDİ. RAPORLANMAYACAK.</td>
</tr>
<tr>
<td>200</td>
<td>FATURA ID BULUNAMADI</td>
</tr>
</tbody></table>

<h3 id="e-ar-iv-e-posta-g-nderim-durumlar">E-Arşiv E-Posta Gönderim Durumları</h3>

<table><thead>
<tr>
<th>Durum Kodu</th>
<th>Durum Açıklaması</th>
</tr>
</thead><tbody>
<tr>
<td>100</td>
<td>HENÜZ İŞLENMEDİ</td>
</tr>
<tr>
<td>110</td>
<td>İŞLENİYOR</td>
</tr>
<tr>
<td>120</td>
<td>İŞLENDİ</td>
</tr>
<tr>
<td>130</td>
<td>E-MAIL GÖNDERİM SONLANDI</td>
</tr>
</tbody></table>

<h2 id="e-ar-iv-fatura-ptal-cancelearchiveinvoice">E-Arşiv Fatura İptal (CancelEArchiveInvoice)</h2>

<ul>
<li>Özel entegratör platformuna gönderildikten veya GİB&#39;e raporlandıktan sonra eksik veya hata tespit edilen veya müşteri tarafından iade edilen belgenin GIB&#39;e iptal fatura durumunda raporlanmasını sağlayan servistir.</li>
<li>GİB&#39;e raporlamadan tespit edilmiş bir hata sebebi ile hiç raporlanmamasını istenildiği durumlarda belge numarası farklı bir faturaya atanarak gönderilebilir.</li>
<li>İptal edilen değil ama silinen fatura müteselsilliği bozmamak için tekrar yüklenmelidir.</li>
</ul>

<p><br>
Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur.</td>
</tr>
<tr>
<td><strong>INVOICE_ID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İptal edilecek faturanın numarası. FYA201800000001 formatında</td>
</tr>
<tr>
<td><strong>INVOICE_UUID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>İptal edilecek faturanın Evrensel Tekil Tanımlama Numarası (ETTN). GUID formatında</td>
</tr>
<tr>
<td><strong>UPLOAD_FLAG</strong></td>
<td>String</td>
<td>Hayır</td>
<td>E-Arşiv platformunda bulunmayan bir faturayı iptal etmek için <code class="prettyprint">Y</code> degeri gönderilmesi ve <code class="prettyprint">İptal Tarihi</code>, <code class="prettyprint">Toplam Tutar</code> ve <code class="prettyprint">Fatura Tarihi</code> parametrelerinin doldurulması gerekir.</td>
</tr>
<tr>
<td><strong>EARSIV_CANCEL_EMAIL</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İptal edilecek e-arşiv faturasının alıcısına e-posta olarak bildirimi için kullanılacak parametre. Birden fazla e-posta adresini virgül <code class="prettyprint">,</code> ile ayırarak gönderebilirsiniz.  E-Posta formatında olmalıdır. (adsoyad@domain.com)</td>
</tr>
<tr>
<td><strong>DELETE_FLAG</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Sisteme yüklenmiş ama raporlanmamış bir e-Arşiv faturasını hiç raporlamamak için kullanılan parametredir.  <code class="prettyprint">Y</code> değeri gönderilirse fatura GİB&#39;e hiç bir türlü raporlanmayacaktır. <strong>Silinen fatura müteselsilliği bozmamak için tekrar yüklenmelidir.</strong></td>
</tr>
<tr>
<td><strong>IPTAL_TARIHI</strong></td>
<td>String</td>
<td>Hayır</td>
<td>E-Arşiv platformunda bulunmayan bir faturanın iptal isteğinde gönderilecek. Faturanın iptal tarihi.</td>
</tr>
<tr>
<td><strong>TOPLAM_TUTAR</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İptal edilen faturanın ödenecek tutarı.  E-Arşiv platformunda bulunmayan bir faturayı iptal ederken gönderilmelidir.</td>
</tr>
<tr>
<td><strong>IPTAL_NOTU</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İptal edilen faturanın iptal not değeri.  E-Arşiv faturasını iptal ederken not eklemek istendiğinde gönderilmelidir.</td>
</tr>
<tr>
<td><strong>INVOICE_CONTENT</strong></td>
<td>String</td>
<td>Hayır</td>
<td><strong>Kullanmayınız</strong></td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner.</td>
</tr>
</tbody></table>

<h2 id="e-ar-iv-faturas-n-e-posta-olarak-tekrar-g-nderme-getemailearchiveinvoice">E-Arşiv Faturasını E-Posta Olarak Tekrar Gönderme (GetEmailEarchiveInvoice)</h2>

<ul>
<li>E-Arşiv faturasını yükledikten sonra e-posta olarak aynı veya farklı e-postalara tekrar gönderilmesini sağlayan servistir.</li>
<li>Birden fazla e-postaya göndermek için virgül (,) ile ayırarak gönderilmelidir.</li>
</ul>

<p><br>
Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur.</td>
</tr>
<tr>
<td><strong>FATURA_UUID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>E-Posta olarak iletilecek faturanın Evrensel Tekil Tanımlama Numarası (ETTN). GUID formatında.</td>
</tr>
<tr>
<td><strong>FATURA_ID</strong></td>
<td>String</td>
<td>Hayır</td>
<td><strong>Kullanılmamaktadır</strong></td>
</tr>
<tr>
<td><strong>EMAIL</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>E-Arşiv faturasının iletileceği e-posta adresi. E-Posta formatında olmalıdır. Birden fazla e-postaya göndermek için virgül (,) ile ayırarak gönderilmelidir.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda request return objesi dönülmez.</td>
</tr>
</tbody></table>

<h3 id="e-ar-iv-durumlar">E-Arşiv Durumları</h3>

<table><thead>
<tr>
<th>Durum Kodu</th>
<th>Durum Açıklaması</th>
</tr>
</thead><tbody>
<tr>
<td>100</td>
<td>KUYRUĞA EKLENDİ</td>
</tr>
<tr>
<td>105</td>
<td>TASLAK OLARAK EKLENDİ</td>
</tr>
<tr>
<td>110</td>
<td>İŞLENİYOR</td>
</tr>
<tr>
<td>115</td>
<td>İŞLENİYOR</td>
</tr>
<tr>
<td>120</td>
<td>İŞLENDİ</td>
</tr>
<tr>
<td>130</td>
<td>RAPORLANDI</td>
</tr>
<tr>
<td>200</td>
<td>FATURA ID BULUNAMADI</td>
</tr>
</tbody></table>

<h3 id="e-ar-iv-e-posta-g-nderim-durumlar">E-Arşiv E-Posta Gönderim Durumları</h3>

<table><thead>
<tr>
<th>Durum Kodu</th>
<th>Durum Açıklaması</th>
</tr>
</thead><tbody>
<tr>
<td>100</td>
<td>HENÜZ İŞLENMEDİ</td>
</tr>
<tr>
<td>110</td>
<td>İŞLENİYOR</td>
</tr>
<tr>
<td>120</td>
<td>İŞLENDİ</td>
</tr>
<tr>
<td>130</td>
<td>E-MAIL GÖNDERİM SONLANDI</td>
</tr>
</tbody></table>

<h2 id="e-ar-iv-rapor-listesini-ekme-getearchivereport">E-Arşiv Rapor Listesini Çekme (GetEArchiveReport)</h2>

<p>Özel entegratör platformunda mükellefe ait oluşturulan bir döneme ait rapor listesini çekmek için kullanılır. Bu servis sadece rapor listesini döndecektir. Servisin döndüğü raporlara ait içerikleri almak için <strong>ReadEArchiveReport</strong> servisi kullanılabilir.</p>

<p><br>
Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur.</td>
</tr>
<tr>
<td><strong>REPORT_PERIOD</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Rapor listesinin alınmak istenilen dönem bilgisi. Örnek: Mayıs 2018 dönemi için 201805</td>
</tr>
<tr>
<td><strong>REPORT_STATUS_FLAG</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Rapor durumunun sonuca eklenmesi isteniyorsa <code class="prettyprint">Y</code>, değilse <code class="prettyprint">N</code> değeri  gönderilmelidir.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REPORT</strong></td>
<td>ComplexType</td>
<td>Dönem için oluşturulan raporların listesi. Birden fazla rapor varsa REPORT objesi çoklu olur.</td>
</tr>
<tr>
<td><strong>REPORT.REPORT_NO</strong></td>
<td>String</td>
<td>Raporun numarası GUID formatında</td>
</tr>
<tr>
<td><strong>REPORT.STATUS</strong></td>
<td>String</td>
<td>Raporun durumu. İşlenmiş rapor durumu <code class="prettyprint">SUCCEED</code> olur.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda request return objesi dönülmez.</td>
</tr>
</tbody></table>

<h2 id="e-ar-iv-rapor-ekme-readearchivereport">E-Arşiv Rapor Çekme (ReadEArchiveReport)</h2>

<p>Mükellef için GİB&#39;e gönderilen raporun imzalı XML dosyasını okumayı sağlayan servistir.</p>

<p><br>
Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur.</td>
</tr>
<tr>
<td><strong>RAPOR_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Detay/içeriği çekilecek raporun IDsi. Rapor IDsine <strong>GetEArchiveReport</strong> servisini kullanarak erişebilirsiniz.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>EARCHIVEREPORT</strong></td>
<td>Base64Binary</td>
<td>GİB&#39;e gönderilen raporun imzalı XML dosyasının sıkıştırılmış/ziplenmiş ve Base64 encode edilmiş değeri.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda request return objesi dönülmez.</td>
</tr>
</tbody></table>

          <h1 id="e-rsaliye-webservisi">E-İrsaliye Webservisi</h1>

<p>e-İrsaliye servisi, irsaliye gönderimini sağlayan uygulamadır.</p>

<ol>
<li>Hazırlanan E-İrsaliye XML dosyasının gönderici ve alıcısı ürünleri sevk eden ve teslim alan firma bilgilerini içerecektir. XML içerisinde GİB başkanlığına ait bilgi bulunmayacaktır.</li>
<li>Alıcısı E-İrsaliye mükellefi olan firmaların posta kutusu etiketine gönderilecek.</li>
<li>Alıcısı E-İrsaliye mükellefi olmayan firmalara ait belgeler Gelir İdaresi Başkanlığında açılan sanal posta kutusu etiketine gönderilecektir. 3900892152-urn:mail:irsaliyepk@gib.gov.tr</li>
<li>Gönderilen e-irsaliye GİB sisteminde başarıyla işlendikten sonra irsaliye yazdırılıp kargoya verilebilir.</li>
</ol>

<h2 id="g-b-dok-manlar">GİB Dokümanları</h2>

<table><thead>
<tr>
<th>Doküman</th>
<th>Açıklama</th>
<th>İndir</th>
</tr>
</thead><tbody>
<tr>
<td><strong>UBL-TR İrsaliye</strong></td>
<td>UBL-TR v1.2 (UBL 2.1 Türkiye Özelleştirmesi) paketinde yer alan sevk irsaliyesi belgesinde geçen elemanlara ait XSD, tanımlama, kullanım şekilleri, kardinaliteler hakkında bilgi vermek ve örnek kullanım şekillerini göstermek amacı ile hazırlanmıştır.</td>
<td><a href="/resource/BELGELER/UBL-TR irsaliye - V 1.0.pdf"><img src="/images/icon_pdf.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>UBL-TR İrsaliye Yanıtı</strong></td>
<td>UBL-TR v1.2 (UBL 2.1 Türkiye Özelleştirmesi) paketinde yer alan irsaliye Yanıtı belgesinde geçen elemanlara ait XSD, tanımlama, kullanım şekilleri, kardinaliteler hakkında bilgi vermek ve örnek kullanım şekillerini göstermek amacı ile hazırlanmıştır.</td>
<td><a href="/resource/BELGELER/UBL-TR irsaliye Yaniti - V 1.0.pdf"><img src="/images/icon_pdf.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>UBL-TR Ortak Elemanlar</strong></td>
<td>UBL-TR (UBL 2.1 Türkiye Özelleştirmesi) paketinde yer alan belgelerde geçmesi muhtemel elemanlara ait (ortak elemanlar örneğin: Adres, Parasal Toplamlar, Taraf gibi) XSD, açıklama, kullanım şartları, kardinaliteler hakkında bilgi vermek ve örnek kullanım şekillerini göstermek amacı ile hazırlanmıştır.</td>
<td><a href="/resource/BELGELER/UBL-TR Ortak Elemanlar - V 0.7.pdf"><img src="/images/icon_pdf.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>UBL-TR Kod Listeleri</strong></td>
<td>UBL-TR kapsamında kullanılan Kodlama Sistemleri ve Kimlik Şemaları hakkında bilgi vermek amacı ile hazırlanmıştır.</td>
<td><a href="/resource/BELGELER/UBL-TR Kod Listeleri - V 1.18.pdf"><img src="/images/icon_pdf.png" height="40" width="35"/></a></td>
</tr>
</tbody></table>

<h2 id="ubl-rsaliye-senaryolar">UBL-İrsaliye Senaryoları</h2>

<p>E-İrsaliye sistemi üzerinden düzenlebilecek ve gönderilebilecek e-irsaliye senaryoları ve örnek  XML dosyaları aşağıda listelenmiştir.</p>

<table><thead>
<tr>
<th>Senaryosu</th>
<th>Açıklama</th>
<th>XML</th>
<th>HTML</th>
</tr>
</thead><tbody>
<tr>
<td><strong>Temel e-İrsaliye</strong></td>
<td>Malların sevkiyatını sağlayan taraf e-İrsaliyeyi Malları teslim alan tarafa gönderir.</td>
<td><a href="/resource/xml/irsaliye_temel_ornek.xml?dummy=dummy" target = "_blank" > <img src = "/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/irsaliye_temel_ornek.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Kısmi Gönderim İçeren e-İrsaliye</strong></td>
<td>Malların sevkiyatını sağlayan taraf sipariş edilen malların bir kısmını gönderdiği durumlarda düzenlediği senaryodur.</td>
<td><a href="/resource/xml/irsaliye_kismi_ornek.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/irsaliye_kismi_ornek.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Farklı Tarafların Bulunduğu e-İrsaliye</strong></td>
<td>Malların Sevkiyatını Sağlayan, Malları Teslim Alan, Malların Satın Alımını Sağlayan, Malları Satan ve Tüm sürecin başlamasını Sağlayan Alıcı tarafın bulunduğu e-İrsaliye Senaryosudur.</td>
<td><a href="/resource/xml/irsaliye_farklitaraf_ornek.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/irsaliye_farklitaraf_ornek.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
</tbody></table>

<h2 id="ubl-rsaliye-yan-t-senaryolar">UBL-İrsaliye Yanıt Senaryoları</h2>

<p>E-İrsaliye sistemi üzerinden gönderilebilecek e-irsaliye yanıt senaryoları ve örnek  XML dosyaları aşağıda listelenmiştir.</p>

<table><thead>
<tr>
<th>Senaryosu</th>
<th>Açıklama</th>
<th>XML</th>
<th>HTML</th>
</tr>
</thead><tbody>
<tr>
<td><strong>Bütün Sevkiyatı Kabul Eden e-İrsaliye Yanıtı</strong></td>
<td>Malların teslim alan tarafın bütün malları kabul ettiğini bildiren e-İrsaliye yanıt senaryosudur.</td>
<td><a href="/resource/xml/irsaliyeyanit_kabul_ornek.xml" target = "_blank"> <img src = "/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/irsaliyeyanit_kabul_ornek.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Şikayet İçeren e-İrsaliye Yanıtı</strong></td>
<td>e-İrsaliye&#39;deki tüm ürünler malları alan taraf tarafından kabul edilmiştir. Fakat mallar geç gönderildiği için şikayette bulunduğu e-İrsaliye yanıt senaryosudur.</td>
<td><a href="/resource/xml/irsaliyeyanit_sikayet_ornek.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/irsaliyeyanit_sikayet_ornek.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Hasarlı Ürünleri Bildiren e-İrsaliye Yanıtı</strong></td>
<td>Malları teslim alan tarafın gelen e-İrsaliye&#39;deki malların ilk iki kaleminde hasarlı ürünler bulunduğunu bildiren e-İrsaliye senaryosudur.</td>
<td><a href="/resource/xml/irsaliyeyanit_hasarli_ornek.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/irsaliyeyanit_hasarli_ornek.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Fazla/Eksik Ürünlerin Bildirilmesine Dair e-İrsaliye Yanıtı</strong></td>
<td>Malları teslim alan tarafın fazla ürünlerin iadesine ve eksik ürünlerin bildirilmesine dair düzenlediği e-İrsaliye yanıt senaryosudur.</td>
<td><a href="/resource/xml/irsaliyeyanit_fazlaeksik_ornek.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
<td><a href="/resource/xml/irsaliyeyanit_fazlaeksik_ornek.html" target="_blank"><img src="/images/icon_html.png" height="40" width="35"/></a></td>
</tr>
</tbody></table>

<h2 id="webservice-endpoint-wsdl-url">Webservice Endpoint (WSDL) URL</h2>

<table><thead>
<tr>
<th>Ürün</th>
<th>Endpoint URL</th>
</tr>
</thead><tbody>
<tr>
<td>Kimlik Doğrulama</td>
<td><a href="https://efaturatest.izibiz.com.tr/AuthenticationWS?wsdl">https://efaturatest.izibiz.com.tr/AuthenticationWS?wsdl</a></td>
</tr>
<tr>
<td>E-Fatura Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/EInvoiceWS?wsdl">https://efaturatest.izibiz.com.tr/EInvoiceWS?wsdl</a></td>
</tr>
<tr>
<td>E-Arşiv Fatura Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/EIArchiveWS/EFaturaArchive?wsdl">https://efaturatest.izibiz.com.tr/EIArchiveWS/EFaturaArchive?wsdl</a></td>
</tr>
<tr>
<td>E-İrsaliye Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/EIrsaliyeWS/EIrsaliye?wsdl">https://efaturatest.izibiz.com.tr/EIrsaliyeWS/EIrsaliye?wsdl</a></td>
</tr>
<tr>
<td>E-Müstahsil Webservis</td>
<td><a href="http://efaturatest.izibiz.com.tr/CreditNoteWS/CreditNote?wsdl">http://efaturatest.izibiz.com.tr/CreditNoteWS/CreditNote?wsdl</a></td>
</tr>
<tr>
<td>E-Mutabakat Webservis</td>
<td><a href="http://efaturatest.izibiz.com.tr/ReconciliationWS?wsdl">http://efaturatest.izibiz.com.tr/ReconciliationWS?wsdl</a></td>
</tr>
<tr>
<td>E-Serbest Meslek Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/SmmWS?wsdl">https://efaturatest.izibiz.com.tr/SmmWS?wsdl</a></td>
</tr>
<tr>
<td>E-ZRapor Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/ZReportWS?wsdl">https://efaturatest.izibiz.com.tr/ZReportWS?wsdl</a></td>
</tr>
<tr>
<td>Faturalama Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/BillingWS?wsdl">https://efaturatest.izibiz.com.tr/BillingWS?wsdl</a></td>
</tr>
</tbody></table>

<h3 id="portal-uygulamas">Portal Uygulaması</h3>

<p>Entegrasyon sürecinde Portal uygulamamızı aşağıda ki durumlar için kullanabilirsiniz:</p>

<ul>
<li>Belgelerin durumunu kontrol</li>
<li>Farklı senaryolar için belge düzenleyerek XML içeriğini kontrol</li>
<li>Alıcı firmanın mükellefiyet sorgulaması</li>
</ul>

<p>Test Portal Adresimiz: <a href="https://portaltest.izibiz.com.tr">https://portaltest.izibiz.com.tr</a></p>

<p>Test portali erişim bilgileri için <strong>entegrasyon@izibiz.com.tr</strong> adresi ile iletişime geçebilirsiniz.</p>

<h2 id="test-hesaplar">Test Hesaplar</h2>

<p>Test sürecinde düzenlenen faturaların/irsaliyelerin göndericisi, alıcısı ve etiketler için aşağıda ki bilgiler kullanılmalıdır.</p>

<table><thead>
<tr>
<th>Gönderici VKN</th>
<th>Gönderici Etiket</th>
<th>Alıcı VKN</th>
<th>Alıcı Etiket</th>
</tr>
</thead><tbody>
<tr>
<td>4840847211</td>
<td>urn:mail:defaultgb@izibiz.com.tr</td>
<td>4840847211</td>
<td>urn:mail:defaultpk@izibiz.com.tr</td>
</tr>
</tbody></table>

<h2 id="dikkat-edilecek-hususlar">Dikkat Edilecek Hususlar</h2>

<p>E-İrsaliye uygulamanızı tasarlarken aşağıda ki bilgiler faydalı olacaktır:</p>

<ol>
<li><p><strong>Kimlik Doğrulama (Authentication)</strong> Webservisinde bulunan <strong>Login</strong> metodu ile oturum açarak session id alınacaktır. Session Id sistemimiz tarafında 8 saate kadar zaman aşımına uğramadığı için kullanıcı giriş yapınca session id alıp bütün kullanım süresinde aynı session id kullanabilirsiniz.</p></li>
<li><p><strong>Kimlik Doğrulama (Authentication)</strong> Webservisinde bulunan <strong>GetGibUserList</strong> metodu ile GIB e-irsaliye mükellef listesini her 2 saatte entegrasyon sunucularından çekmenizi tavsiye ederiz. Güncel listeyi çektikten sonra cari listenizde ki firmaların e-irsaliye mükellefi olup olmadığını güncellemelisiniz.</p></li>
<li><p>E-İrsaliyeler UBL-TR-DesptachAdvice formatında hazırlanacaktır. Her e-irsaliye içerisinde görüntülenmesini sağlayan XSLT dokümanı olmalıdır.</p></li>
<li><p><strong>LoadDespatchAdvice</strong> metodu ile irsaliye dosyalarının özel entegratör portalında taslak olarak yüklenmesi sağlanabilir.</p></li>
<li><p><strong>SendDespatchAdvice</strong> metodu ile irsaliye gönderimi yapılacak. Gönderim esnasında eğer alıcı mükellefe ait birden fazla Posta Kutusu bulunuyorsa ekranda seçilerek gönderilmesi sağlanmalı. Sadece 1 adet PK adresi varsa seçim yapılmadan gönderim sağlanabilir.</p></li>
<li><p><strong>GetDespatchAdviceStatus</strong> metodu ile gelen/giden irsaliyelerin durumları sorgulanacak. Nihai duruma erişene kadar belgenin durumu entegrasyon sunucularından minumum 4 saatte bir sorgulanmalıdır. <strong>Sık sorgulama yapmayınız.</strong></p></li>
<li><p><strong>GetDespatchAdvice</strong> metodu ile firmaya gelen irsaliyeleri müşteri bilgisayarına aktarılır. Sisteme gelen yeni irsaliyeleri almanız gerekmektedir. Servis ile yeni gelen en fazla 100 adet belgeyi çekebilirsiniz. Eğer dönen listede 100 adet kayıt varsa yeniden <strong>GetDespatchAdvice</strong> servisi çağırılarak başka belge olup olmadığı kontrol edilmelidir. Dönen listede 100den az kayıt varsa tekrar sorgulama yapmaya gerek yoktur.</p></li>
<li><p><strong>MarkDespatchAdvice</strong> metodu ile başarılı şekilde teslim alınan irsaliyeler eirsaliye sisteminde okundu olarak işaretlenir. Böylece bir sonra ki <strong>GetDespatchAdvice</strong> servisi çağrılınca aynı kayıt dönülmez.</p></li>
<li><p><strong>Logout</strong> metodu ile kullanıcı e-fatura programını kapatınca veya sizin belirlediğiniz bir sürede oturumu
kapatabilirsiniz.</p></li>
</ol>

<h2 id="entegrasyon-test-senaryolar">Entegrasyon Test Senaryoları</h2>

<h2 id="stemci-client-rnek-projeler">İstemci (client) Örnek Projeler</h2>

<p>Webservice entegrasyonu için sunucu taraflı programlama diline uygun farklı istemci(client) örnekleri sunar. Bu istemcilerden programlama yapmak istediğiniz dile uygun olanı seçip test bilgileri ile kullanmaya başlayabilirsiniz.</p>

<p><a href="https://github.com/izibiz/izibiz-dotnet-soap-client" target="_blank"><img src="/images/icon_dotnet.png"/></a>
<a href="https://github.com/izibiz/ws-client-php" target="_blank"><img src="/images/icon_php.png" height="100" width="100"/></a>
<a href="https://github.com/izibiz/ws-client-java" target="_blank"><img src="/images/icon_java.png"/></a>
<a href="https://github.com/izibiz/ws-client-delphi" target="_blank"><img src="/images/icon_delphi.png" height="80" width="80"/></a>
<a href="https://github.com/izibiz/ws-client-soapui" target="_blank"><img src="/images/icon_soapui.png" height="90" width="100"/></a></p>

<h2 id="ortak-kullan-lan-eleman">Ortak Kullanılan Eleman</h2>

<p>Her webservis isteğinde gönderilmesi beklen ortak elemandır (REQUEST_HEADER)</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login Metodunda sistem tarafında gönderilen SESSION_ID bilgisi. Sonraki tüm metod çağrılarında parametre olarak metoda geçmelidir.</td>
</tr>
<tr>
<td><strong>APPLICATION_NAME</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Metodu çağıran uygulamanın adı. Mutlaka uygulama adının yazılması gerekmektedir.</td>
</tr>
<tr>
<td><strong>CHANNEL_NAME</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Metodun çağrıldığı kanal adı.</td>
</tr>
<tr>
<td><strong>COMPRESSED</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İçerikte taşınan bilginin ZIP formatında sıkıştırılmış mı gönderildiği/talep edildiği bilgisi. Belge gönderim ve belge okuma servislerinde gönderilen değere göre işlem yapılmaktadır.</td>
</tr>
<tr>
<td><strong>CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İstemci uygulama tarafından işlem için üretilen işlem bilgisi (transaction id) varsa istek esnasında gönderilip, sonuçta alabileceğiniz bir değerdir. request/response eşleşmesi yapmak için kullanılabilir.</td>
</tr>
<tr>
<td><strong>INT_PARENT_TXN_ID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İstemci uygulamasında ana modül entitileri ile ilişkilendirelmek istenen ana transaction ID.</td>
</tr>
<tr>
<td><strong>ACTION_DATE</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Metodun çağrılma tarihi</td>
</tr>
<tr>
<td><strong>CHANGE_INFO</strong></td>
<td>Array</td>
<td>Hayır</td>
<td>Bu eleman ile eğer verilerde bir değişiklik yapılacak ise o değişikliği ait bilgi.</td>
</tr>
<tr>
<td><strong>REASON</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İşlem sebebi. Fatura gönderme, fatura alma vs.</td>
</tr>
<tr>
<td><strong>HOST_NAME</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Metodu çağıran sunucunun host bilgisi.</td>
</tr>
<tr>
<td><strong>SIMULATION_FLAG</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Metod çağrılır ancak arkadaki işlem yapılmaz.</td>
</tr>
</tbody></table>

<h2 id="ba-ar-sonu-nesnesi">Başarı Sonuç Nesnesi</h2>

<p>Webservis işlem başarılı olduğunda response objesi içerisinde <code class="prettyprint">REQUEST_RETURN</code> tipinde sonuç dönülecektir.</p>

<p>Servisten dönen hata sonuç nesnesi şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN</strong></td>
<td>ComplexType</td>
<td>İşlem sonucunu içeren başarılı sonuç objesi</td>
</tr>
<tr>
<td><strong>INT_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda bu eleman dönülmez.</td>
</tr>
<tr>
<td><strong>INVOICE_ID</strong></td>
<td>String</td>
<td>Fatura numarası e-arşiv platformunda atanmışsa atanan fatura numarası dönülür.</td>
</tr>
</tbody></table>

<h2 id="hata-sonu-nesnesi">Hata Sonuç Nesnesi</h2>

<p>Webservis metodunda hata oluşması durumunda response objesi içerisinde <code class="prettyprint">ERROR_TYPE</code> tipinde sonuç dönülecektir.</p>

<p>Servisten dönen hata sonuç nesnesi şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>ERROR_TYPE</strong></td>
<td>ComplexType</td>
<td>İşlem sonucunu içeren başarısız/hatalı sonuç objesi</td>
</tr>
<tr>
<td><strong>INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>ERROR_CODE</strong></td>
<td>String</td>
<td>Hata kodu. Hata kod detayları için ilgili servisteki hata kod listesini inceleyebilirsiniz.</td>
</tr>
<tr>
<td><strong>ERROR_SHORT_DESC</strong></td>
<td>String</td>
<td>Hatanın kısa açıklaması.</td>
</tr>
</tbody></table>

<h2 id="e-rsaliye-g-nderme-senddespatchadvice">E-İrsaliye Gönderme (SendDespatchAdvice)</h2>

<ul>
<li>E-İrsaliye Platformu üzerinden 1 ya da daha fazla e-irsaliyeyi GIB (Gelir İdaresi Başkanlığı) E-İrsaliye
sistemine gönderir.</li>
<li>E-İrsaliye gönderim esnasında hatalı duruma geçen irsaliyeler bu servis ile tekrar gönderilebilir.</li>
<li>Bir alıcıya birden fazla irsaliye gönderilebilir.</li>
</ul>

<p><br>
Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur. İrsaliye sıkıştırılarak/ziplenerek gönderiliyorsa <code class="prettyprint">COMPRESSED</code> alanı gönderilmeyebilir veya <code class="prettyprint">Y</code> olarak gönderilebilir. <strong>XML formatında sıkıştırılmadan yüklemek için mutlaka <code class="prettyprint">COMPRESSED</code> eleman eklenmeli ve <code class="prettyprint">N</code> değeri gönderilmelidir.</strong></td>
</tr>
<tr>
<td><strong>SENDER</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İrsaliye gönderen tarafın vergi kimlik numarasını <code class="prettyprint">vkn</code> attribute içerisine, gönderici birim etiketini <code class="prettyprint">alias</code> attribute eklenmelidir. Eğer eleman gönderilmezse oturum açılan kullanıcının bağlı olduğu hesapta ki VKN ve gönderici birim etiketi kullanılacaktır. <strong>Sender elemanı gönderilmesini tavsiye ederiz.</strong></td>
</tr>
<tr>
<td><strong>RECEIVER</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td><strong>E-İrsaliye mükellefi</strong> ise firmanın VKN/TCKNosunu <code class="prettyprint">vkn</code> attribute içerisine, posta kutusu etiketini <code class="prettyprint">alias</code> attribute içerisine eklenmelidir. Eğer <strong>E-irsaliye mükellefi</strong> değil ise GİB&#39;de tanımlanan sanal etikete gönderileceği için <code class="prettyprint">vkn</code> olarak GİB&#39;in VKNsi (3900892152), posta kusutusu olarakta GİB&#39;de <strong>urn:mail:irsaliyepk@gib.gov.tr</strong> değerini <code class="prettyprint">alias</code> attribute içerisine eklenmelidir.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICE.CONTENT</strong></td>
<td>Base64Binary</td>
<td><strong>Evet</strong></td>
<td>İrsaliyenin Base64Binary olarak encode edilmiş XML veya Ziplenmiş içeriği. Bir istek ile çoklu XML gönderimi yapılabilir. <strong>Birden fazla irsaliye göndermek için DESPATCHADVICE elemanı çoklanmalıdır.</strong></td>
</tr>
</tbody></table>

<h3 id="ba-ar-sonu-nesnesi">Başarı Sonuç Nesnesi</h3>

<p>Webservis işlem başarılı olduğunda response objesi içerisinde <code class="prettyprint">REQUEST_RETURN</code> tipinde sonuç dönülecektir.</p>

<p>Servisten dönen hata sonuç nesnesi şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN</strong></td>
<td>ComplexType</td>
<td>İşlem sonucunu içeren başarılı sonuç objesi</td>
</tr>
<tr>
<td><strong>INT_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı işlemlerde <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda bu eleman dönülmez.</td>
</tr>
<tr>
<td><strong>INVOICE_ID</strong></td>
<td>String</td>
<td>Fatura numarası e-arşiv platformunda atanmışsa atanan fatura numarası dönülür.</td>
</tr>
</tbody></table>

<h3 id="hata-sonu-nesnesi">Hata Sonuç Nesnesi</h3>

<p>Webservis metodunda hata oluşması durumunda response objesi içerisinde <code class="prettyprint">ERROR_TYPE</code> tipinde sonuç dönülecektir.</p>

<p>Servisten dönen hata sonuç nesnesi şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>ERROR_TYPE</strong></td>
<td>ComplexType</td>
<td>İşlem sonucunu içeren başarısız/hatalı sonuç objesi</td>
</tr>
<tr>
<td><strong>INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>ERROR_CODE</strong></td>
<td>String</td>
<td>Hata kodu. Hata kod detayları için ilgili servisteki hata kod listesini inceleyebilirsiniz.</td>
</tr>
<tr>
<td><strong>ERROR_SHORT_DESC</strong></td>
<td>String</td>
<td>Hatanın kısa açıklaması.</td>
</tr>
</tbody></table>

<h3 id="hata-kod-listesi">Hata Kod Listesi</h3>

<table><thead>
<tr>
<th>Hata Kodu</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td>-1</td>
<td>Beklenmedik bir hata oluştu. Lütfen daha sonra tekrar deneyiniz.</td>
</tr>
<tr>
<td>10001</td>
<td>Sistemde Beklenmedik Bir Hata Oluştu: {HATA SEBEBİ}</td>
</tr>
<tr>
<td>10002</td>
<td>Oturum oluşturulamadı</td>
</tr>
<tr>
<td>10003</td>
<td>Belge Şematron Kontrolünden Geçemedi: {HATA SEBEBİ}</td>
</tr>
<tr>
<td>10004</td>
<td>Geçersiz oturum. Lütfen tekrar oturum oluşturunuz ve tekrar deneyiniz</td>
</tr>
<tr>
<td>10005</td>
<td>Hesabınızın {EIRSALIYE} ürün aktif degildir</td>
</tr>
<tr>
<td>10006</td>
<td>Yetkiniz bulunmamaktadır</td>
</tr>
<tr>
<td>10007</td>
<td>İstek ZİP bir dosya içermelidir</td>
</tr>
<tr>
<td>10008</td>
<td>Belirtilen kriterlere uygun kayıt bulunamamıştır</td>
</tr>
<tr>
<td>10009</td>
<td>Gönderilen belge daha önce gönderilmiş bir belge ile eşleşmektedir. ID: ve UUID:</td>
</tr>
<tr>
<td>10010</td>
<td>Bir istek  boyutu maksimum 5MB veya 100 adet belge  içerebilir</td>
</tr>
<tr>
<td>10011</td>
<td>Tekrarlanan işlem: kayıt sistemde mevcuttur</td>
</tr>
<tr>
<td>10012</td>
<td>Kullanıcı aktif degil {kullanıcı adı}</td>
</tr>
<tr>
<td>10013</td>
<td>Gönderilen istek geçersizdir. Hata sebebi {0}</td>
</tr>
<tr>
<td>10014</td>
<td>Geçersiz İmza</td>
</tr>
<tr>
<td>10015</td>
<td>Servis desteklenmemektedir. Servis adı</td>
</tr>
<tr>
<td>10016</td>
<td>Müşteri sistemde aktif degildir.</td>
</tr>
<tr>
<td>10017</td>
<td>Gönderilen belge daha önce gönderilmiş bir belge ile eşleşmektedir. ID: ve UUID:</td>
</tr>
<tr>
<td>10018</td>
<td>Yetkisiz erişim tespit edildi! {HATA SEBEBİ}</td>
</tr>
</tbody></table>

<h2 id="taslak-rsaliye-y-kleme-loaddespatchadvice">Taslak İrsaliye Yükleme (LoadDespatchAdvice)</h2>

<ul>
<li>Özel entegratör platformu üzerinden 1 yada daha fazla irsaliyeyi sisteme yükler.</li>
<li>Eğer irsaliye numarası atanmışsa (16 hane ise) şema ve şematron kontrolünden geçirilir. İrsaliye numarası atanmamışsa şema ve şematron kontrolü yapılmaz.</li>
<li>Aynı İrsaliye tekrar taslaklara yüklenmesine müsade edilir. Farklı kayıt oluşturulmaz. Oluşan kayıt yeni içerik ile güncellenir.</li>
</ul>

<p><br>
Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur. İrsaliye sıkıştırılarak/ziplenerek gönderiliyorsa <code class="prettyprint">COMPRESSED</code> alanı gönderilmeyebilir veya <code class="prettyprint">Y</code> olarak gönderilebilir. <strong>XML formatında sıkıştırılmadan yüklemek için mutlaka <code class="prettyprint">COMPRESSED</code> eleman eklenmeli ve <code class="prettyprint">N</code> değeri gönderilmelidir.</strong></td>
</tr>
<tr>
<td><strong>DESPATCHADVICE</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>İrsaliye numarasını <code class="prettyprint">ID</code> attribute içerisine, Evrensel tekil tanımlama numarasını (ETTN) <code class="prettyprint">UUID</code> attribute eklenmelidir.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICE.CONTENT</strong></td>
<td>Base64Binary</td>
<td>Evet</td>
<td>İrsaliyenin Base64Binary olarak encode edilmiş XML veya Ziplenmiş içeriği. Bir istek ile çoklu XML gönderimi yapılabilir. <strong>Birden fazla irsaliye göndermek için DESPATCHADVICE elemanı çoklanmalıdır.</strong></td>
</tr>
</tbody></table>

<h3 id="ba-ar-sonu-nesnesi">Başarı Sonuç Nesnesi</h3>

<p>Webservis işlem başarılı olduğunda response objesi içerisinde <code class="prettyprint">REQUEST_RETURN</code> tipinde sonuç dönülecektir.</p>

<p>Servisten dönen hata sonuç nesnesi şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN</strong></td>
<td>ComplexType</td>
<td>İşlem sonucunu içeren başarılı sonuç objesi</td>
</tr>
<tr>
<td><strong>INT_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı işlemlerde <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda bu eleman dönülmez.</td>
</tr>
<tr>
<td><strong>INVOICE_ID</strong></td>
<td>String</td>
<td>Fatura numarası e-arşiv platformunda atanmışsa atanan fatura numarası dönülür.</td>
</tr>
</tbody></table>

<h3 id="hata-sonu-nesnesi">Hata Sonuç Nesnesi</h3>

<p>Webservis metodunda hata oluşması durumunda response objesi içerisinde <code class="prettyprint">ERROR_TYPE</code> tipinde sonuç dönülecektir.</p>

<p>Servisten dönen hata sonuç nesnesi şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>ERROR_TYPE</strong></td>
<td>ComplexType</td>
<td>İşlem sonucunu içeren başarısız/hatalı sonuç objesi</td>
</tr>
<tr>
<td><strong>INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>ERROR_CODE</strong></td>
<td>String</td>
<td>Hata kodu. Hata kod detayları için ilgili servisteki hata kod listesini inceleyebilirsiniz.</td>
</tr>
<tr>
<td><strong>ERROR_SHORT_DESC</strong></td>
<td>String</td>
<td>Hatanın kısa açıklaması.</td>
</tr>
</tbody></table>

<h3 id="hata-kod-listesi">Hata Kod Listesi</h3>

<table><thead>
<tr>
<th>Hata Kodu</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td>-1</td>
<td>Beklenmedik bir hata oluştu. Lütfen daha sonra tekrar deneyiniz.</td>
</tr>
<tr>
<td>10001</td>
<td>Sistemde Beklenmedik Bir Hata Oluştu: {HATA SEBEBİ}</td>
</tr>
<tr>
<td>10002</td>
<td>Oturum oluşturulamadı</td>
</tr>
<tr>
<td>10003</td>
<td>Belge Şematron Kontrolünden Geçemedi: {HATA SEBEBİ}</td>
</tr>
<tr>
<td>10004</td>
<td>Geçersiz oturum. Lütfen tekrar oturum oluşturunuz ve tekrar deneyiniz</td>
</tr>
<tr>
<td>10005</td>
<td>Hesabınızın {EIRSALIYE} ürün aktif degildir</td>
</tr>
<tr>
<td>10006</td>
<td>Yetkiniz bulunmamaktadır</td>
</tr>
<tr>
<td>10007</td>
<td>İstek ZİP bir dosya içermelidir</td>
</tr>
<tr>
<td>10008</td>
<td>Belirtilen kriterlere uygun kayıt bulunamamıştır</td>
</tr>
<tr>
<td>10009</td>
<td>Gönderilen belge daha önce gönderilmiş bir belge ile eşleşmektedir. ID: ve UUID:</td>
</tr>
<tr>
<td>10010</td>
<td>Bir istek  boyutu maksimum 5MB veya 100 adet belge  içerebilir</td>
</tr>
<tr>
<td>10011</td>
<td>Tekrarlanan işlem: kayıt sistemde mevcuttur</td>
</tr>
<tr>
<td>10012</td>
<td>Kullanıcı aktif degil {kullanıcı adı}</td>
</tr>
<tr>
<td>10013</td>
<td>Gönderilen istek geçersizdir. Hata sebebi {0}</td>
</tr>
<tr>
<td>10014</td>
<td>Geçersiz İmza</td>
</tr>
<tr>
<td>10015</td>
<td>Servis desteklenmemektedir. Servis adı</td>
</tr>
<tr>
<td>10016</td>
<td>Müşteri sistemde aktif degildir.</td>
</tr>
<tr>
<td>10017</td>
<td>Gönderilen belge daha önce gönderilmiş bir belge ile eşleşmektedir. ID: ve UUID:</td>
</tr>
<tr>
<td>10018</td>
<td>Yetkisiz erişim tespit edildi! {HATA SEBEBİ}</td>
</tr>
</tbody></table>

<!-- partial "includes/eirsaliye/irsaliyehatalari" -->

<h2 id="e-rsaliye-okuma-getdespatchadvice">E-İrsaliye Okuma (GetDespatchAdvice)</h2>

<ul>
<li>E-İrsaliye sisteminden giden imzalı irsaliye veya gelen irsaliyeyi ERP/muhasebe paketine çekmek için kullanılır.</li>
<li>İrsaliye özet bilgilerini veya irsaliye özet bilgileri ile beraber XML içeriğini de çekmek için kullanılabilir.</li>
<li>Entegrasyon yapan iş ortaklarımızdan yeni gelen bütün irsaliye içerikleri (XML) beraber müşteri ortamına çekilmesini tavsiye ediyoruz.</li>
<li>İçerik ile beraber en fazla 100 fatura çekilebilir.</li>
<li>Fatura özet bilgileri ile en fazla 25000 adet fatura dönülmektedir.</li>
<li>Alıcı tarafından zamanlanmış fatura çekme özelliği eklenecekse en fazla 15 dakika aralığında olmalıdır.</li>
</ul>

<p><br>
Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur. Faturaları XML formatında sıkıştırılmadan çekmek için mutlaka <code class="prettyprint">COMPRESSED</code> elemanı eklenmeli ve <code class="prettyprint">N</code> değeri gönderilmelidir. Eğer gönderilmezse faturalar sıkıştırılmış/ziplenmiş olarak dönülecektir.</td>
</tr>
<tr>
<td><strong>SEARCH_KEY.LIMIT</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Kaç kayıt okunmak istendiği. Eğer eleman gönderilmezse 10 adet, içerikleri (XML) ile beraber en fazla 100 adet, sadece özet/başlıklarını çekildiğinde ise en fazla 25.000 adet kayıt dönülür.</td>
</tr>
<tr>
<td><strong>SEARCH_KEY.FROM</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Gönderici firma gönderici birim (GB) etiketine göre çekmek için kullanılabilir. Örneğin birden fazla GB etiketi olan bir firmanın sadece muhasebe departmanından gelen belgeleri okumak için kullanılabilir. örnek: urn:mail:muhasebegb@firma.com</td>
</tr>
<tr>
<td><strong>SEARCH_KEY.TO</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Birden fazla Posta Kutusu (PK) etiketi olan bir firmanın sadece bir PK adresine gelen belgeleri çekmek için kullanılabilir. Eğer etiket gönderilmez ise kullanıcının yetkisine bağlı olarak bütün irsaliyeler dönülür. urn:mail:muhasebepk@firma.com</td>
</tr>
<tr>
<td><strong>SEARCH_KEY.ID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İrsaliye numarası ile okumak için kullanılabilir. örnek: FYA2018000000001</td>
</tr>
<tr>
<td><strong>SEARCH_KEY.UUID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Evrensel Tekil Tanımlama Numarası (ETTN) ile okumak için kullanılabilir.  GUID formatında</td>
</tr>
<tr>
<td><strong>SEARCH_KEY.START_DATE</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Belirli tarih aralığında ki irsaliyeleri çekmek istendiğinde dönem başlangıç tarihi. format: YYYY-MM-DD</td>
</tr>
<tr>
<td><strong>SEARCH_KEY.END_DATE</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Belirli tarih aralığında ki irsaliyeleri çekmek istendiğinde dönem bitiş tarihi format: YYYY-MM-DD</td>
</tr>
<tr>
<td><strong>SEARCH_KEY.READ_INCLUDED</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Daha önce okunmuş irsaliyeleri dönüşe dahil edilip edilmeyeceğini belirleyen parametredir. <code class="prettyprint">Y</code> değeri gönderilirse daha önce okunmuş olsa bile yanıta eklenir. Gönderilmezse veya <code class="prettyprint">N</code> gönderilirse sadece yeni gelen irsaliyeler dönülür. Gönderilebilecek değerler: Y/N</td>
</tr>
<tr>
<td><strong>SEARCH_KEY.DIRECTION</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Belge yönü. Gelen veya Giden irsaliyeleri çekmek için kullanılabilir. Gelen irsaliyeleleri çekmek için <code class="prettyprint">IN</code>, giden irsaliyeleleri çekmek için <code class="prettyprint">OUT</code> değeri gönderilebilir. Varsayılan değer <code class="prettyprint">IN</code> olduğu için eğer parametre gönderilmezse sadece gelen irsaliyeler dönülecektir.  Gönderilebilecek değerler: <code class="prettyprint">IN</code>, <code class="prettyprint">OUT</code></td>
</tr>
<tr>
<td><strong>SEARCH_KEY.SENDER</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Sadece bir firmadan gelen irsaliyeleri çekmek için göndericinin VKNsi.</td>
</tr>
<tr>
<td><strong>SEARCH_KEY.RECEIVER</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Alıcı firma VKNsi.</td>
</tr>
<tr>
<td><strong>HEADER_ONLY</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Sadece özet değerler mi yoksa içerik ile beraber mi okunmak istenildiğini belirleyen parametredir. Eleman <strong>gönderilmezse</strong> veya <code class="prettyprint">N</code> değeri gönderilirse irsaliyeler XML ile beraber dönülür. <code class="prettyprint">Y</code> değeri gönderilirse irsaliyelerin özeti dönülür.  Gönderilebilecek değerler: Y/N</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>DESPATCHADVICE</strong></td>
<td>ComplexType</td>
<td>Sorgu kriterine uyan irsaliyelerin listesi. İrsaliye numarası <code class="prettyprint">ID</code>, evrensel tekil tanımlama numarası  <code class="prettyprint">UUID</code> ve e-irsaliye sisteminde tanımlı tekil numara değeri  <code class="prettyprint">LIST_ID</code> attribute içerisinde dönülmektedir.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICE.HEADER</strong></td>
<td>ComplexType</td>
<td>İrsaliyeye ait özet bilgiler içermektedir.</td>
</tr>
<tr>
<td><strong>HEADER.SENDER</strong></td>
<td>String</td>
<td>Belgeyi gönderen firma VKN&#39;si.</td>
</tr>
<tr>
<td><strong>HEADER.RECEIVER</strong></td>
<td>String</td>
<td>Belgeyi alan firma VKN&#39;si.</td>
</tr>
<tr>
<td><strong>HEADER.SUPPLIER</strong></td>
<td>String</td>
<td>Belgeyi gönderen firma ünvanı.</td>
</tr>
<tr>
<td><strong>HEADER.CUSTOMER</strong></td>
<td>String</td>
<td>Belgeyi alan firma ünvanı.</td>
</tr>
<tr>
<td><strong>HEADER.ISSUE_DATE</strong></td>
<td>String</td>
<td>Belge tarihi.</td>
</tr>
<tr>
<td><strong>HEADER.PAYABLE_AMOUNT</strong></td>
<td>String</td>
<td>Toplam ödenecek tutar.</td>
</tr>
<tr>
<td><strong>HEADER.FROM</strong></td>
<td>String</td>
<td>Belgeyi gönderen Gönderici Birim (GB)</td>
</tr>
<tr>
<td><strong>HEADER.TO</strong></td>
<td>String</td>
<td>Belgenin gönderildiği Posta Kutusu (PK)</td>
</tr>
<tr>
<td><strong>HEADER.PROFILEID</strong></td>
<td>String</td>
<td>Belge senaryosu. <code class="prettyprint">TEMELIRSALIYE</code> değeri olabilir.</td>
</tr>
<tr>
<td><strong>HEADER.INVOICE_TYPE_CODE</strong></td>
<td>String</td>
<td>Belgenin tipi. <code class="prettyprint">SEVK</code> değeri olabilir.</td>
</tr>
<tr>
<td><strong>HEADER.STATUS</strong></td>
<td>String</td>
<td>Belgenin durumu. Detay için <strong>E-İrsaliye Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Belge durum açıklaması. Detay için <strong>E-İrsaliye Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.GIB_STATUS_CODE</strong></td>
<td>String</td>
<td>Belgenin GİB&#39;de ki durum kodu. Detay için <strong>GİB Durum Kodları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.GIB_STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Belgenin GİB&#39;de ki durum kodunun açıklaması. Detay için <strong>GİB Durum Kodları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.CDATE</strong></td>
<td>String</td>
<td>Belgenin sisteme ulaştığı tarih</td>
</tr>
<tr>
<td><strong>HEADER.ENVELOPE_IDENTIFIER</strong></td>
<td>String</td>
<td>Belgenin zarf IDsi.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICE_CONTENT</strong></td>
<td>Base64Binary</td>
<td>Belgenin içeriği. Eğer <code class="prettyprint">COMPRESSED</code> parametresi <code class="prettyprint">N</code> olarak gönderilmişse XML dosya, <code class="prettyprint">COMPRESSED</code> elemanı gönderilmemiş veya <code class="prettyprint">Y</code> değeri gönderilmişse sıkıştırılmış/ziplenmiş XML dosyası dönülür.</td>
</tr>
</tbody></table>

<h2 id="e-rsaliye-durum-sorgulama-getdespatchadvicestatus">E-İrsaliye Durum Sorgulama (GetDespatchAdviceStatus)</h2>

<ul>
<li>Entegrasyon platformunda bulunan bir veya birden fazla taslak, gelen ve giden irsaliyenin durumunu sorgulamayı sağlayan servistir.</li>
<li>Birden fazla belge durumu sorgulamak için <code class="prettyprint">DESPATCHADVICEINFO</code> parametresi çoklanabilir.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEINFO</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Sorgulanacak belge numarası <code class="prettyprint">ID</code> attribute içerisine, Evrensel Tekil Tanımlama Numarası (ETTN) ise <code class="prettyprint">UUID</code> attribute eklenmelidir. <code class="prettyprint">DIRECTION</code> attribute kullanılmamaktadır.</td>
</tr>
</tbody></table>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>DESPATCHADVICE</strong></td>
<td>ComplexType</td>
<td>Sorgu kriterine uyan irsaliyelerin listesi. İrsaliye numarası <code class="prettyprint">ID</code>, evrensel tekil tanımlama numarası  <code class="prettyprint">UUID</code> ve e-irsaliye sisteminde tanımlı tekil numara değeri  <code class="prettyprint">LIST_ID</code> attribute içerisinde dönülmektedir.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICE.DESPATCHADVICEHEADER</strong></td>
<td>ComplexType</td>
<td>İrsaliyeye ait özet bilgiler içermektedir.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.ID</strong></td>
<td>String</td>
<td>Belgenin numarası.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.UUID</strong></td>
<td>String</td>
<td>Belgenin evrensel tekil tanımlama numarası.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.PROFILEID</strong></td>
<td>String</td>
<td>Belge senaryosu. <code class="prettyprint">TEMELIRSALIYE</code> değeri olabilir.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.TYPE_CODE</strong></td>
<td>String</td>
<td>Belgenin tipi. <code class="prettyprint">SEVK</code> değeri olabilir.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.SENDER</strong></td>
<td>String</td>
<td>Belgeyi gönderen firmanın VKNsi <code class="prettyprint">VKN</code> attribute içerisinde, firma ünvanı ise <code class="prettyprint">IDENTIFIER</code> attribute içerisinde dönülmektedir.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.RECEIVER</strong></td>
<td>String</td>
<td>Belgeyi alan firmanın VKNsi <code class="prettyprint">VKN</code> attribute içerisinde, firma ünvanı ise <code class="prettyprint">IDENTIFIER</code> attribute içerisinde dönülmektedir.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.ISSUE_DATE</strong></td>
<td>Date</td>
<td>Belge tarihi.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.ISSUE_TIME</strong></td>
<td>String</td>
<td>Belge düzenleme zamanı.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.ACTUAL_SHIPMENT_DATE</strong></td>
<td>Date</td>
<td>Fiili sevk tarihi.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.ACTUAL_SHIPMENT_TIME</strong></td>
<td>String</td>
<td>Fiili sevk zamanı.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.DIRECTION</strong></td>
<td>String</td>
<td>Belge yönü. Gelen irsaliye için <code class="prettyprint">IN</code>, giden irsaliye için <code class="prettyprint">OUT</code> değeri dönülür.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.STATUS</strong></td>
<td>String</td>
<td>Belgenin durumu. Lütfen bu alanı kullanarak karar vermeyin. Karar vermek için <code class="prettyprint">STATUS_CODE</code> alanını kullanınız.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.STATUS_CODE</strong></td>
<td>String</td>
<td>Belgenin durum kodu. Detay için <strong>İrsaliye Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Belgenin durum açıklaması. Detay için <strong>İrsaliye Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.GIB_STATUS_CODE</strong></td>
<td>int</td>
<td>Belgenin GİB&#39;de ki durum kodu. Detay için <strong>GİB Durum Kodları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.GIB_STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Belgenin GİB&#39;de ki durum kodunun açıklaması. Detay için <strong>GİB Durum Kodları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.CDATE</strong></td>
<td>DateTime</td>
<td>Belgenin sisteme ulaştığı/yüklendiği tarih</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.ENVELOPE_IDENTIFIER</strong></td>
<td>String</td>
<td>Belgenin zarf IDsi.</td>
</tr>
</tbody></table>

<h3 id="e-rsaliye-durumlar">E-İrsaliye Durumları</h3>

<table><thead>
<tr>
<th>Durum</th>
<th>Kod</th>
<th>Detaylı Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td>DURUM_HENUZ_GUNCELLENMEDI</td>
<td>100</td>
<td>DURUM HENÜZ GÜNCELLENMEDİ</td>
</tr>
<tr>
<td>LOAD_SUCCEED</td>
<td>101</td>
<td>KUYRUĞA EKLENDİ</td>
</tr>
<tr>
<td>LOAD_PROCESSİNG</td>
<td>102</td>
<td>TASLAK İŞLENİYOR</td>
</tr>
<tr>
<td>PACKAGE_PROCESSING</td>
<td>103</td>
<td>PAKETLENİYOR</td>
</tr>
<tr>
<td>PACKAGE_SUCCEED</td>
<td>104</td>
<td>PAKETLENDİ</td>
</tr>
<tr>
<td>PACKAGE_FAILED</td>
<td>105</td>
<td>PAKETLEME_HATASI</td>
</tr>
<tr>
<td>SIGN_PROCESSING</td>
<td>106</td>
<td>İMZALANIYOR</td>
</tr>
<tr>
<td>SIGN_FAILED</td>
<td>106</td>
<td>İMZALANIYOR</td>
</tr>
<tr>
<td>SIGN_SUCCEED</td>
<td>107</td>
<td>İMZALANDI</td>
</tr>
<tr>
<td>RECEIVE_SUCCEED</td>
<td>133</td>
<td>BAŞARIYLA ALINDI</td>
</tr>
<tr>
<td>SEND_TIMEOUT</td>
<td>134</td>
<td>GÖNDERME İŞLEMİ SİSTEM TARAFINDAN  TEKRAR DENENECEKTİR</td>
</tr>
<tr>
<td>RECEIVE_TIMEOUT</td>
<td>134</td>
<td>GÖNDERME İŞLEMİ SİSTEM TARAFINDAN  TEKRAR DENENECEKTİR</td>
</tr>
<tr>
<td>SEND_PROCESSING</td>
<td>135</td>
<td>GÖNDERİLİYOR</td>
</tr>
<tr>
<td>SEND_FAILED</td>
<td>136</td>
<td>GÖNDERME İŞLEMİ BAŞARISIZ</td>
</tr>
<tr>
<td>SEND_SUCCEED</td>
<td>137</td>
<td>GÖNDERME İŞLEMİ BAŞARILI</td>
</tr>
</tbody></table>

<h3 id="g-b-durum-kodlar">GİB Durum Kodları</h3>

<table><thead>
<tr>
<th>Kod</th>
<th>Açıklama</th>
<th>Alınacak Aksiyon</th>
</tr>
</thead><tbody>
<tr>
<td>1000</td>
<td>ZARF KUYRUĞA EKLENDİ</td>
<td>Durum kodunun güncellenmesi beklenmelidir.</td>
</tr>
<tr>
<td>1100</td>
<td>ZARF İŞLENİYOR</td>
<td>Durum kodunun güncellenmesi beklenmelidir.</td>
</tr>
<tr>
<td>1110</td>
<td>ZIP DOSYASI DEĞİL</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1111</td>
<td>ZARF ID UZUNLUĞU GEÇERSİZ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1120</td>
<td>ZARF ARŞİVDEN KOPYALANAMADI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1130</td>
<td>ZIP AÇILAMADI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1131</td>
<td>ZIP BİR DOSYA İÇERMELİ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1132</td>
<td>XML DOSYASI DEĞİL</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1133</td>
<td>ZARF ID VE XML DOSYASININ ADI AYNI OLMALI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1140</td>
<td>DOKUMAN AYRIŞTIRILAMADI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1141</td>
<td>ZARF ID YOK</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1142</td>
<td>ZARF ID VE ZIP DOSYASI ADI AYNI OLMALI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1143</td>
<td>GEÇERSİZ VERSİYON</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1150</td>
<td>SCHEMATRON KONTROL SONUCU HATALI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1160</td>
<td>XML SEMA KONTROLÜNDEN GEÇEMEDİ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1161</td>
<td>İMZA SAHİBİ TCKN VKN ALINAMADI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1162</td>
<td>İMZA KAYDEDİLEMEDİ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1163</td>
<td>GÖNDERİLEN ZARF SİSTEMDE DAHA ÖNCE KAYITLI OLAN BİR FATURAYI İÇERMEKTEDİR</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1170</td>
<td>YETKİ KONTROL EDİLEMEDİ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1171</td>
<td>GÖNDERİCİ BİRİM YETKİSİ YOK</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1172</td>
<td>POSTA KUTUSU YETKİSİ YOK</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1175</td>
<td>İMZA YETKİSİ KONTROL EDİLEMEDİ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1176</td>
<td>İMZA SAHİBİ YETKİSİZ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1177</td>
<td>GEÇERSİZ İMZA</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1180</td>
<td>ADRES KONTROL EDİLEMEDİ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1181</td>
<td>ADRES BULUNAMADI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1182</td>
<td>KULLANICI EKLENEMEDİ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1183</td>
<td>KULLANICI SİLİNEMEDİ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1190</td>
<td>SİSTEM YANITI HAZIRLANAMADI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1195</td>
<td>SİSTEM HATASI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1200</td>
<td>ZARF BAŞARIYLA İŞLENDİ</td>
<td>Özel entegratörden gönderilen Belgede sorun tespit edilmedi. Sonra ki aşamalara geçilecek.</td>
</tr>
<tr>
<td>1210</td>
<td>DOKUMAN BULUNAN ADRESE GÖNDERİLEMEDİ</td>
<td>GİB’in tekrar gönderme denemesi sonlandıktan sonra, 1215 durum kodu alınır ise belgeler yeniden gönderilmeli</td>
</tr>
<tr>
<td>1215</td>
<td>DOKÜMAN GÖNDERİMİ BAŞARISIZ. TEKRAR GÖNDERME SONLANDI</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1220</td>
<td>HEDEFTEN SİSTEM YANITI GELMEDİ</td>
<td>Bu durum kodundan sonra 1230 HEDEFTEN SİSTEM YANITI BAŞARISIZ GELDİ durum kodu alınır ise Belge yeniden gönderilmelidir.</td>
</tr>
<tr>
<td>1230</td>
<td>HEDEFTEN SİSTEM YANITI BAŞARISIZ GELDİ</td>
<td>Belge yeniden gönderilmeli</td>
</tr>
<tr>
<td>1300</td>
<td>BAŞARIYLA TAMAMLANDI</td>
<td>Başarılı olan Belge aynı numara ile gönderilemez.</td>
</tr>
</tbody></table>

          <h1 id="e-mustahsil-webservisi">E-Mustahsil Webservisi</h1>

<p>e-Müstahsil Makbuzu (e-MM) Uygulaması, müstahsil makbuzunun Gelir İdaresi Başkanlığı tarafından belirlenen standartlara uygun olarak elektronik ortamda oluşturulması, hem kağıt hem de elektronik ortamda muhafazası ve ibrazı ile elektronik ortamda raporlamasını kapsayan uygulamadır.</p>

<h2 id="g-b-dok-manlar">GİB Dokümanları</h2>

<table><thead>
<tr>
<th>Doküman</th>
<th>Açıklama</th>
<th>İndir</th>
</tr>
</thead><tbody>
<tr>
<td><strong>UBL-TR Müstahsil Makbuzu</strong></td>
<td>UBL-TR v1.2 (UBL 2.1 Türkiye Özelleştirmesi) paketinde yer alan müstahsil makbuzu  belgesinde geçen elemanlara ait XSD, tanımlama, kullanım şekilleri, kardinaliteler hakkında bilgi vermek ve örnek kullanım şekillerini göstermek amacı ile hazırlanmıştır.</td>
<td><a href="http://www.efatura.gov.tr/dosyalar/kilavuzlar/UBL-TR_Mustahsil_Makbuzu-V_1.0.pdf"><img src="/images/icon_pdf.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>UBL-TR Ortak Elemanlar</strong></td>
<td>UBL-TR (UBL 2.1 Türkiye Özelleştirmesi) paketinde yer alan belgelerde geçmesi muhtemel elemanlara ait (ortak elemanlar örneğin: Adres, Parasal Toplamlar, Taraf gibi) XSD, açıklama, kullanım şartları, kardinaliteler hakkında bilgi vermek ve örnek kullanım şekillerini göstermek amacı ile hazırlanmıştır.</td>
<td><a href="/resource/BELGELER/UBL-TR Ortak Elemanlar - V 0.7.pdf"><img src="/images/icon_pdf.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>UBL-TR Kod Listeleri</strong></td>
<td>UBL-TR kapsamında kullanılan Kodlama Sistemleri ve Kimlik Şemaları hakkında bilgi vermek amacı ile hazırlanmıştır.</td>
<td><a href="/resource/BELGELER/UBL-TR Kod Listeleri - V 1.18.pdf"><img src="/images/icon_pdf.png" height="40" width="35"/></a></td>
</tr>
</tbody></table>

<h2 id="ubl-mustahsil-makbuzu-senaryolar">UBL-Mustahsil Makbuzu Senaryoları</h2>

<p>E-Müstahsil Makbuzu sistemi üzerinden düzenlenebilecek ve gönderilebilecek e-müstahsil makbuzu senaryoları ve örnek  XML dosyaları aşağıda listelenmiştir.</p>

<table><thead>
<tr>
<th>Senaryosu</th>
<th>Açıklama</th>
<th>XML</th>
</tr>
</thead><tbody>
<tr>
<td><strong>Vergisiz Müstahsil Makbuzu</strong></td>
<td>En temel müstahsil makbuzu senaryosudur. İçerisinde hiç bir vergi (merafonu, borsa tescil, sgk prim kesintisi) bulunmamaktadır.</td>
<td><a href="/resource/xml/mustahsil_vergisiz.xml" target = "_blank" > <img src = "/images/icon_xml.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Mera Fonu Vergisi İçeren Müstahsil Makbuzu</strong></td>
<td>Mera Fonu Vergisi içeren müstahsil makbuzu senaryodur.</td>
<td><a href="/resource/xml/mustahsil_merafonu.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Borsa Tescil İçeren Müstahsil Makbuzu</strong></td>
<td>Üreticiden borsa tescili bulunan ürün alımında düzenlenen müstahsil makbuzu senaryosudur.</td>
<td><a href="/resource/xml/mustahsil_borsatescil.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>SGK Prim (Bağkur) Kesintisi İçeren Müstahsil Makbuzu</strong></td>
<td>SGK Prim kesinitisi yapıldığı durumlarda düzenlenen müstahsil makbuzu senaryosudur.</td>
<td><a href="/resource/xml/mustahsil_bagkur.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
</tr>
</tbody></table>

<h2 id="webservice-endpoint-wsdl-url">Webservice Endpoint (WSDL) URL</h2>

<table><thead>
<tr>
<th>Ürün</th>
<th>Endpoint URL</th>
</tr>
</thead><tbody>
<tr>
<td>Kimlik Doğrulama</td>
<td><a href="https://efaturatest.izibiz.com.tr/AuthenticationWS?wsdl">https://efaturatest.izibiz.com.tr/AuthenticationWS?wsdl</a></td>
</tr>
<tr>
<td>E-Fatura Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/EInvoiceWS?wsdl">https://efaturatest.izibiz.com.tr/EInvoiceWS?wsdl</a></td>
</tr>
<tr>
<td>E-Arşiv Fatura Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/EIArchiveWS/EFaturaArchive?wsdl">https://efaturatest.izibiz.com.tr/EIArchiveWS/EFaturaArchive?wsdl</a></td>
</tr>
<tr>
<td>E-İrsaliye Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/EIrsaliyeWS/EIrsaliye?wsdl">https://efaturatest.izibiz.com.tr/EIrsaliyeWS/EIrsaliye?wsdl</a></td>
</tr>
<tr>
<td>E-Müstahsil Webservis</td>
<td><a href="http://efaturatest.izibiz.com.tr/CreditNoteWS/CreditNote?wsdl">http://efaturatest.izibiz.com.tr/CreditNoteWS/CreditNote?wsdl</a></td>
</tr>
<tr>
<td>E-Mutabakat Webservis</td>
<td><a href="http://efaturatest.izibiz.com.tr/ReconciliationWS?wsdl">http://efaturatest.izibiz.com.tr/ReconciliationWS?wsdl</a></td>
</tr>
<tr>
<td>E-Serbest Meslek Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/SmmWS?wsdl">https://efaturatest.izibiz.com.tr/SmmWS?wsdl</a></td>
</tr>
<tr>
<td>E-ZRapor Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/ZReportWS?wsdl">https://efaturatest.izibiz.com.tr/ZReportWS?wsdl</a></td>
</tr>
<tr>
<td>Faturalama Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/BillingWS?wsdl">https://efaturatest.izibiz.com.tr/BillingWS?wsdl</a></td>
</tr>
</tbody></table>

<h3 id="portal-uygulamas">Portal Uygulaması</h3>

<p>Entegrasyon sürecinde Portal uygulamamızı aşağıda ki durumlar için kullanabilirsiniz:</p>

<ul>
<li>Belgelerin durumunu kontrol</li>
<li>Farklı senaryolar için belge düzenleyerek XML içeriğini kontrol</li>
<li>Alıcı firmanın mükellefiyet sorgulaması</li>
</ul>

<p>Test Portal Adresimiz: <a href="https://portaltest.izibiz.com.tr">https://portaltest.izibiz.com.tr</a></p>

<p>Test portali erişim bilgileri için <strong>entegrasyon@izibiz.com.tr</strong> adresi ile iletişime geçebilirsiniz.</p>

<h2 id="test-hesaplar">Test Hesaplar</h2>

<p>Test hesabı talep etmek için <strong>entegrasyon@izibiz.com.tr</strong> adresi ile iletişime geçebilirsiniz.
E-Müstahsil test sürecinde düzenlenen belgelerin gönderici VKNsi 4840847211 olmalıdır.</p>

<h2 id="dikkat-edilecek-hususlar">Dikkat Edilecek Hususlar</h2>

<p>E-Müstahsil uygulamanızı geliştirken aşağıda ki bilgiler faydalı olacaktır:</p>

<ol>
<li><strong>Kimlik Doğrulama (Authentication)</strong> Webservisinde bulunan <strong>Login</strong> metodu ile oturum açarak session id alınacaktır. Session Id sistemimiz tarafında 8 saate kadar zaman aşımına uğramadığı için kullanıcı giriş yapınca session id alıp bütün kullanım süresinde aynı session id kullanabilirsiniz.</li>
<li>CREDITNOTE belgeleri UBL-TR Invoice formatına dönüştürerek gönderilmelidir. Her dosya içerisinde görüntülenmesini sağlayan XSLT dokümanı olmalıdır.</li>
<li><strong>SendCREDITNOTE</strong> metodu ile belge gönderimi yapılmaktadır.</li>
<li><strong>GetCREDITNOTEStatus</strong> metodu ile entegrasyon sunucularına yüklenen belgelerin durumları sorgulanacak. <strong>Sık sorgulama yapmayınız.</strong></li>
<li><strong>GetCREDITNOTE</strong> metodu ile yüklenen belgenin imzalı XML, PDF ve HTML formatında tekrar müşteri bilgisayarına çekmek için kullanılabilir.</li>
<li><strong>CancelCREDITNOTE</strong> metodu ile eksik/hatalı oluşturulmuş veya müşteri tarafından iptal/iade edilmiş belgeleri GİB&#39;e iptal olarak raporlanmasını veya tamamen iptal edilerek hiç raporlanmamasını sağlayabilirsiniz.</li>
<li><strong>Kimlik Doğrulama (Authentication)</strong> Webservisinde bulunan  <strong>Logout</strong> metodu ile kullanıcı programını kapatınca veya sizin belirlediğiniz bir sürede oturumu
kapatabilirsiniz.</li>
</ol>

<h2 id="stemci-client-rnek-projeler">İstemci (client) Örnek Projeler</h2>

<p>Webservice entegrasyonu için sunucu taraflı programlama diline uygun farklı istemci(client) örnekleri sunar. Bu istemcilerden programlama yapmak istediğiniz dile uygun olanı seçip test bilgileri ile kullanmaya başlayabilirsiniz.</p>

<p><a href="https://github.com/izibiz/izibiz-dotnet-soap-client" target="_blank"><img src="/images/icon_dotnet.png"/></a>
<a href="https://github.com/izibiz/ws-client-php" target="_blank"><img src="/images/icon_php.png" height="100" width="100"/></a>
<a href="https://github.com/izibiz/ws-client-java" target="_blank"><img src="/images/icon_java.png"/></a>
<a href="https://github.com/izibiz/ws-client-delphi" target="_blank"><img src="/images/icon_delphi.png" height="80" width="80"/></a>
<a href="https://github.com/izibiz/ws-client-soapui" target="_blank"><img src="/images/icon_soapui.png" height="90" width="100"/></a></p>

<h2 id="m-stahsil-makbuz-s-n-f-creditnotetype-nas-l-retilir">Müstahsil Makbuz Sınıfı (CreditNoteType) Nasıl Üretilir ?</h2>

<ul>
<li>Müstahsil makubuzu GİB tarafından belirlenen UBL-TR CreditNote belgesi ile ürütilmekte ve saklanmaktadır.</li>
<li>GİB teknik kılavuzları içerisinde belgeye ait XML Schema Definition (XSD) dosyası bulunmaktadır.</li>
<li>Hazırlanan belgeler XSDye uygun olmalıdır.</li>
<li>Geliştirme ortamına bağlı olarak XSD dosyalarından sınıflar türütülerek belgeler oluşturulabilir.</li>
</ul>

<h3 id="net-ortam">.NET Ortamı</h3>

<p>.NET üzerinden XSD dosyasından sınıf üretmek için şu adımları uygulayınız:</p>

<ol>
<li>http://www.efatura.gov.tr/dosyalar/kilavuzlar/UBL-TR1.2.1_Paketi.zip adresinden paket indirilir.</li>
<li>İndirilen dosya unzip edilir.</li>
<li>.Net Framework yüklü olan bir bilgisayarda <strong>başlat&gt;Developer Command Prompt</strong> yazılır ve gelen seçenek tıklanarak komut dosyası açılır.</li>
<li>2.maddedeki unzip yapılan dizine <strong>cd UBLTR_1.2.1_Paketi/xsdrt/maindoc/</strong> olarak gidilir.</li>
<li>Gelen ekranda aşağıdaki komutu çalıştırılır.<br>
<strong>xsd /c UBL-CreditNote-2.1.xsd UBL-CommonExtensionComponents-2.1.xsd UBL-CommonBasicComponents-2.1.xsd UBL-UnqualifiedDataTypes-2.1.xsd UBL-CoreComponentParameters-2.1.xsd CCTS_CCT_SchemaModule-2.1.xsd UBL-CommonAggregateComponents-2.1.xsd</strong></li>
<li>Bu işlemin sonunda müstahsil makbuzu oluşturmak için gerekli bütün sınıflar UBL-CreditNote-2.1.cs dosyası içerisinde oluşturulacaktır.</li>
<li>Müstahsil <strong>CreditNoteType</strong> sınıfı ile üretilmektedir.</li>
</ol>

<h2 id="ortak-kullan-lan-eleman">Ortak Kullanılan Eleman</h2>

<p>Her webservis isteğinde gönderilmesi beklen ortak elemandır (REQUEST_HEADER)</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login Metodunda sistem tarafında gönderilen SESSION_ID bilgisi. Sonraki tüm metod çağrılarında parametre olarak metoda geçmelidir.</td>
</tr>
<tr>
<td><strong>APPLICATION_NAME</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Metodu çağıran uygulamanın adı. Mutlaka uygulama adının yazılması gerekmektedir.</td>
</tr>
<tr>
<td><strong>CHANNEL_NAME</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Metodun çağrıldığı kanal adı.</td>
</tr>
<tr>
<td><strong>COMPRESSED</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İçerikte taşınan bilginin ZIP formatında sıkıştırılmış mı gönderildiği/talep edildiği bilgisi. Belge gönderim ve belge okuma servislerinde gönderilen değere göre işlem yapılmaktadır.</td>
</tr>
<tr>
<td><strong>CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İstemci uygulama tarafından işlem için üretilen işlem bilgisi (transaction id) varsa istek esnasında gönderilip, sonuçta alabileceğiniz bir değerdir. request/response eşleşmesi yapmak için kullanılabilir.</td>
</tr>
<tr>
<td><strong>INT_PARENT_TXN_ID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İstemci uygulamasında ana modül entitileri ile ilişkilendirelmek istenen ana transaction ID.</td>
</tr>
<tr>
<td><strong>ACTION_DATE</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Metodun çağrılma tarihi</td>
</tr>
<tr>
<td><strong>CHANGE_INFO</strong></td>
<td>Array</td>
<td>Hayır</td>
<td>Bu eleman ile eğer verilerde bir değişiklik yapılacak ise o değişikliği ait bilgi.</td>
</tr>
<tr>
<td><strong>REASON</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İşlem sebebi. Fatura gönderme, fatura alma vs.</td>
</tr>
<tr>
<td><strong>HOST_NAME</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Metodu çağıran sunucunun host bilgisi.</td>
</tr>
<tr>
<td><strong>SIMULATION_FLAG</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Metod çağrılır ancak arkadaki işlem yapılmaz.</td>
</tr>
</tbody></table>

<h2 id="ba-ar-sonu-nesnesi">Başarı Sonuç Nesnesi</h2>

<p>Webservis işlem başarılı olduğunda response objesi içerisinde <code class="prettyprint">REQUEST_RETURN</code> tipinde sonuç dönülecektir.</p>

<p>Servisten dönen hata sonuç nesnesi şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN</strong></td>
<td>ComplexType</td>
<td>İşlem sonucunu içeren başarılı sonuç objesi</td>
</tr>
<tr>
<td><strong>INT_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda bu eleman dönülmez.</td>
</tr>
<tr>
<td><strong>INVOICE_ID</strong></td>
<td>String</td>
<td>Fatura numarası e-arşiv platformunda atanmışsa atanan fatura numarası dönülür.</td>
</tr>
</tbody></table>

<h2 id="hata-sonu-nesnesi">Hata Sonuç Nesnesi</h2>

<p>Webservis metodunda hata oluşması durumunda response objesi içerisinde <code class="prettyprint">ERROR_TYPE</code> tipinde sonuç dönülecektir.</p>

<p>Servisten dönen hata sonuç nesnesi şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>ERROR_TYPE</strong></td>
<td>ComplexType</td>
<td>İşlem sonucunu içeren başarısız/hatalı sonuç objesi</td>
</tr>
<tr>
<td><strong>INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>ERROR_CODE</strong></td>
<td>String</td>
<td>Hata kodu. Hata kod detayları için ilgili servisteki hata kod listesini inceleyebilirsiniz.</td>
</tr>
<tr>
<td><strong>ERROR_SHORT_DESC</strong></td>
<td>String</td>
<td>Hatanın kısa açıklaması.</td>
</tr>
</tbody></table>

<h2 id="e-m-stahsil-g-nderme-sendcreditnote">E-Müstahsil Gönderme (SendCreditNote)</h2>

<p>E-Müstahsil MakbuzuNU özel entegratör sistemlerine gönderilmesini sağlayan servistir. Bu servis ile gönderilen belgeler kuyruğa eklenerek işleme (imzalama, e-posta/sms gönderme ve raporlama) alınacaktır.</p>

<ul>
<li>Eğer müşterinin özel entegratör ile e-posta gönderme hizmeti sözleşmesi yoksa ve webservis isteğinde e-posta gönderme seçeneği seçilmişse işlem hata alacaktır. Bu durumda özel entegratör ile iletişime geçerek e-posta gönderim hizmeti sözleşmesi imzalanmalı ve e-posta gönderim hizmetinin aktiflemesi talep edilmelidir. Eğer e-posta gönderimi farklı kanallardan yapılacaksa e-posta gönderim parametresini <code class="prettyprint">N</code> olarak gönderiniz.
<br>
Servise gönderilmesi gereken parametreler şu şekildedir:</li>
</ul>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur. <code class="prettyprint">SESSION_ID</code> değeri <strong>Kimlik Doğrulama (Authentication)</strong> webservisinde ki <code class="prettyprint">Login</code> metodundan alınan değerdir. Belge sıkıştırılarak/ziplenerek gönderiliyorsa <code class="prettyprint">COMPRESSED</code> alanı gönderilmeyebilir veya <code class="prettyprint">Y</code> olarak gönderilebilir. <strong>XML formatında sıkıştırılmadan yüklemek için mutlaka <code class="prettyprint">COMPRESSED</code> elemanı eklenmeli ve <code class="prettyprint">N</code> değeri gönderilmelidir.</strong></td>
</tr>
<tr>
<td><strong>CREDITNOTE</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>En az bir CREDITNOTE elementi bulunmalıdır. Toplu CREDITNOTE göndermek bu eleman çoklanır. Atanan belge numarası <code class="prettyprint">ID</code> attribute içerisine, Evrensel tekil tanımlama numarasını (ETTN) <code class="prettyprint">UUID</code> attribute eklenmek zorundadır.</td>
</tr>
<tr>
<td><strong>CREDITNOTE.CONTENT</strong></td>
<td>Base64Binary</td>
<td><strong>Evet</strong></td>
<td>Belgenin Base64Binary olarak encode edilmiş XML veya Ziplenmiş içeriği. XML formatında sıkıştırılmadan göndermek için mutlaka <code class="prettyprint">COMPRESSED</code> elemanı eklenmeli ve <code class="prettyprint">N</code> değeri gönderilmelidir. <strong>Daha hızlı iletişim sağlamak için belgelerin sıkıştırılarak gönderilmesini öneriyoruz.</strong></td>
</tr>
<tr>
<td><strong>CREDITNOTE_PROPERTIES</strong></td>
<td>ComplexType</td>
<td>Hayır</td>
<td>CREDITNOTE belgesi ile ilgili parametrelerin belirlendiği elemandır. Belgenin alıcısına e-posta veya SMS olarak iletme isteği belirlenebilir.</td>
</tr>
<tr>
<td><strong>CREDITNOTE_PROPERTIES.SMS_FLAG</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Belge alıcısına SMS olarak göndermek için <code class="prettyprint">Y</code> değeri gönderilmelidir. Eleman gönderilmezse <code class="prettyprint">SMS_NUMBER</code> dolu olsa dahi SMS gönderilmez. <strong>DİKKAT: Eğer müşterinin özel entegratör ile SMS gönderme hizmeti sözleşmesi yoksa ve <code class="prettyprint">Y</code> değeri gönderilirse belgenin sisteme yüklenmesine izin verilmeyecektir. Bu durumda özel entegratör ile iletişime geçerek SMS gönderim hizmeti satın alınmalı veya SMS gönderiminin farklı bir kanaldan müşteri tarafından yapılması gerekmektedir. Bu durumda bu parametre gönderilmemeli veya <code class="prettyprint">N</code> olarak gönderilmelidir.</strong></td>
</tr>
<tr>
<td><strong>CREDITNOTE_PROPERTIES.SMS_NUMBER</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Belgenin SMS olarak iletileceği telefon numarası. Eğer <code class="prettyprint">SMS_FLAG</code> elemanına <code class="prettyprint">Y</code> gönderilirse bu alan zorunludur. <code class="prettyprint">SMS_FLAG</code> elemanı <code class="prettyprint">Y</code> gönderilmezse bu elaman dolu olsa dahi SMS gönderilmez.</td>
</tr>
<tr>
<td><strong>CREDITNOTE_PROPERTIES.EMAIL_FLAG</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Belge alıcısına e-posta olarak gönderilip gönderilmeyeceğinin belirlendiği parametredir. E-Posta göndermek istenilen durumda <code class="prettyprint">Y</code> değeri gönderilmelidir. Eleman gönderilmezse <code class="prettyprint">EMAIL</code> alanı dolu olsa dahi e-posta gönderilmez. <strong>DİKKAT: Eğer müşterinin özel entegratör ile e-posta gönderme hizmeti sözleşmesi yoksa ve <code class="prettyprint">Y</code> değeri gönderilirse belgenin sisteme yüklenmesine izin verilmeyecektir. Bu durumda özel entegratör ile iletişime geçerek e-posta gönderim hizmeti satın alınmalı veya  e-posta gönderiminin farklı bir kanaldan müşteri tarafından yapılması gerekmektedir. Bu durumda bu parametre gönderilmemeli veya <code class="prettyprint">N</code> olarak gönderilmelidir.</strong></td>
</tr>
<tr>
<td><strong>CREDITNOTE_PROPERTIES.EMAIL</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Belgenin e-posta olarak iletileceği e-posta adresi. E-Posta formatında olmak zorundadır. E-Posta gönderimini özel entegratör sisteminden yapılması isteniyorsa <code class="prettyprint">Y</code> değeri gönderilmelidir. Varsayılan değer <code class="prettyprint">N</code> dir. <code class="prettyprint">EMAIL_FLAG</code> alanı <code class="prettyprint">Y</code> gönderildiği zaman bu elaman zorunludur. <code class="prettyprint">EMAIL_FLAG</code> gönderilmemiş veya <code class="prettyprint">N</code> değeri gönderilmişse bu elaman dolu olsa dahi e-posta gönderilmeyecektir.</td>
</tr>
<tr>
<td><strong>CREDITNOTE_PROPERTIES.SENDING_TYPE</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Belgenin yollanma şekli. <code class="prettyprint">ELEKTRONIK</code> veya <code class="prettyprint">KAGIT</code> olabilir. Gönderim şekli <code class="prettyprint">ELEKTRONIK</code> olan belge SMS veya ePosta adresi olmak zorundadır</td>
</tr>
<tr>
<td><strong>SERIES_PROPERTIES</strong></td>
<td>ComplexType</td>
<td>Hayır</td>
<td>Belge numarasının özel entegratör tarafından atanmasının belirleyen parametredir. <strong>Belge numarasının istemci tarafından atanmasını tavsiye ederiz.</strong></td>
</tr>
<tr>
<td><strong>SERIES_PROPERTIES.SERIES_FLAG</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Belge numarasının özel entegratör tarafından atanması için <code class="prettyprint">Y</code> değeri gönderilmelidir. DİKKAT: <code class="prettyprint">SERIES_PREFIX</code> elemanında belirlenen ön ek ile belge numarası atanacak ve belge içerisinde ki değer ezilecektir.</td>
</tr>
<tr>
<td><strong>SERIES_PROPERTIES.SERIES_PREFIX</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Belge numarası atanacak ön ek. 3 hane alfanumerik değer içermelidir. Belge numarası yönetimi hakkında daha detaylı bilgi almak için <strong>Başlarken -&gt; Belge Numarası Yönetimi</strong> başlığını inceleyiniz. Belge numarasının özel entegratör tarafından atanması için <code class="prettyprint">Y</code> değeri gönderilmelidir. DİKKAT: <code class="prettyprint">SERIES_FLAG</code> elemanı <code class="prettyprint">Y</code> değeri gönderilmemişse bu alan dolu olsa dahi belge numarası atanmayacaktır.</td>
</tr>
</tbody></table>

<h3 id="ba-ar-sonu-nesnesi">Başarı Sonuç Nesnesi</h3>

<p>Webservis işlem başarılı olduğunda response objesi içerisinde <code class="prettyprint">REQUEST_RETURN</code> tipinde sonuç dönülecektir.</p>

<p>Servisten dönen hata sonuç nesnesi şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN</strong></td>
<td>ComplexType</td>
<td>İşlem sonucunu içeren başarılı sonuç objesi</td>
</tr>
<tr>
<td><strong>INT_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı işlemlerde <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda bu eleman dönülmez.</td>
</tr>
<tr>
<td><strong>INVOICE_ID</strong></td>
<td>String</td>
<td>Fatura numarası e-arşiv platformunda atanmışsa atanan fatura numarası dönülür.</td>
</tr>
</tbody></table>

<h3 id="hata-sonu-nesnesi">Hata Sonuç Nesnesi</h3>

<p>Webservis metodunda hata oluşması durumunda response objesi içerisinde <code class="prettyprint">ERROR_TYPE</code> tipinde sonuç dönülecektir.</p>

<p>Servisten dönen hata sonuç nesnesi şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>ERROR_TYPE</strong></td>
<td>ComplexType</td>
<td>İşlem sonucunu içeren başarısız/hatalı sonuç objesi</td>
</tr>
<tr>
<td><strong>INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>ERROR_CODE</strong></td>
<td>String</td>
<td>Hata kodu. Hata kod detayları için ilgili servisteki hata kod listesini inceleyebilirsiniz.</td>
</tr>
<tr>
<td><strong>ERROR_SHORT_DESC</strong></td>
<td>String</td>
<td>Hatanın kısa açıklaması.</td>
</tr>
</tbody></table>

<h2 id="e-m-stahsil-okuma-getcreditnote">E-Müstahsil Okuma (GetCreditNote)</h2>

<ul>
<li>Özel entegratör platformundan imzalanmış belgeleri okumayı sağlayan servistir.</li>
<li>E-Müstahsil belgesinin imzalı UBL-TR XML, PDF veya HTML olarak okumayı sağlar.</li>
<li>Belirlenen kritere uygun kayıt bulunamamışsa sonuç boş dönecektir. Hata fırlatılmaz.</li>
<li>Sonuç tek veya çoklu dönülmesine bakılmaksızın liste olarak dönülür.</li>
</ul>

<p><br>
Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur. Faturaları XML formatında sıkıştırılmadan çekmek için mutlaka <code class="prettyprint">COMPRESSED</code> elemanı eklenmeli ve <code class="prettyprint">N</code> değeri gönderilmelidir. Eğer gönderilmezse faturalar sıkıştırılmış/ziplenmiş olarak dönülecektir.</td>
</tr>
<tr>
<td><strong>CREDITNOTE_SEARCH_KEY</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Belge okumak için kullanılabilecek filtre kritirleri</td>
</tr>
<tr>
<td><strong>CREDITNOTE_SEARCH_KEY.LIMIT</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Kaç kayıt okunmak istendiği. Eğer eleman gönderilmezse 10 adet kayıt dönülür. İçerikleri (PDF) ile beraber en fazla 100 adet kayıt dönülür. Sadece özet/başlıklarını çekildiğinde ise en fazla 25.000 adet kayıt dönülür.</td>
</tr>
<tr>
<td><strong>CREDITNOTE_SEARCH_KEY.ID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Belge numarası ile okumak için kullanılabilir. örnek: CREDITNOTE2018000000001</td>
</tr>
<tr>
<td><strong>CREDITNOTE_SEARCH_KEY.UUID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Evrensel Tekil Tanımlama Numarası (ETTN) ile okumak için kullanılabilir.  GUID formatında</td>
</tr>
<tr>
<td><strong>CREDITNOTE_SEARCH_KEY.START_DATE</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Belirli tarih aralığında ki belgeleri çekmek istendiğinde dönem başlangıç tarihi. format: YYYY-MM-DD</td>
</tr>
<tr>
<td><strong>CREDITNOTE_SEARCH_KEY.END_DATE</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Belirli tarih aralığında ki belgeleri çekmek istendiğinde dönem bitiş tarihi format: YYYY-MM-DD</td>
</tr>
<tr>
<td><strong>CREDITNOTE_SEARCH_KEY.READ_INCLUDED</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Daha önce okunmuş belgeleri dönüşe dahil edilip edilmeyeceğini belirleyen parametredir. <code class="prettyprint">Y</code> değeri gönderilirse daha önce okunmuş olsa bile yanıta eklenir. Gönderilmezse veya <code class="prettyprint">N</code> gönderilirse sadece yeni gelen belgeler dönülür. Gönderilebilecek değerler: Y/N</td>
</tr>
<tr>
<td><strong>CREDITNOTE_SEARCH_KEY.FROM</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Gönderici vergi kimlik/TC kimlik numarası ile sorgulamak için kullanılabilir.</td>
</tr>
<tr>
<td><strong>CREDITNOTE_SEARCH_KEY.TO</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Alıcı vergi kimlik/TC kimlik numarası ile sadece belirli bir müşteriye gönderilen belgeleri okumak için kullanılabilir.</td>
</tr>
<tr>
<td><strong>HEADER_ONLY</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Sadece özet değerler mi yoksa içerik ile beraber mi okunmak istenildiğini belirleyen parametredir. Eleman <strong>gönderilmezse</strong> veya <code class="prettyprint">N</code> değeri gönderilirse belgenin içeriği ile (XML) ile beraber dönülür. <code class="prettyprint">Y</code> değeri gönderilirse belgenin özeti dönülür.  Gönderilebilecek değerler: Y/N</td>
</tr>
<tr>
<td><strong>CONTENT_TYPE</strong></td>
<td>Enum</td>
<td>Hayır</td>
<td>Talep edilen format. Gönderilebilecek değerler: PDF</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>CREDITNOTE</strong></td>
<td>ComplexType/Array</td>
<td>Sorgu kriterine uyan tekil belge. Belge numarası <code class="prettyprint">ID</code>, evrensel tekil tanımlama numarası <code class="prettyprint">UUID</code> attribute içerisinde dönülmektedir.</td>
</tr>
<tr>
<td><strong>CREDITNOTE.HEADER</strong></td>
<td>ComplexType</td>
<td>Belgeye ait özet bilgileri içerir.</td>
</tr>
<tr>
<td><strong>HEADER.CUSTOMER</strong></td>
<td>ComplexType</td>
<td>Belge düzenlenen alıcı bilgisi. <code class="prettyprint">identifier</code> attribute ile VKN/TCKN bilgisi, <code class="prettyprint">name</code> attribute ile ünvan bilgisi dönülür.</td>
</tr>
<tr>
<td><strong>HEADER.ISSUE_DATE</strong></td>
<td>DateTime</td>
<td>Belge düzenlenme tarihi. YYYY-MM-DD HH:MM:SS formatında</td>
</tr>
<tr>
<td><strong>HEADER.PAYABLE_AMOUNT</strong></td>
<td>AmountType</td>
<td>Toplam ödenecek tutar.</td>
</tr>
<tr>
<td><strong>HEADER.STATUS</strong></td>
<td>String</td>
<td>Belgenin durumu. Detay için <strong>E-CREDITNOTE Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Belge durum açıklaması. Detay için <strong>E-CREDITNOTE Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.SMS_STATUS</strong></td>
<td>String</td>
<td>Belgenin SMS durumu. Detay için <strong>E-CREDITNOTE SMS Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.SMS_STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Belgenin SMS durum açıklaması. Detay için <strong>E-CREDITNOTE SMS Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.EMAIL_STATUS</strong></td>
<td>String</td>
<td>Belgenin E-Posta durumu. Detay için <strong>E-CREDITNOTE E-Posta Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.EMAIL_STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Belgenin E-Posta durum açıklaması. Detay için <strong>E-CREDITNOTE E-Posta Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.REPORT_DATE</strong></td>
<td>String</td>
<td>Belgenin E-Posta durumu. Detay için <strong>E-CREDITNOTE E-Posta Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.EMAIL_STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Belgenin E-Posta durum açıklaması. Detay için <strong>E-CREDITNOTE E-Posta Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.CDATE</strong></td>
<td>String</td>
<td>Belgenin sisteme yüklendiği tarih.</td>
</tr>
<tr>
<td><strong>CREDITNOTE.CONTENT</strong></td>
<td>Base64Binary</td>
<td>Belgenin içeriği. PDF formatında. Eğer <code class="prettyprint">COMPRESSED</code> parametresi <code class="prettyprint">N</code> olarak gönderilmişse PDF dosya sıkıştırılmadan, <code class="prettyprint">COMPRESSED</code> elemanı gönderilmemiş veya <code class="prettyprint">Y</code> değeri gönderilmişse sıkıştırılmış/ziplenmiş PDF dosyası dönülür.</td>
</tr>
</tbody></table>

<h2 id="e-m-stahsil-durum-sorgulama-getcreditnotestatus">E-Müstahsil Durum Sorgulama (GetCreditNoteStatus)</h2>

<ul>
<li>Özel entegratör platformuna gönderilen bir veya birden fazla belgenin durumunu sorgulamayı sağlayan servistir.</li>
<li>Birden fazla belge durumu sorgulamak için <code class="prettyprint">UUID</code> parametresi çoklanabilir.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur.</td>
</tr>
<tr>
<td><strong>UUID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Sorgulanacak serbest meslek makbuzuna ait Evrensel Tekil Tanımlama Numarası (ETTN) yazılmalıdır.</td>
</tr>
</tbody></table>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>CREDITNOTE_STATUS</strong></td>
<td>ComplexType</td>
<td>Sorgu kriterine uyan belgelerin listesi. Belge numarası <code class="prettyprint">ID</code>, evrensel tekil tanımlama numarası  <code class="prettyprint">UUID</code> attribute içerisinde dönülmektedir.</td>
</tr>
<tr>
<td><strong>CREDITNOTE_STATUS.HEADER</strong></td>
<td>ComplexType</td>
<td>Belgeye ait özet bilgiler içermektedir. Parametre listesi aşağıdadır.</td>
</tr>
<tr>
<td><strong>HEADER.ISSUE_DATE</strong></td>
<td>Date</td>
<td>Belgenin numarası.</td>
</tr>
<tr>
<td><strong>HEADER.PROFILEID</strong></td>
<td>String</td>
<td>Belge senaryosu. <code class="prettyprint">EARSIVBELGE</code> değeri olabilir.</td>
</tr>
<tr>
<td><strong>HEADER.STATUS</strong></td>
<td>String</td>
<td>Belgenin durumu. Lütfen bu alanı kullanarak karar vermeyin. Karar vermek için <code class="prettyprint">STATUS_CODE</code> alanını kullanınız.</td>
</tr>
<tr>
<td><strong>HEADER.STATUS_CODE</strong></td>
<td>String</td>
<td>Belgenin durum kodu. Detay için <strong>E-CREDITNOTE Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Belgenin durum açıklaması. Detay için <strong>E-CREDITNOTE Durumları</strong> başlığını inceleyiniz.</td>
</tr>
</tbody></table>

<h2 id="e-m-stahsil-durumlar">E-Müstahsil Durumları</h2>

<table><thead>
<tr>
<th>Durum Kodu</th>
<th>Durum Açıklaması</th>
</tr>
</thead><tbody>
<tr>
<td>100</td>
<td>DURUM HENÜZ GÜNCELLENMEDİ</td>
</tr>
<tr>
<td>101</td>
<td>TASLAK</td>
</tr>
<tr>
<td>102</td>
<td>NUMARA ATANMA BEKLENİYOR</td>
</tr>
<tr>
<td>103</td>
<td>KUYRUĞA EKLENDİ</td>
</tr>
<tr>
<td>104</td>
<td>İŞLENİYOR</td>
</tr>
<tr>
<td>105</td>
<td>İŞLENDİ</td>
</tr>
<tr>
<td>106</td>
<td>BAŞARISIZ</td>
</tr>
<tr>
<td>107</td>
<td>İPTAL EDİLDİ</td>
</tr>
</tbody></table>

<h3 id="e-m-stahsil-e-posta-g-nderim-durumlar">E-Müstahsil E-Posta Gönderim Durumları</h3>

<table><thead>
<tr>
<th>Durum Kodu</th>
<th>Durum Açıklaması</th>
</tr>
</thead><tbody>
<tr>
<td>100</td>
<td>HENÜZ İŞLENMEDİ</td>
</tr>
<tr>
<td>110</td>
<td>İŞLENİYOR</td>
</tr>
<tr>
<td>120</td>
<td>İŞLENDİ</td>
</tr>
<tr>
<td>130</td>
<td>E-MAIL GÖNDERİM SONLANDI</td>
</tr>
</tbody></table>

          <h1 id="e-serbest-meslek-webservisi">E-Serbest Meslek Webservisi</h1>

<p>487 Sıra No.lu Vergi Usul Kanunu Genel Tebliği ile yürürlüğe giren e-Serbest Meslek Makbuzu (e-SMM) Uygulaması, Serbest Meslek Makbuzunun Gelir İdaresi Başkanlığı tarafından belirlenen standartlara uygun olarak elektronik ortamda oluşturulması, muhafazası, ibrazı ve raporlanmasını kapsayan uygulamadır.</p>

<p>01/01/2018 tarihi itibariyle dileyen serbest meslek erbapları uygulamaya dahil olarak mesleki faaliyetlerine ilişkin tahsilatları için kağıt ortamda düzenlemiş oldukları Serbest Meslek Makbuzunu elektronik belge olarak elektronik ortamda düzenleyebilir, muhatabının talebi doğrultusunda elektronik veya kağıt ortamda iletilebilir, elektronik ortamda muhafaza edip Gelir İdaresi Başkanlığı’na elektronik ortamda raporlayabilirler.</p>

<h2 id="e-serbest-meslek-senaryolar">E-Serbest Meslek Senaryoları</h2>

<p>E-SMM sistemi üzerinden düzenlenebilecek ve gönderilebilecek makbuz senaryoları ve örnek  XML dosyaları aşağıda listelenmiştir.</p>

<table><thead>
<tr>
<th>Senaryosu</th>
<th>Açıklama</th>
<th>XML</th>
</tr>
</thead><tbody>
<tr>
<td><strong>Nihai Tüketiciye (Şahıslara) Düzenlenen E-SMM</strong></td>
<td>Alıcısının vergi mükellefi olmayıp şahıslara düzenlenen serbest meslek makbuzu senaryosudur. Nihai tüketiciye düzenlen makbuzlarda Gelir Vergisi (GV) stopajı uygulanır.</td>
<td><a href="/resource/xml/esmm_nihaituketici.xml" target = "_blank" ><img src="/images/icon_xml.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>Vergi Mükelleflerine Düzenlenen E-SMM</strong></td>
<td>Alıcısının vergi mükellefi olduğu durumlarda düzenenlen serbest meslek makbuzu senaryosudur. Bu durumda KDV eklenmek zorundadır. KDV Tevkifatı uygulanabilir. <strong>KDV tevkifatı için aşağıda ki senaryoyı inceleyiniz.</strong></td>
<td><a href="/resource/xml/esmm_vergimukellefi.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
</tr>
<tr>
<td><strong>KDV Tevkifatı İçeren E-SMM</strong></td>
<td>Alıcısının vergi mükellefi olduğu durumlarda düzenenlen serbest meslek makbuzu senaryosudur. Bu durumda KDV eklenmek zorundadır. KDV Tevkifatı uygulanabilir.</td>
<td><a href="/resource/xml/esmm_vergimullefikdvtevkifati.xml" target="_blank"> <img src="/images/icon_xml.png" height="40" width="35"/></a></td>
</tr>
</tbody></table>

<h2 id="webservice-endpoint-wsdl-url">Webservice Endpoint (WSDL) URL</h2>

<table><thead>
<tr>
<th>Ürün</th>
<th>Endpoint URL</th>
</tr>
</thead><tbody>
<tr>
<td>Kimlik Doğrulama</td>
<td><a href="https://efaturatest.izibiz.com.tr/AuthenticationWS?wsdl">https://efaturatest.izibiz.com.tr/AuthenticationWS?wsdl</a></td>
</tr>
<tr>
<td>E-Fatura Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/EInvoiceWS?wsdl">https://efaturatest.izibiz.com.tr/EInvoiceWS?wsdl</a></td>
</tr>
<tr>
<td>E-Arşiv Fatura Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/EIArchiveWS/EFaturaArchive?wsdl">https://efaturatest.izibiz.com.tr/EIArchiveWS/EFaturaArchive?wsdl</a></td>
</tr>
<tr>
<td>E-İrsaliye Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/EIrsaliyeWS/EIrsaliye?wsdl">https://efaturatest.izibiz.com.tr/EIrsaliyeWS/EIrsaliye?wsdl</a></td>
</tr>
<tr>
<td>E-Müstahsil Webservis</td>
<td><a href="http://efaturatest.izibiz.com.tr/CreditNoteWS/CreditNote?wsdl">http://efaturatest.izibiz.com.tr/CreditNoteWS/CreditNote?wsdl</a></td>
</tr>
<tr>
<td>E-Mutabakat Webservis</td>
<td><a href="http://efaturatest.izibiz.com.tr/ReconciliationWS?wsdl">http://efaturatest.izibiz.com.tr/ReconciliationWS?wsdl</a></td>
</tr>
<tr>
<td>E-Serbest Meslek Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/SmmWS?wsdl">https://efaturatest.izibiz.com.tr/SmmWS?wsdl</a></td>
</tr>
<tr>
<td>E-ZRapor Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/ZReportWS?wsdl">https://efaturatest.izibiz.com.tr/ZReportWS?wsdl</a></td>
</tr>
<tr>
<td>Faturalama Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/BillingWS?wsdl">https://efaturatest.izibiz.com.tr/BillingWS?wsdl</a></td>
</tr>
</tbody></table>

<h3 id="portal-uygulamas">Portal Uygulaması</h3>

<p>Entegrasyon sürecinde Portal uygulamamızı aşağıda ki durumlar için kullanabilirsiniz:</p>

<ul>
<li>Belgelerin durumunu kontrol</li>
<li>Farklı senaryolar için belge düzenleyerek XML içeriğini kontrol</li>
<li>Alıcı firmanın mükellefiyet sorgulaması</li>
</ul>

<p>Test Portal Adresimiz: <a href="https://portaltest.izibiz.com.tr">https://portaltest.izibiz.com.tr</a></p>

<p>Test portali erişim bilgileri için <strong>entegrasyon@izibiz.com.tr</strong> adresi ile iletişime geçebilirsiniz.</p>

<h2 id="test-hesaplar">Test Hesaplar</h2>

<p>Test hesabı talep etmek için <strong>entegrasyon@izibiz.com.tr</strong> adresi ile iletişime geçebilirsiniz.
Test sürecinde düzenlenen belgelerin gönderici VKNsi 4840847211 olmalıdır.</p>

<h2 id="dikkat-edilecek-hususlar">Dikkat Edilecek Hususlar</h2>

<p>E-SMM uygulamanızı geliştirken aşağıda ki bilgiler faydalı olacaktır:</p>

<ol>
<li><strong>Kimlik Doğrulama (Authentication)</strong> Webservisinde bulunan <strong>Login</strong> metodu ile oturum açarak session id alınacaktır. Session Id sistemimiz tarafında 8 saate kadar zaman aşımına uğramadığı için kullanıcı giriş yapınca session id alıp bütün kullanım süresinde aynı session id kullanabilirsiniz.</li>
<li>SMM belgeleri UBL-TR Invoice formatına dönüştürerek gönderilmelidir. Her dosya içerisinde görüntülenmesini sağlayan XSLT dokümanı olmalıdır.</li>
<li><strong>SendSMM</strong> metodu ile belge gönderimi yapılmaktadır.</li>
<li><strong>GetSMMStatus</strong> metodu ile entegrasyon sunucularına yüklenen belgelerin durumları sorgulanacak. <strong>Sık sorgulama yapmayınız.</strong></li>
<li><strong>GetSMM</strong> metodu ile yüklenen belgenin imzalı XML, PDF ve HTML formatında tekrar müşteri bilgisayarına çekmek için kullanılabilir.</li>
<li><strong>CancelSMM</strong> metodu ile eksik/hatalı oluşturulmuş veya müşteri tarafından iptal/iade edilmiş belgeleri GİB&#39;e iptal olarak raporlanmasını veya tamamen iptal edilerek hiç raporlanmamasını sağlayabilirsiniz.</li>
<li><strong>Kimlik Doğrulama (Authentication)</strong> Webservisinde bulunan  <strong>Logout</strong> metodu ile kullanıcı programını kapatınca veya sizin belirlediğiniz bir sürede oturumu
kapatabilirsiniz.</li>
</ol>

<h2 id="stemci-client-rnek-projeler">İstemci (client) Örnek Projeler</h2>

<p>Webservice entegrasyonu için sunucu taraflı programlama diline uygun farklı istemci(client) örnekleri sunar. Bu istemcilerden programlama yapmak istediğiniz dile uygun olanı seçip test bilgileri ile kullanmaya başlayabilirsiniz.</p>

<p><a href="https://github.com/izibiz/izibiz-dotnet-soap-client" target="_blank"><img src="/images/icon_dotnet.png"/></a>
<a href="https://github.com/izibiz/ws-client-php" target="_blank"><img src="/images/icon_php.png" height="100" width="100"/></a>
<a href="https://github.com/izibiz/ws-client-java" target="_blank"><img src="/images/icon_java.png"/></a>
<a href="https://github.com/izibiz/ws-client-delphi" target="_blank"><img src="/images/icon_delphi.png" height="80" width="80"/></a>
<a href="https://github.com/izibiz/ws-client-soapui" target="_blank"><img src="/images/icon_soapui.png" height="90" width="100"/></a></p>

<h2 id="ortak-kullan-lan-eleman">Ortak Kullanılan Eleman</h2>

<p>Her webservis isteğinde gönderilmesi beklen ortak elemandır (REQUEST_HEADER)</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login Metodunda sistem tarafında gönderilen SESSION_ID bilgisi. Sonraki tüm metod çağrılarında parametre olarak metoda geçmelidir.</td>
</tr>
<tr>
<td><strong>APPLICATION_NAME</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Metodu çağıran uygulamanın adı. Mutlaka uygulama adının yazılması gerekmektedir.</td>
</tr>
<tr>
<td><strong>CHANNEL_NAME</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Metodun çağrıldığı kanal adı.</td>
</tr>
<tr>
<td><strong>COMPRESSED</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İçerikte taşınan bilginin ZIP formatında sıkıştırılmış mı gönderildiği/talep edildiği bilgisi. Belge gönderim ve belge okuma servislerinde gönderilen değere göre işlem yapılmaktadır.</td>
</tr>
<tr>
<td><strong>CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İstemci uygulama tarafından işlem için üretilen işlem bilgisi (transaction id) varsa istek esnasında gönderilip, sonuçta alabileceğiniz bir değerdir. request/response eşleşmesi yapmak için kullanılabilir.</td>
</tr>
<tr>
<td><strong>INT_PARENT_TXN_ID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İstemci uygulamasında ana modül entitileri ile ilişkilendirelmek istenen ana transaction ID.</td>
</tr>
<tr>
<td><strong>ACTION_DATE</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Metodun çağrılma tarihi</td>
</tr>
<tr>
<td><strong>CHANGE_INFO</strong></td>
<td>Array</td>
<td>Hayır</td>
<td>Bu eleman ile eğer verilerde bir değişiklik yapılacak ise o değişikliği ait bilgi.</td>
</tr>
<tr>
<td><strong>REASON</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İşlem sebebi. Fatura gönderme, fatura alma vs.</td>
</tr>
<tr>
<td><strong>HOST_NAME</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Metodu çağıran sunucunun host bilgisi.</td>
</tr>
<tr>
<td><strong>SIMULATION_FLAG</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Metod çağrılır ancak arkadaki işlem yapılmaz.</td>
</tr>
</tbody></table>

<h2 id="ba-ar-sonu-nesnesi">Başarı Sonuç Nesnesi</h2>

<p>Webservis işlem başarılı olduğunda response objesi içerisinde <code class="prettyprint">REQUEST_RETURN</code> tipinde sonuç dönülecektir.</p>

<p>Servisten dönen hata sonuç nesnesi şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN</strong></td>
<td>ComplexType</td>
<td>İşlem sonucunu içeren başarılı sonuç objesi</td>
</tr>
<tr>
<td><strong>INT_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda bu eleman dönülmez.</td>
</tr>
<tr>
<td><strong>INVOICE_ID</strong></td>
<td>String</td>
<td>Fatura numarası e-arşiv platformunda atanmışsa atanan fatura numarası dönülür.</td>
</tr>
</tbody></table>

<h2 id="hata-sonu-nesnesi">Hata Sonuç Nesnesi</h2>

<p>Webservis metodunda hata oluşması durumunda response objesi içerisinde <code class="prettyprint">ERROR_TYPE</code> tipinde sonuç dönülecektir.</p>

<p>Servisten dönen hata sonuç nesnesi şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>ERROR_TYPE</strong></td>
<td>ComplexType</td>
<td>İşlem sonucunu içeren başarısız/hatalı sonuç objesi</td>
</tr>
<tr>
<td><strong>INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>ERROR_CODE</strong></td>
<td>String</td>
<td>Hata kodu. Hata kod detayları için ilgili servisteki hata kod listesini inceleyebilirsiniz.</td>
</tr>
<tr>
<td><strong>ERROR_SHORT_DESC</strong></td>
<td>String</td>
<td>Hatanın kısa açıklaması.</td>
</tr>
</tbody></table>

<h2 id="e-smm-g-nderme-sendsmm">E-SMM Gönderme (SendSMM)</h2>

<p>E-SMM belgesini özel entegratör sistemlerine gönderilmesini sağlayan servistir. Bu servis ile gönderilen belgeler kuyruğa eklenerek işleme (imzalama, e-posta/sms gönderme ve raporlama) alınacaktır.</p>

<ul>
<li>Eğer müşterinin özel entegratör ile e-posta gönderme hizmeti sözleşmesi yoksa ve webservis isteğinde e-posta gönderme seçeneği seçilmişse işlem hata alacaktır. Bu durumda özel entegratör ile iletişime geçerek e-posta gönderim hizmeti sözleşmesi imzalanmalı ve e-posta gönderim hizmetinin aktiflemesi talep edilmelidir. Eğer e-posta gönderimi farklı kanallardan yapılacaksa e-posta gönderim parametresini <code class="prettyprint">N</code> olarak gönderiniz.
<br>
Servise gönderilmesi gereken parametreler şu şekildedir:</li>
</ul>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur. <code class="prettyprint">SESSION_ID</code> değeri <strong>Kimlik Doğrulama (Authentication)</strong> webservisinde ki <code class="prettyprint">Login</code> metodundan alınan değerdir. Belge sıkıştırılarak/ziplenerek gönderiliyorsa <code class="prettyprint">COMPRESSED</code> alanı gönderilmeyebilir veya <code class="prettyprint">Y</code> olarak gönderilebilir. <strong>XML formatında sıkıştırılmadan yüklemek için mutlaka <code class="prettyprint">COMPRESSED</code> elemanı eklenmeli ve <code class="prettyprint">N</code> değeri gönderilmelidir.</strong></td>
</tr>
<tr>
<td><strong>SMM</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>En az bir SMM elementi bulunmalıdır. Toplu SMM göndermek bu eleman çoklanır. Atanan belge numarası <code class="prettyprint">ID</code> attribute içerisine, Evrensel tekil tanımlama numarasını (ETTN) <code class="prettyprint">UUID</code> attribute eklenmek zorundadır.</td>
</tr>
<tr>
<td><strong>SMM.CONTENT</strong></td>
<td>Base64Binary</td>
<td><strong>Evet</strong></td>
<td>Belgenin Base64Binary olarak encode edilmiş XML veya Ziplenmiş içeriği. XML formatında sıkıştırılmadan göndermek için mutlaka <code class="prettyprint">COMPRESSED</code> elemanı eklenmeli ve <code class="prettyprint">N</code> değeri gönderilmelidir. <strong>Daha hızlı iletişim sağlamak için belgelerin sıkıştırılarak gönderilmesini öneriyoruz.</strong></td>
</tr>
<tr>
<td><strong>SMM_PROPERTIES</strong></td>
<td>ComplexType</td>
<td>Hayır</td>
<td>SMM belgesi ile ilgili parametrelerin belirlendiği elemandır. Belgenin alıcısına e-posta veya SMS olarak iletme isteği belirlenebilir.</td>
</tr>
<tr>
<td><strong>SMM_PROPERTIES.SMS_FLAG</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Belge alıcısına SMS olarak göndermek için <code class="prettyprint">Y</code> değeri gönderilmelidir. Eleman gönderilmezse <code class="prettyprint">SMS_NUMBER</code> dolu olsa dahi SMS gönderilmez. <strong>DİKKAT: Eğer müşterinin özel entegratör ile SMS gönderme hizmeti sözleşmesi yoksa ve <code class="prettyprint">Y</code> değeri gönderilirse belgenin sisteme yüklenmesine izin verilmeyecektir. Bu durumda özel entegratör ile iletişime geçerek SMS gönderim hizmeti satın alınmalı veya SMS gönderiminin farklı bir kanaldan müşteri tarafından yapılması gerekmektedir. Bu durumda bu parametre gönderilmemeli veya <code class="prettyprint">N</code> olarak gönderilmelidir.</strong></td>
</tr>
<tr>
<td><strong>SMM_PROPERTIES.SMS_NUMBER</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Belgenin SMS olarak iletileceği telefon numarası. Eğer <code class="prettyprint">SMS_FLAG</code> elemanına <code class="prettyprint">Y</code> gönderilirse bu alan zorunludur. <code class="prettyprint">SMS_FLAG</code> elemanı <code class="prettyprint">Y</code> gönderilmezse bu elaman dolu olsa dahi SMS gönderilmez.</td>
</tr>
<tr>
<td><strong>SMM_PROPERTIES.EMAIL_FLAG</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Belge alıcısına e-posta olarak gönderilip gönderilmeyeceğinin belirlendiği parametredir. E-Posta göndermek istenilen durumda <code class="prettyprint">Y</code> değeri gönderilmelidir. Eleman gönderilmezse <code class="prettyprint">EMAIL</code> alanı dolu olsa dahi e-posta gönderilmez. <strong>DİKKAT: Eğer müşterinin özel entegratör ile e-posta gönderme hizmeti sözleşmesi yoksa ve <code class="prettyprint">Y</code> değeri gönderilirse belgenin sisteme yüklenmesine izin verilmeyecektir. Bu durumda özel entegratör ile iletişime geçerek e-posta gönderim hizmeti satın alınmalı veya  e-posta gönderiminin farklı bir kanaldan müşteri tarafından yapılması gerekmektedir. Bu durumda bu parametre gönderilmemeli veya <code class="prettyprint">N</code> olarak gönderilmelidir.</strong></td>
</tr>
<tr>
<td><strong>SMM_PROPERTIES.EMAIL</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Belgenin e-posta olarak iletileceği e-posta adresi. E-Posta formatında olmak zorundadır. E-Posta gönderimini özel entegratör sisteminden yapılması isteniyorsa <code class="prettyprint">Y</code> değeri gönderilmelidir. Varsayılan değer <code class="prettyprint">N</code> dir. <code class="prettyprint">EMAIL_FLAG</code> alanı <code class="prettyprint">Y</code> gönderildiği zaman bu elaman zorunludur. <code class="prettyprint">EMAIL_FLAG</code> gönderilmemiş veya <code class="prettyprint">N</code> değeri gönderilmişse bu elaman dolu olsa dahi e-posta gönderilmeyecektir.</td>
</tr>
<tr>
<td><strong>SMM_PROPERTIES.SENDING_TYPE</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Belgenin yollanma şekli. <code class="prettyprint">ELEKTRONIK</code> veya <code class="prettyprint">KAGIT</code> olabilir. Gönderim şekli <code class="prettyprint">ELEKTRONIK</code> olan belge SMS veya ePosta adresi olmak zorundadır</td>
</tr>
<tr>
<td><strong>SERIES_PROPERTIES</strong></td>
<td>ComplexType</td>
<td>Hayır</td>
<td>Belge numarasının özel entegratör tarafından atanmasının belirleyen parametredir. <strong>Belge numarasının istemci tarafından atanmasını tavsiye ederiz.</strong></td>
</tr>
<tr>
<td><strong>SERIES_PROPERTIES.SERIES_FLAG</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Belge numarasının özel entegratör tarafından atanması için <code class="prettyprint">Y</code> değeri gönderilmelidir. DİKKAT: <code class="prettyprint">SERIES_PREFIX</code> elemanında belirlenen ön ek ile belge numarası atanacak ve belge içerisinde ki değer ezilecektir.</td>
</tr>
<tr>
<td><strong>SERIES_PROPERTIES.SERIES_PREFIX</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Belge numarası atanacak ön ek. 3 hane alfanumerik değer içermelidir. Belge numarası yönetimi hakkında daha detaylı bilgi almak için <strong>Başlarken -&gt; Belge Numarası Yönetimi</strong> başlığını inceleyiniz. Belge numarasının özel entegratör tarafından atanması için <code class="prettyprint">Y</code> değeri gönderilmelidir. DİKKAT: <code class="prettyprint">SERIES_FLAG</code> elemanı <code class="prettyprint">Y</code> değeri gönderilmemişse bu alan dolu olsa dahi belge numarası atanmayacaktır.</td>
</tr>
</tbody></table>

<h3 id="ba-ar-sonu-nesnesi">Başarı Sonuç Nesnesi</h3>

<p>Webservis işlem başarılı olduğunda response objesi içerisinde <code class="prettyprint">REQUEST_RETURN</code> tipinde sonuç dönülecektir.</p>

<p>Servisten dönen hata sonuç nesnesi şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN</strong></td>
<td>ComplexType</td>
<td>İşlem sonucunu içeren başarılı sonuç objesi</td>
</tr>
<tr>
<td><strong>INT_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı işlemlerde <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda bu eleman dönülmez.</td>
</tr>
<tr>
<td><strong>INVOICE_ID</strong></td>
<td>String</td>
<td>Fatura numarası e-arşiv platformunda atanmışsa atanan fatura numarası dönülür.</td>
</tr>
</tbody></table>

<h3 id="hata-sonu-nesnesi">Hata Sonuç Nesnesi</h3>

<p>Webservis metodunda hata oluşması durumunda response objesi içerisinde <code class="prettyprint">ERROR_TYPE</code> tipinde sonuç dönülecektir.</p>

<p>Servisten dönen hata sonuç nesnesi şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>ERROR_TYPE</strong></td>
<td>ComplexType</td>
<td>İşlem sonucunu içeren başarısız/hatalı sonuç objesi</td>
</tr>
<tr>
<td><strong>INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>ERROR_CODE</strong></td>
<td>String</td>
<td>Hata kodu. Hata kod detayları için ilgili servisteki hata kod listesini inceleyebilirsiniz.</td>
</tr>
<tr>
<td><strong>ERROR_SHORT_DESC</strong></td>
<td>String</td>
<td>Hatanın kısa açıklaması.</td>
</tr>
</tbody></table>

<h2 id="e-smm-okuma-getsmm">E-SMM Okuma (GetSMM)</h2>

<ul>
<li>Özel entegratör platformundan imzalanmış belgeleri okumayı sağlayan servistir.</li>
<li>E-SMM belgesinin PDF formatında okunabilir.</li>
<li>Belirlenen kritere uygun kayıt bulunamamışsa sonuç boş dönecektir. Hata fırlatılmaz.</li>
<li>Sonuç tek veya çoklu dönülmesine bakılmaksızın liste olarak dönülür.</li>
</ul>

<p><br>
Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur. Faturaları XML formatında sıkıştırılmadan çekmek için mutlaka <code class="prettyprint">COMPRESSED</code> elemanı eklenmeli ve <code class="prettyprint">N</code> değeri gönderilmelidir. Eğer gönderilmezse faturalar sıkıştırılmış/ziplenmiş olarak dönülecektir.</td>
</tr>
<tr>
<td><strong>SMM_SEARCH_KEY</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Belge okumak için kullanılabilecek filtre kritirleri</td>
</tr>
<tr>
<td><strong>SMM_SEARCH_KEY.LIMIT</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Kaç kayıt okunmak istendiği. Eğer eleman gönderilmezse 10 adet kayıt dönülür. İçerikleri (PDF) ile beraber en fazla 100 adet kayıt dönülür. Sadece özet/başlıklarını çekildiğinde ise en fazla 25.000 adet kayıt dönülür.</td>
</tr>
<tr>
<td><strong>SMM_SEARCH_KEY.ID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Belge numarası ile okumak için kullanılabilir. örnek: SMM2018000000001</td>
</tr>
<tr>
<td><strong>SMM_SEARCH_KEY.UUID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Evrensel Tekil Tanımlama Numarası (ETTN) ile okumak için kullanılabilir.  GUID formatında</td>
</tr>
<tr>
<td><strong>SMM_SEARCH_KEY.START_DATE</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Belirli tarih aralığında ki belgeleri çekmek istendiğinde dönem başlangıç tarihi. format: YYYY-MM-DD</td>
</tr>
<tr>
<td><strong>SMM_SEARCH_KEY.END_DATE</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Belirli tarih aralığında ki belgeleri çekmek istendiğinde dönem bitiş tarihi format: YYYY-MM-DD</td>
</tr>
<tr>
<td><strong>SMM_SEARCH_KEY.READ_INCLUDED</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Daha önce okunmuş belgeleri dönüşe dahil edilip edilmeyeceğini belirleyen parametredir. <code class="prettyprint">Y</code> değeri gönderilirse daha önce okunmuş olsa bile yanıta eklenir. Gönderilmezse veya <code class="prettyprint">N</code> gönderilirse sadece yeni gelen belgeler dönülür. Gönderilebilecek değerler: Y/N</td>
</tr>
<tr>
<td><strong>SMM_SEARCH_KEY.FROM</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Gönderici vergi kimlik/TC kimlik numarası ile sorgulamak için kullanılabilir.</td>
</tr>
<tr>
<td><strong>SMM_SEARCH_KEY.TO</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Alıcı vergi kimlik/TC kimlik numarası ile sadece belirli bir müşteriye gönderilen belgeleri okumak için kullanılabilir.</td>
</tr>
<tr>
<td><strong>HEADER_ONLY</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Sadece özet değerler mi yoksa içerik ile beraber mi okunmak istenildiğini belirleyen parametredir. Eleman <strong>gönderilmezse</strong> veya <code class="prettyprint">N</code> değeri gönderilirse belgenin içeriği ile (XML) ile beraber dönülür. <code class="prettyprint">Y</code> değeri gönderilirse belgenin özeti dönülür.  Gönderilebilecek değerler: Y/N</td>
</tr>
<tr>
<td><strong>CONTENT_TYPE</strong></td>
<td>Enum</td>
<td>Hayır</td>
<td>Talep edilen format. Gönderilebilecek değerler: <code class="prettyprint">PDF</code></td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SMM</strong></td>
<td>ComplexType/Array</td>
<td>Sorgu kriterine uyan tekil belge. Belge numarası <code class="prettyprint">ID</code>, evrensel tekil tanımlama numarası <code class="prettyprint">UUID</code> attribute içerisinde dönülmektedir.</td>
</tr>
<tr>
<td><strong>SMM.HEADER</strong></td>
<td>ComplexType</td>
<td>Belgeye ait özet bilgileri içerir.</td>
</tr>
<tr>
<td><strong>HEADER.CUSTOMER</strong></td>
<td>ComplexType</td>
<td>Belge düzenlenen alıcı bilgisi. <code class="prettyprint">identifier</code> attribute ile VKN/TCKN bilgisi, <code class="prettyprint">name</code> attribute ile ünvan bilgisi dönülür.</td>
</tr>
<tr>
<td><strong>HEADER.ISSUE_DATE</strong></td>
<td>DateTime</td>
<td>Belge düzenlenme tarihi. YYYY-MM-DD HH:MM:SS formatında</td>
</tr>
<tr>
<td><strong>HEADER.PAYABLE_AMOUNT</strong></td>
<td>AmountType</td>
<td>Toplam ödenecek tutar.</td>
</tr>
<tr>
<td><strong>HEADER.STATUS</strong></td>
<td>String</td>
<td>Belgenin durumu. Detay için <strong>E-SMM Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Belge durum açıklaması. Detay için <strong>E-SMM Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.SMS_STATUS</strong></td>
<td>String</td>
<td>Belgenin SMS durumu. Detay için <strong>E-SMM SMS Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.SMS_STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Belgenin SMS durum açıklaması. Detay için <strong>E-SMM SMS Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.EMAIL_STATUS</strong></td>
<td>String</td>
<td>Belgenin E-Posta durumu. Detay için <strong>E-SMM E-Posta Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.EMAIL_STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Belgenin E-Posta durum açıklaması. Detay için <strong>E-SMM E-Posta Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.REPORT_DATE</strong></td>
<td>String</td>
<td>Belgenin E-Posta durumu. Detay için <strong>E-SMM E-Posta Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.EMAIL_STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Belgenin E-Posta durum açıklaması. Detay için <strong>E-SMM E-Posta Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.CDATE</strong></td>
<td>String</td>
<td>Belgenin sisteme yüklendiği tarih.</td>
</tr>
<tr>
<td><strong>SMM.CONTENT</strong></td>
<td>Base64Binary</td>
<td>Belgenin içeriği. PDF formatında. Eğer <code class="prettyprint">COMPRESSED</code> parametresi <code class="prettyprint">N</code> olarak gönderilmişse PDF dosya sıkıştırılmadan, <code class="prettyprint">COMPRESSED</code> elemanı gönderilmemiş veya <code class="prettyprint">Y</code> değeri gönderilmişse sıkıştırılmış/ziplenmiş PDF dosyası dönülür.</td>
</tr>
</tbody></table>

<h2 id="e-smm-durum-sorgulama-getsmmstatus">E-SMM Durum Sorgulama (GetSMMStatus)</h2>

<ul>
<li>Özel entegratör platformuna gönderilen bir veya birden fazla belgenin durumunu sorgulamayı sağlayan servistir.</li>
<li>Birden fazla belge durumu sorgulamak için <code class="prettyprint">UUID</code> parametresi çoklanabilir.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur.</td>
</tr>
<tr>
<td><strong>UUID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Sorgulanacak serbest meslek makbuzuna ait Evrensel Tekil Tanımlama Numarası (ETTN) yazılmalıdır.</td>
</tr>
</tbody></table>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SMM_STATUS</strong></td>
<td>ComplexType</td>
<td>Sorgu kriterine uyan belgelerin listesi. Belge numarası <code class="prettyprint">ID</code>, evrensel tekil tanımlama numarası  <code class="prettyprint">UUID</code> attribute içerisinde dönülmektedir.</td>
</tr>
<tr>
<td><strong>SMM_STATUS.HEADER</strong></td>
<td>ComplexType</td>
<td>Belgeye ait özet bilgiler içermektedir. Parametre listesi aşağıdadır.</td>
</tr>
<tr>
<td><strong>HEADER.ISSUE_DATE</strong></td>
<td>Date</td>
<td>Belgenin numarası.</td>
</tr>
<tr>
<td><strong>HEADER.PROFILEID</strong></td>
<td>String</td>
<td>Belge senaryosu. <code class="prettyprint">EARSIVBELGE</code> değeri olabilir.</td>
</tr>
<tr>
<td><strong>HEADER.STATUS</strong></td>
<td>String</td>
<td>Belgenin durumu. Lütfen bu alanı kullanarak karar vermeyin. Karar vermek için <code class="prettyprint">STATUS_CODE</code> alanını kullanınız.</td>
</tr>
<tr>
<td><strong>HEADER.STATUS_CODE</strong></td>
<td>String</td>
<td>Belgenin durum kodu. Detay için <strong>E-SMM Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Belgenin durum açıklaması. Detay için <strong>E-SMM Durumları</strong> başlığını inceleyiniz.</td>
</tr>
</tbody></table>

<h2 id="e-smm-durumlar">E-SMM Durumları</h2>

<table><thead>
<tr>
<th>Durum Kodu</th>
<th>Durum Açıklaması</th>
</tr>
</thead><tbody>
<tr>
<td>100</td>
<td>DURUM HENÜZ GÜNCELLENMEDİ</td>
</tr>
<tr>
<td>101</td>
<td>TASLAK</td>
</tr>
<tr>
<td>102</td>
<td>NUMARA ATANMA BEKLENİYOR</td>
</tr>
<tr>
<td>103</td>
<td>KUYRUĞA EKLENDİ</td>
</tr>
<tr>
<td>104</td>
<td>İŞLENİYOR</td>
</tr>
<tr>
<td>105</td>
<td>İŞLENDİ</td>
</tr>
<tr>
<td>106</td>
<td>BAŞARISIZ</td>
</tr>
<tr>
<td>107</td>
<td>İPTAL EDİLDİ</td>
</tr>
</tbody></table>

<h3 id="e-smm-e-posta-g-nderim-durumlar">E-SMM E-Posta Gönderim Durumları</h3>

<table><thead>
<tr>
<th>Durum Kodu</th>
<th>Durum Açıklaması</th>
</tr>
</thead><tbody>
<tr>
<td>100</td>
<td>HENÜZ İŞLENMEDİ</td>
</tr>
<tr>
<td>110</td>
<td>İŞLENİYOR</td>
</tr>
<tr>
<td>120</td>
<td>İŞLENDİ</td>
</tr>
<tr>
<td>130</td>
<td>E-MAIL GÖNDERİM SONLANDI</td>
</tr>
</tbody></table>

<h2 id="e-smm-raporlar-okuma-getsmmreport">E-SMM Raporları Okuma (GetSMMReport)</h2>

<ul>
<li>Özel entegratör platformundan SMM raporlarını okumaya yarar. </li>
<li>Belirlenen kritere uygun kayıt bulunamamışsa sonuç boş dönecektir. Hata fırlatılmaz.</li>
<li>Sonuç tek veya çoklu dönülmesine bakılmaksızın liste olarak dönülür.</li>
</ul>

<p><br>
Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur. Faturaları XML formatında sıkıştırılmadan çekmek için mutlaka <code class="prettyprint">COMPRESSED</code> elemanı eklenmeli ve <code class="prettyprint">N</code> değeri gönderilmelidir. Eğer gönderilmezse faturalar sıkıştırılmış/ziplenmiş olarak dönülecektir.</td>
</tr>
<tr>
<td><strong>START_DATE</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Belirli tarih aralığında ki belgeleri çekmek istendiğinde dönem başlangıç tarihi. format: YYYY-MM-DD</td>
</tr>
<tr>
<td><strong>END_DATE</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Belirli tarih aralığında ki belgeleri çekmek istendiğinde dönem bitiş tarihi format: YYYY-MM-DD</td>
</tr>
<tr>
<td><strong>HEADER_ONLY</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Sadece özet değerler mi yoksa içerik ile beraber mi okunmak istenildiğini belirleyen parametredir. Eleman <strong>gönderilmezse</strong> veya <code class="prettyprint">N</code> değeri gönderilirse belgenin içeriği ile (XML) ile beraber dönülür. <code class="prettyprint">Y</code> değeri gönderilirse belgenin özeti dönülür.  Gönderilebilecek değerler: Y/N</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SMM_REPORT</strong></td>
<td>ComplexType/Array</td>
<td>Sorgu kriterine uyan tekil belge. Belge numarası <code class="prettyprint">ID</code>, evrensel tekil tanımlama numarası <code class="prettyprint">UUID</code> attribute içerisinde dönülmektedir.</td>
</tr>
<tr>
<td><strong>SMM_REPORT.HEADER</strong></td>
<td>ComplexType</td>
<td>Belgeye ait özet bilgileri içerir.</td>
</tr>
<tr>
<td><strong>HEADER.UUID</strong></td>
<td>String</td>
<td>Rapora ait evrensel tekil numarası (ETTN)</td>
</tr>
<tr>
<td><strong>HEADER.PERIOD_SDATE</strong></td>
<td>DateTime</td>
<td>Raporun oluşturulduğu dönemin başlangıç tarihi. format: YYYY-MM-DD</td>
</tr>
<tr>
<td><strong>HEADER.PERIOD_EDATE</strong></td>
<td>DateTime</td>
<td>Raporun oluşturulduğu dönemin bitiş tarihi. format: YYYY-MM-DD</td>
</tr>
<tr>
<td><strong>HEADER.SEGMENT_SDATE</strong></td>
<td>DateTime</td>
<td>Raporun oluşturulduğu parça döneminin bitiş tarihi. format: YYYY-MM-DD</td>
</tr>
<tr>
<td><strong>HEADER.SEGMENT</strong></td>
<td>String</td>
<td>Dönem içerisinde ki oluşturulan parçanın numarası.</td>
</tr>
<tr>
<td><strong>HEADER.DOCUMENT_COUNT</strong></td>
<td>String</td>
<td>Gönderilen rapor içerisinde ki makbuz sayısıdır.</td>
</tr>
<tr>
<td><strong>HEADER.STATUS</strong></td>
<td>String</td>
<td>Belgenin durumu. Lütfen bu alanı kullanarak karar vermeyin. Karar vermek için <code class="prettyprint">STATUS_CODE</code> alanını kullanınız.</td>
</tr>
<tr>
<td><strong>HEADER.STATUS_CODE</strong></td>
<td>String</td>
<td>Belgenin durum kodu. Detay için <strong>E-SMM Rapor Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.STATUS_DESC</strong></td>
<td>String</td>
<td>Belgenin durum açıklaması. Detay için <strong>E-SMM Rapor Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.GIB_STATUS_CODE</strong></td>
<td>String</td>
<td>GIB tarafından rapora gönderilmiş olan durum kodu.</td>
</tr>
<tr>
<td><strong>HEADER.GIB_STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>GIB tarafından rapora gönderilen durum açıklaması.</td>
</tr>
<tr>
<td><strong>HEADER.GIB_STATUS_DATE</strong></td>
<td>DateTime</td>
<td>GIB tarafından rapora cevap verilen tarih. format: YYYY-MM-DD</td>
</tr>
</tbody></table>

<h2 id="e-smm-rapor-durumlar">E-SMM Rapor Durumları</h2>

<table><thead>
<tr>
<th>Durum Kodu</th>
<th>Durum Açıklaması</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>RAPORLANACAK</td>
</tr>
<tr>
<td>201</td>
<td>RAPORLANDI</td>
</tr>
<tr>
<td>202</td>
<td>İPTAL RAPORLANACAK</td>
</tr>
<tr>
<td>203</td>
<td>İPTAL RAPORLANDI</td>
</tr>
<tr>
<td>204</td>
<td>RAPORLANMAYACAK</td>
</tr>
</tbody></table>

          <h1 id="e-mutabakat-webservis">E-Mutabakat Webservis</h1>

<p>e-Mutabakat servisi, mükelleflerin BA/BS ve Cari mutabakatlarını yönetmelerini sağlayan webservis uygulamasıdır.</p>

<h2 id="webservice-endpoint-wsdl-url">Webservice Endpoint (WSDL) URL</h2>

<table><thead>
<tr>
<th>Ürün</th>
<th>Endpoint URL</th>
</tr>
</thead><tbody>
<tr>
<td>Kimlik Doğrulama</td>
<td><a href="https://efaturatest.izibiz.com.tr/AuthenticationWS?wsdl">https://efaturatest.izibiz.com.tr/AuthenticationWS?wsdl</a></td>
</tr>
<tr>
<td>E-Fatura Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/EInvoiceWS?wsdl">https://efaturatest.izibiz.com.tr/EInvoiceWS?wsdl</a></td>
</tr>
<tr>
<td>E-Arşiv Fatura Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/EIArchiveWS/EFaturaArchive?wsdl">https://efaturatest.izibiz.com.tr/EIArchiveWS/EFaturaArchive?wsdl</a></td>
</tr>
<tr>
<td>E-İrsaliye Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/EIrsaliyeWS/EIrsaliye?wsdl">https://efaturatest.izibiz.com.tr/EIrsaliyeWS/EIrsaliye?wsdl</a></td>
</tr>
<tr>
<td>E-Müstahsil Webservis</td>
<td><a href="http://efaturatest.izibiz.com.tr/CreditNoteWS/CreditNote?wsdl">http://efaturatest.izibiz.com.tr/CreditNoteWS/CreditNote?wsdl</a></td>
</tr>
<tr>
<td>E-Mutabakat Webservis</td>
<td><a href="http://efaturatest.izibiz.com.tr/ReconciliationWS?wsdl">http://efaturatest.izibiz.com.tr/ReconciliationWS?wsdl</a></td>
</tr>
<tr>
<td>E-Serbest Meslek Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/SmmWS?wsdl">https://efaturatest.izibiz.com.tr/SmmWS?wsdl</a></td>
</tr>
<tr>
<td>E-ZRapor Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/ZReportWS?wsdl">https://efaturatest.izibiz.com.tr/ZReportWS?wsdl</a></td>
</tr>
<tr>
<td>Faturalama Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/BillingWS?wsdl">https://efaturatest.izibiz.com.tr/BillingWS?wsdl</a></td>
</tr>
</tbody></table>

<h3 id="portal-uygulamas">Portal Uygulaması</h3>

<p>Entegrasyon sürecinde Portal uygulamamızı aşağıda ki durumlar için kullanabilirsiniz:</p>

<ul>
<li>Belgelerin durumunu kontrol</li>
<li>Farklı senaryolar için belge düzenleyerek XML içeriğini kontrol</li>
<li>Alıcı firmanın mükellefiyet sorgulaması</li>
</ul>

<p>Test Portal Adresimiz: <a href="https://portaltest.izibiz.com.tr">https://portaltest.izibiz.com.tr</a></p>

<p>Test portali erişim bilgileri için <strong>entegrasyon@izibiz.com.tr</strong> adresi ile iletişime geçebilirsiniz.</p>

<h2 id="dikkat-edilecek-hususlar">Dikkat Edilecek Hususlar</h2>

<p>Uygulamanızı tasarlarken aşağıda ki bilgiler faydalı olacaktır:</p>

<ol>
<li><strong>Kimlik Doğrulama (Authentication)</strong> Webservisinde bulunan <strong>Login</strong> servisi ile oturum açarak session id alınacak. Session Id sistemimiz tarafında son işlem tarihinden itibaren 30 dk geçerlidir.</li>
<li><strong>SendReconciliation</strong> metodu ile BA/BS ve Cari mutabakat gönderimi yapılabilmektedir. Detaylar için <strong>E-Mutabakat Gönderme</strong> bölümünü inceleyiniz.</li>
<li><strong>GetReconciliationStatus</strong> metodu ile gönderilen mutabakatların durumları sorgulanabilir. Nihai duruma erişene kadar mutabakatların durumu özel entegratör sisteminden minumum 4 saatte bir sorgulanmalıdır. <strong>Sık sorgulama yapmayınız.</strong></li>
<li><strong>Kimlik Doğrulama (Authentication)</strong> Webservisinde bulunan <strong>Logout</strong> metodu ile kullanıcı mutabakat programını kapatınca oturum kapatılabilir.</li>
</ol>

<h2 id="e-mutabakat-entegrasyon-kontrol-listesi">E-Mutabakat Entegrasyon Kontrol Listesi</h2>

<table><thead>
<tr>
<th>Durum</th>
<th>Kontrol</th>
</tr>
</thead><tbody>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Oturum Açmak için <strong>Kimlik Doğrulama (Authentication)</strong> webservisinde ki <strong>Login</strong> metodu kullanıldı.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Oturum açıldıktan sonra bütün isteklerde aynı Session ID kullanılıyor. Eğer Aktif session bulunamadı hatası dönülürse yeni oturum açılıyor.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Gönderilen her istek ile REQUEST_HEADER objesinde ki <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code>, <code class="prettyprint">CHANNEL_NAME</code> alanları dolu gönderiliyor.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>BA/BS ve Cari Mutabakat için <strong>SendReconciliation</strong> metodu kullanılarak örnek gönderim yapıldı.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Özel entegratöre iletilen mutabakat muhasebe paketi/ERP&#39;de değişiklik yapılamıyor. Kayıt kitleniyor.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Gönderilen mutabakatların durum sorgulaması <strong>GetReconciliationStatus</strong> metodu ile yapılıyor.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Mutabakatların durumu zamanlayıcı ile otomatik sorgulanıyorsa bu süre konfiguratif ve en az 4 saat olarak belirlendi.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Nihai duruma ulaşmış mutabakatların durumları sorgulanmıyor.</td>
</tr>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Kullanıcı uygulamayı kapattığında <strong>Kimlik Doğrulama (Authentication)</strong> webservisinde ki <strong>Logout</strong> metodu kullanarak oturum kapatıldı.</td>
</tr>
</tbody></table>

<h2 id="stemci-client-rnek-projeler">İstemci (client) Örnek Projeler</h2>

<p>Webservice entegrasyonu için sunucu taraflı programlama diline uygun farklı istemci(client) örnekleri sunar. Bu istemcilerden programlama yapmak istediğiniz dile uygun olanı seçip test bilgileri ile kullanmaya başlayabilirsiniz.</p>

<p><a href="https://github.com/izibiz/izibiz-dotnet-soap-client" target="_blank"><img src="/images/icon_dotnet.png"/></a>
<a href="https://github.com/izibiz/ws-client-php" target="_blank"><img src="/images/icon_php.png" height="100" width="100"/></a>
<a href="https://github.com/izibiz/ws-client-java" target="_blank"><img src="/images/icon_java.png"/></a>
<a href="https://github.com/izibiz/ws-client-delphi" target="_blank"><img src="/images/icon_delphi.png" height="80" width="80"/></a>
<a href="https://github.com/izibiz/ws-client-soapui" target="_blank"><img src="/images/icon_soapui.png" height="90" width="100"/></a></p>

<h2 id="ortak-kullan-lan-eleman">Ortak Kullanılan Eleman</h2>

<p>Her webservis isteğinde gönderilmesi beklen ortak elemandır (REQUEST_HEADER)</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login Metodunda sistem tarafında gönderilen SESSION_ID bilgisi. Sonraki tüm metod çağrılarında parametre olarak metoda geçmelidir.</td>
</tr>
<tr>
<td><strong>APPLICATION_NAME</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Metodu çağıran uygulamanın adı. Mutlaka uygulama adının yazılması gerekmektedir.</td>
</tr>
<tr>
<td><strong>CHANNEL_NAME</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Metodun çağrıldığı kanal adı.</td>
</tr>
<tr>
<td><strong>COMPRESSED</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İçerikte taşınan bilginin ZIP formatında sıkıştırılmış mı gönderildiği/talep edildiği bilgisi. Belge gönderim ve belge okuma servislerinde gönderilen değere göre işlem yapılmaktadır.</td>
</tr>
<tr>
<td><strong>CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İstemci uygulama tarafından işlem için üretilen işlem bilgisi (transaction id) varsa istek esnasında gönderilip, sonuçta alabileceğiniz bir değerdir. request/response eşleşmesi yapmak için kullanılabilir.</td>
</tr>
<tr>
<td><strong>INT_PARENT_TXN_ID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İstemci uygulamasında ana modül entitileri ile ilişkilendirelmek istenen ana transaction ID.</td>
</tr>
<tr>
<td><strong>ACTION_DATE</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Metodun çağrılma tarihi</td>
</tr>
<tr>
<td><strong>CHANGE_INFO</strong></td>
<td>Array</td>
<td>Hayır</td>
<td>Bu eleman ile eğer verilerde bir değişiklik yapılacak ise o değişikliği ait bilgi.</td>
</tr>
<tr>
<td><strong>REASON</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İşlem sebebi. Fatura gönderme, fatura alma vs.</td>
</tr>
<tr>
<td><strong>HOST_NAME</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Metodu çağıran sunucunun host bilgisi.</td>
</tr>
<tr>
<td><strong>SIMULATION_FLAG</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Metod çağrılır ancak arkadaki işlem yapılmaz.</td>
</tr>
</tbody></table>

<h2 id="ba-ar-sonu-nesnesi">Başarı Sonuç Nesnesi</h2>

<p>Webservis işlem başarılı olduğunda response objesi içerisinde <code class="prettyprint">REQUEST_RETURN</code> tipinde sonuç dönülecektir.</p>

<p>Servisten dönen hata sonuç nesnesi şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN</strong></td>
<td>ComplexType</td>
<td>İşlem sonucunu içeren başarılı sonuç objesi</td>
</tr>
<tr>
<td><strong>INT_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda bu eleman dönülmez.</td>
</tr>
<tr>
<td><strong>INVOICE_ID</strong></td>
<td>String</td>
<td>Fatura numarası e-arşiv platformunda atanmışsa atanan fatura numarası dönülür.</td>
</tr>
</tbody></table>

<h2 id="hata-sonu-nesnesi">Hata Sonuç Nesnesi</h2>

<p>Webservis metodunda hata oluşması durumunda response objesi içerisinde <code class="prettyprint">ERROR_TYPE</code> tipinde sonuç dönülecektir.</p>

<p>Servisten dönen hata sonuç nesnesi şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>ERROR_TYPE</strong></td>
<td>ComplexType</td>
<td>İşlem sonucunu içeren başarısız/hatalı sonuç objesi</td>
</tr>
<tr>
<td><strong>INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>ERROR_CODE</strong></td>
<td>String</td>
<td>Hata kodu. Hata kod detayları için ilgili servisteki hata kod listesini inceleyebilirsiniz.</td>
</tr>
<tr>
<td><strong>ERROR_SHORT_DESC</strong></td>
<td>String</td>
<td>Hatanın kısa açıklaması.</td>
</tr>
</tbody></table>

<h2 id="mutabakat-g-nderme-sendreconciliation">Mutabakat Gönderme (SendReconciliation)</h2>

<ul>
<li>Özel entegratör sistemi üzerinden toplu <code class="prettyprint">BA/BS Mutabakat</code> veya <code class="prettyprint">Cari Mutabakat</code> gönderimini sağlayan servistir.</li>
<li>Toplu mutabakat göndermek için <code class="prettyprint">RECONCILIATION</code> parametresi çoklanabilir.</li>
<li><code class="prettyprint">RECONCILIATION_TYPE</code> parametresinin aldığı değerlere göre Cari ve BA/BS Mutabakat arası ayrım yapılır.</li>
<li>BA/BS mutabakat için cariye düzenlenen belge tutarı 5000 TL ve üzeri olmalıdır.</li>
<li>BA/BS Mutabakatlar için <code class="prettyprint">BABS_ACCOUNTING_PERIOD</code>, <code class="prettyprint">BA_DOCUMENT_AMOUNT</code>, <code class="prettyprint">BA_DOCUMENT_COUNT</code>, <code class="prettyprint">BS_DOCUMENT_AMOUNT</code> ve <code class="prettyprint">BS_DOCUMENT_COUNT</code> kullanılır. Cari Mutabakatlar için <code class="prettyprint">CM_AMOUNT</code>, <code class="prettyprint">CM_AMOUNT_TYPE</code> ve <code class="prettyprint">CM_DATE</code> kullanılır. Kalan parametreler iki seçenek için ortaktır.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code>, <code class="prettyprint">CHANNEL_NAME</code> alanı zorunludur.</td>
</tr>
<tr>
<td><strong>RECONCILIATION</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>En az bir mutabakat bulunmalıdır. Toplu gönderim için bu eleman çoklanır.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.TYPE</strong></td>
<td>Enum</td>
<td><strong>Evet</strong></td>
<td>Gönderilmek istenilen mutabakat tipi için kullanılır: BA/BAS Mutabakat için <code class="prettyprint">EM</code>,Cari Mutabakat için <code class="prettyprint">CM</code> olabilir.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.UUID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Evrensel Tekil Tanımlama Numarası (ETTN) ile her mutabakat için oluşturulması gerekir. Daha sonra getReconciliationStatus metodu ile mutabakat okumak için kullanılabilir. GUID formatındadır.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.CUSTOMER_IDENTIFIER</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Mutabakat gönderilecek firmanın vergi kimlik numarası. VKN doğrulaması yapılmadığı için gönderilen verinin doğruluğu mükellefe aittir.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.COMMERCIAL_NAME</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Mutabakat gönderilecek firmanın ünvanı. Alıcı firmaya gönderilen e-posta üzerinde görünecektir.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.TAX_OFFICE</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Mutabakat gönderilecek firmanın vergi dairesi.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.CUSTOMER_ADDRESS</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Mutabakat gönderilecek firmanın adresi.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.TELEPHONE_NO</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Mutabakat gönderilecek firmanın telefon numarası. <strong>Format: 0 (212) 555 55 55</strong></td>
</tr>
<tr>
<td><strong>RECONCILIATION.FAX_NO</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Mutabakat gönderilecek firmanın faks numarası. <strong>Format: 0 (212) 555 55 55</strong></td>
</tr>
<tr>
<td><strong>RECONCILIATION.EMAIL</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Mutabakat gönderilecek firmanın e-posta adresi. E-posta adresinin formatı kontrol edilir ancak doğruluğu ve geçerliliği mükellefin sorumluluğundadır. <strong>Format: muhasebe@firma.com.tr</strong></td>
</tr>
<tr>
<td><strong>RECONCILIATION.CURRENCY_CODE</strong></td>
<td>Enum</td>
<td><strong>Evet</strong></td>
<td>Mutabakat içerisinde kullanılacak para birimidir. <code class="prettyprint">TRY</code>, <code class="prettyprint">USD</code>, <code class="prettyprint">EUR</code>, <code class="prettyprint">GBP</code> ve <code class="prettyprint">CAD</code> değerleri gönderilebilir.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.BABS_ACCOUNTING_PERIOD</strong></td>
<td>String</td>
<td>Hayır</td>
<td>BA-BS Mutabakatlar için kullanılan Mutabakat dönemi. <strong>Format: 201901</strong></td>
</tr>
<tr>
<td><strong>RECONCILIATION.BA_DOCUMENT_COUNT</strong></td>
<td>String</td>
<td>Hayır</td>
<td>BA mutabakat belge adeti.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.BA_DOCUMENT_AMOUNT</strong></td>
<td>Decimal</td>
<td>Hayır</td>
<td>BA mutabakat belgelerinin toplam tutarı.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.BS_DOCUMENT_COUNT</strong></td>
<td>String</td>
<td>Hayır</td>
<td>BS mutabakat belge adeti.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.BS_DOCUMENT_AMOUNT</strong></td>
<td>Decimal</td>
<td>Hayır</td>
<td>BS mutabakat belgelerinin toplam tutarı.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.CM_DATE</strong></td>
<td>DateTime</td>
<td>Hayır</td>
<td>Cari Mutabakatlar için kullanılan Mutabakat dönemi. <strong>Format: 2019-01-01</strong></td>
</tr>
<tr>
<td><strong>RECONCILIATION.CM_AMOUNT_TYPE</strong></td>
<td>Enum</td>
<td>Hayır</td>
<td>Cari Mutabakatlar için mutabakatın yönünü belirtmek için kullanılır. <code class="prettyprint">A</code> veya <code class="prettyprint">B</code> değerlerini alabilir.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.CM_AMOUNT</strong></td>
<td>Decimal</td>
<td>Hayır</td>
<td>Cari Mutabakat tutarını belirtmek için kullanılır.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.NOTE</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Mutabakat gönderilecek firmaya iletilmek istenilen not metni. Maksimum 250 karakter gönderilebilir.</td>
</tr>
</tbody></table>

<p><br><br></p>

<h3 id="ba-ar-sonu-nesnesi">Başarı Sonuç Nesnesi</h3>

<p>Webservis işlem başarılı olduğunda response objesi içerisinde <code class="prettyprint">REQUEST_RETURN</code> tipinde sonuç dönülecektir.</p>

<p>Servisten dönen hata sonuç nesnesi şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN</strong></td>
<td>ComplexType</td>
<td>İşlem sonucunu içeren başarılı sonuç objesi</td>
</tr>
<tr>
<td><strong>INT_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı işlemlerde <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda bu eleman dönülmez.</td>
</tr>
<tr>
<td><strong>INVOICE_ID</strong></td>
<td>String</td>
<td>Fatura numarası e-arşiv platformunda atanmışsa atanan fatura numarası dönülür.</td>
</tr>
</tbody></table>

<h3 id="hata-sonu-nesnesi">Hata Sonuç Nesnesi</h3>

<p>Webservis metodunda hata oluşması durumunda response objesi içerisinde <code class="prettyprint">ERROR_TYPE</code> tipinde sonuç dönülecektir.</p>

<p>Servisten dönen hata sonuç nesnesi şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>ERROR_TYPE</strong></td>
<td>ComplexType</td>
<td>İşlem sonucunu içeren başarısız/hatalı sonuç objesi</td>
</tr>
<tr>
<td><strong>INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>ERROR_CODE</strong></td>
<td>String</td>
<td>Hata kodu. Hata kod detayları için ilgili servisteki hata kod listesini inceleyebilirsiniz.</td>
</tr>
<tr>
<td><strong>ERROR_SHORT_DESC</strong></td>
<td>String</td>
<td>Hatanın kısa açıklaması.</td>
</tr>
</tbody></table>

<h3 id="e-mutabakat-hata-kodlar">E-Mutabakat Hata Kodları</h3>

<table><thead>
<tr>
<th>Hata Kodu</th>
<th>Hata Açıklaması</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>EKSİK VEYA HATALI PARAMETRE (PARAMETRE ADI)</td>
</tr>
<tr>
<td>210</td>
<td>YETKİ HATASI(xxx.xxx.xxx.xxx adresinin bu işleme yetkisi yoktur)</td>
</tr>
<tr>
<td>220</td>
<td>GÜNLÜK İSTEK LİTİMİ AŞILDI</td>
</tr>
<tr>
<td>230</td>
<td>MUTABAKAT SİSTEMDE MEVCUT ( VKN/TCKN:XXXXX, DÖNEM:yyyymm)</td>
</tr>
<tr>
<td>240</td>
<td>BELGE KONTROL HATASI (MEVZUATA UYGUN OLMAYAN MUTABAKAT KAYDI MEVCUT (5000 TL Limiti)</td>
</tr>
<tr>
<td>250</td>
<td>GEÇERSİZ E-POSTA FORMATI( eposta@adfads.com)</td>
</tr>
</tbody></table>

<h2 id="mutabakat-durum-sorgulama-getreconciliationstatus">Mutabakat Durum Sorgulama (GetReconciliationStatus)</h2>

<ul>
<li>Entegrasyon platformunda bulunan <code class="prettyprint">BA/BS Mutabakat</code> veya <code class="prettyprint">Cari Mutabakat</code> durumunu sorgulamayı sağlayan servistir.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code>, <code class="prettyprint">CHANNEL_NAME</code> alanı zorunludur.</td>
</tr>
<tr>
<td><strong>RECONCILIATION_SEARCHING</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Sorgulanacak mutabakatlara ait kriterleri belirlemek için kullanılır.</td>
</tr>
<tr>
<td><strong>SEARCH_KEY.ETTN</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Mutabakat Evrensel Tekil Tanımlama Numarası (ETTN) mutabakatın durumunu sorgulamak için kullanılabilir.</td>
</tr>
</tbody></table>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>RECONCILIATION_STATUS</strong></td>
<td>ComplexType</td>
<td>Mutabakat durum sonuç objesi. Eğer aranan kritere uygun mutabakat bulunmuyorsa sonuç boş kayıt döner.</td>
</tr>
<tr>
<td><strong>RECONCILIATION_STATUS.RECONCILATION</strong></td>
<td>ComplexType</td>
<td>Durumu sorgulaması kriterine uyan mutabakat objesi.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.TYPE</strong></td>
<td>Enum</td>
<td>Durumu sorgulanan mutabakat tipi için kullanılır: BA/BS Mutabakat için <code class="prettyprint">EM</code>,Cari Mutabakat için <code class="prettyprint">CM</code> olur.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.UUID</strong></td>
<td>String</td>
<td>Durumu sorgulanan Evrensel Tekil Tanımlama Numarasıdır.</td>
</tr>
<tr>
<td><strong>RECONCILATION.CUSTOMER_IDENTIFIER</strong></td>
<td>String</td>
<td>Mutabakat gönderilen mükellef VKN/TCKN.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.BABS_ACCOUNTING_PERIOD</strong></td>
<td>String</td>
<td>BA/BS Mutabakatlar için  dönem bilgisi. <strong>Format: 201807</strong></td>
</tr>
<tr>
<td><strong>RECONCILIATION.CM_DATE</strong></td>
<td>String</td>
<td>Cari Mutabakatlar için tarih bilgisi. <strong>Format: 2019-01-04T00:00:00.000+02:00</strong></td>
</tr>
<tr>
<td><strong>RECONCILIATION.STATUS</strong></td>
<td>String</td>
<td>Mutabakat durum bilgisi.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.CREATE_DATE</strong></td>
<td>DateTime</td>
<td>Mutabakatın özel entegratör sistemine yüklendiği tarih.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.EMAIL</strong></td>
<td>ComplexType</td>
<td>Mutabakatın e-posta durum sonuç objesi</td>
</tr>
<tr>
<td><strong>RECONCILIATION.EMAIL_STATUS_CODE</strong></td>
<td>String</td>
<td>Mutabakatın e-posta durum kodu. Detaylar için E-Mutabakat e-posta durum kodları başlığını inceleyebilirsiniz.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.EMAIL_STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Mutabakatın e-posta durum açıklaması. Detaylar için E-Mutabakat e-posta durum kodları başlığını inceleyebilirsiniz.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.EMAIL_STATUS_DATE</strong></td>
<td>DateTime</td>
<td>Mutabakatın e-posta durum tarihi.</td>
</tr>
</tbody></table>

<h3 id="e-mutabakat-durumlar">E-Mutabakat Durumları</h3>

<table><thead>
<tr>
<th>Durum Kodu</th>
<th>Durum Açıklaması</th>
</tr>
</thead><tbody>
<tr>
<td>100</td>
<td>KUYRUĞA EKLENDİ</td>
</tr>
<tr>
<td>105</td>
<td>TASLAK OLARAK EKLENDİ</td>
</tr>
<tr>
<td>110</td>
<td>İŞLENİYOR</td>
</tr>
<tr>
<td>120</td>
<td>İŞLENDİ</td>
</tr>
<tr>
<td>125</td>
<td>MUTABIK</td>
</tr>
<tr>
<td>126</td>
<td>MUTABIK DEĞİL</td>
</tr>
</tbody></table>

<h3 id="e-mutabakat-e-posta-g-nderim-durumlar">E-Mutabakat E-Posta Gönderim Durumları</h3>

<table><thead>
<tr>
<th>Durum Kodu</th>
<th>Durum Açıklaması</th>
</tr>
</thead><tbody>
<tr>
<td>100</td>
<td>HENÜZ İŞLENMEDİ</td>
</tr>
<tr>
<td>110</td>
<td>İŞLENİYOR</td>
</tr>
<tr>
<td>120</td>
<td>İŞLENDİ</td>
</tr>
<tr>
<td>130</td>
<td>E-POSTA GÖNDERİM SONLANDI</td>
</tr>
</tbody></table>

<h2 id="mutabakat-mail-g-nderme-sendmailreconciliation">Mutabakat Mail Gönderme (SendMailReconciliation)</h2>

<ul>
<li>Daha önce gönderilen bir mutabakatın mail olarak tekrardan iletilmesini sağlayan servistir. </li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code>, <code class="prettyprint">CHANNEL_NAME</code> alanı zorunludur.</td>
</tr>
<tr>
<td><strong>MAIL_SEARCHING</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>İstek içerisinde en az bir mutabakat bulunmalıdır.</td>
</tr>
<tr>
<td><strong>SEARCH_KEY.UUID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Evrensel Tekil Tanımlama Numarası (ETTN) tekrardan mail gönderilecek olan mutabakat için kullanılır. GUID formatındadır.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN.INT_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda WS Fault objesi dönecektir.</td>
</tr>
</tbody></table>

<h3 id="e-mutabakat-durumlar">E-Mutabakat Durumları</h3>

<table><thead>
<tr>
<th>Durum</th>
<th>Detaylı Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td>DRAFT</td>
<td>TASLAK</td>
</tr>
<tr>
<td>ACCEPTED</td>
<td>KABUL EDİLDİ</td>
</tr>
<tr>
<td>REJECTED</td>
<td>REDDEDİLDİ</td>
</tr>
<tr>
<td>WAIT_APPROVAL_CUSTOMER</td>
<td>ALICIDAN CEVAP BEKLENİYOR</td>
</tr>
<tr>
<td>FAILED</td>
<td>HATA ALDI</td>
</tr>
<tr>
<td>CANCEL</td>
<td>İPTAL EDİLDİ</td>
</tr>
</tbody></table>

          <h1 id="e-zrapor-webservisi">E-ZRapor Webservisi</h1>

<p>E-ZRapor servisi, mükelleflerin yeni veya eski nesil ÖKC cihazlarından alınan Z-Raporlarınını Gelir İdaresi Başkanlığına raporlanmasını sağlayan servistir.</p>

<h2 id="webservice-endpoint-wsdl-url">Webservice Endpoint (WSDL) URL</h2>

<table><thead>
<tr>
<th>Ürün</th>
<th>Endpoint URL</th>
</tr>
</thead><tbody>
<tr>
<td>Kimlik Doğrulama</td>
<td><a href="https://efaturatest.izibiz.com.tr/AuthenticationWS?wsdl">https://efaturatest.izibiz.com.tr/AuthenticationWS?wsdl</a></td>
</tr>
<tr>
<td>E-Fatura Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/EInvoiceWS?wsdl">https://efaturatest.izibiz.com.tr/EInvoiceWS?wsdl</a></td>
</tr>
<tr>
<td>E-Arşiv Fatura Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/EIArchiveWS/EFaturaArchive?wsdl">https://efaturatest.izibiz.com.tr/EIArchiveWS/EFaturaArchive?wsdl</a></td>
</tr>
<tr>
<td>E-İrsaliye Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/EIrsaliyeWS/EIrsaliye?wsdl">https://efaturatest.izibiz.com.tr/EIrsaliyeWS/EIrsaliye?wsdl</a></td>
</tr>
<tr>
<td>E-Müstahsil Webservis</td>
<td><a href="http://efaturatest.izibiz.com.tr/CreditNoteWS/CreditNote?wsdl">http://efaturatest.izibiz.com.tr/CreditNoteWS/CreditNote?wsdl</a></td>
</tr>
<tr>
<td>E-Mutabakat Webservis</td>
<td><a href="http://efaturatest.izibiz.com.tr/ReconciliationWS?wsdl">http://efaturatest.izibiz.com.tr/ReconciliationWS?wsdl</a></td>
</tr>
<tr>
<td>E-Serbest Meslek Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/SmmWS?wsdl">https://efaturatest.izibiz.com.tr/SmmWS?wsdl</a></td>
</tr>
<tr>
<td>E-ZRapor Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/ZReportWS?wsdl">https://efaturatest.izibiz.com.tr/ZReportWS?wsdl</a></td>
</tr>
<tr>
<td>Faturalama Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/BillingWS?wsdl">https://efaturatest.izibiz.com.tr/BillingWS?wsdl</a></td>
</tr>
</tbody></table>

<h3 id="portal-uygulamas">Portal Uygulaması</h3>

<p>Entegrasyon sürecinde Portal uygulamamızı aşağıda ki durumlar için kullanabilirsiniz:</p>

<ul>
<li>Belgelerin durumunu kontrol</li>
<li>Farklı senaryolar için belge düzenleyerek XML içeriğini kontrol</li>
<li>Alıcı firmanın mükellefiyet sorgulaması</li>
</ul>

<p>Test Portal Adresimiz: <a href="https://portaltest.izibiz.com.tr">https://portaltest.izibiz.com.tr</a></p>

<p>Test portali erişim bilgileri için <strong>entegrasyon@izibiz.com.tr</strong> adresi ile iletişime geçebilirsiniz.</p>

<h2 id="dikkat-edilecek-hususlar">Dikkat Edilecek Hususlar</h2>

<p>Uygulamanızı tasarlarken aşağıda ki bilgiler faydalı olacaktır:</p>

<ol>
<li><strong>Kimlik Doğrulama (Authentication)</strong> Webservisinde bulunan <strong>Login</strong> servisi ile oturum açarak session id alınacak. Session Id sistemimiz tarafında 8 saate kadar zaman aşımına uğramadığı için kullanıcı giriş yapınca session id alıp bütün kullanım süresinde aynı session id kullanabilirsiniz.</li>
<li><strong>LoadZReport</strong> metodu ile tekil veya toplu Z-Rapor yüklemesi yapılır.</li>
<li><strong>GetZReportStatus</strong> metodu ile gönderilen Z-Raporlarının durumları sorgulanabilir.</li>
<li><strong>GetZReport</strong> metodu ile gönderilen Z-Raporlar tekrar istemciye çekilebilir veya son yüklenen Z-Rapor bilgisi sorgulanabilir.</li>
<li><strong>CancelZReport</strong> metodu ile gönderilen Z-Raporlar iptal edilebilir. <strong>İptal edilen Z-Raport tekrar yüklenmelidir.</strong></li>
<li><strong>Kimlik Doğrulama (Authentication)</strong> Webservisinde bulunan <strong>Logout</strong> metodu ile kullanıcı mutabakat programını kapatınca oturum kapatılabilir.</li>
</ol>

<h2 id="z-rapor-entegrasyon-kontrol-listesi">Z-Rapor Entegrasyon Kontrol Listesi</h2>

<table><thead>
<tr>
<th>Durum</th>
<th>Kontrol</th>
</tr>
</thead><tbody>
<tr>
<td><strong>Evet / Hayır</strong></td>
<td>Oturum Açmak için <strong>Kimlik Doğrulama (Authentication)</strong> webservisinde ki <strong>Login</strong> metodu kullanıldı.</td>
</tr>
</tbody></table>

<h2 id="stemci-client-rnek-projeler">İstemci (client) Örnek Projeler</h2>

<p>Z-Rapor entegrasyonu için sunucu taraflı programlama diline uygun farklı istemci(client) örnekleri sunar. Bu istemcilerden programlama yapmak istediğiniz dile uygun olanı seçip test bilgileri ile kullanmaya başlayabilirsiniz.</p>

<h2 id="ortak-kullan-lan-eleman">Ortak Kullanılan Eleman</h2>

<p>Her webservis isteğinde gönderilmesi beklen ortak elemandır (REQUEST_HEADER)</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login Metodunda sistem tarafında gönderilen SESSION_ID bilgisi. Sonraki tüm metod çağrılarında parametre olarak metoda geçmelidir.</td>
</tr>
<tr>
<td><strong>APPLICATION_NAME</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Metodu çağıran uygulamanın adı. Mutlaka uygulama adının yazılması gerekmektedir.</td>
</tr>
<tr>
<td><strong>CHANNEL_NAME</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Metodun çağrıldığı kanal adı.</td>
</tr>
<tr>
<td><strong>COMPRESSED</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İçerikte taşınan bilginin ZIP formatında sıkıştırılmış mı gönderildiği/talep edildiği bilgisi. Belge gönderim ve belge okuma servislerinde gönderilen değere göre işlem yapılmaktadır.</td>
</tr>
<tr>
<td><strong>CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İstemci uygulama tarafından işlem için üretilen işlem bilgisi (transaction id) varsa istek esnasında gönderilip, sonuçta alabileceğiniz bir değerdir. request/response eşleşmesi yapmak için kullanılabilir.</td>
</tr>
<tr>
<td><strong>INT_PARENT_TXN_ID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İstemci uygulamasında ana modül entitileri ile ilişkilendirelmek istenen ana transaction ID.</td>
</tr>
<tr>
<td><strong>ACTION_DATE</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Metodun çağrılma tarihi</td>
</tr>
<tr>
<td><strong>CHANGE_INFO</strong></td>
<td>Array</td>
<td>Hayır</td>
<td>Bu eleman ile eğer verilerde bir değişiklik yapılacak ise o değişikliği ait bilgi.</td>
</tr>
<tr>
<td><strong>REASON</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İşlem sebebi. Fatura gönderme, fatura alma vs.</td>
</tr>
<tr>
<td><strong>HOST_NAME</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Metodu çağıran sunucunun host bilgisi.</td>
</tr>
<tr>
<td><strong>SIMULATION_FLAG</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Metod çağrılır ancak arkadaki işlem yapılmaz.</td>
</tr>
</tbody></table>

<h2 id="z-rapor-y-kleme-loadzreport">Z-Rapor Yükleme (LoadZReport)</h2>

<ul>
<li>Özel entegratör sistemi üzerinden Z-Raporlarının GİB&#39;e raporlanmasını sağlayan servistir.</li>
<li>Toplu Z-Rapor yüklemek için <code class="prettyprint">ZREPORT</code> parametresi çoklanabilir.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code>, <code class="prettyprint">CHANNEL_NAME</code> alanı zorunludur.</td>
</tr>
<tr>
<td><strong>ZREPORT</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>En az bir Z-Rapor bulunmalıdır. Toplu gönderim için bu eleman çoklanır.</td>
</tr>
<tr>
<td><strong>ZREPORT.SUBE_KODU</strong></td>
<td>String</td>
<td>Hayır</td>
<td>ÖKC kurulu olduğu şube numarası. Eğer şebeli yapı yoksa varsayılan şube kodu 001 olarak kaydedilir.</td>
</tr>
<tr>
<td><strong>ZREPORT.OKC_SICIL_NO</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>ÖKC Firma Kodu ile birlikte Cihaz Sicil No’su yazılacaktır. Örnek:LH0001</td>
</tr>
<tr>
<td><strong>ZREPORT.EKU_NO</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>ÖKC cihazına ait EKU numarası.</td>
</tr>
<tr>
<td>****</td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Mutabakat gönderilecek firmanın adresi.</td>
</tr>
<tr>
<td><strong>ZREPORT.ZRAPOR_NO</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Z-Rapor numarası</td>
</tr>
<tr>
<td><strong>ZREPORT.ZRAPOR_TARIH</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Z-Rapor tarihi. <strong>Format: YYYY-MM-DD</strong></td>
</tr>
<tr>
<td><strong>ZREPORT.SATIS_TUTAR</strong></td>
<td>Decimal</td>
<td><strong>Evet</strong></td>
<td>Z-Raporda ki satış tutarı</td>
</tr>
<tr>
<td><strong>ZREPORT.VERGI_KDV</strong></td>
<td>Decimal</td>
<td><strong>Evet</strong></td>
<td>Z-Raporda ki toplam KDV tutarı.</td>
</tr>
<tr>
<td><strong>ZREPORT.VERGI_OTV</strong></td>
<td>Decimal</td>
<td>Hayır</td>
<td>Z-Raporda ki toplam OTV tutarı (Eğer varsa)</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN.INT_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda WS Fault objesi dönecektir.</td>
</tr>
</tbody></table>

<h3 id="z-rapor-hata-kodlar">Z-Rapor Hata Kodları</h3>

<table><thead>
<tr>
<th>Hata Kodu</th>
<th>Hata Açıklaması</th>
</tr>
</thead><tbody>
<tr>
<td>200</td>
<td>EKSİK VEYA HATALI PARAMETRE (PARAMETRE ADI)</td>
</tr>
<tr>
<td>210</td>
<td>YETKİ HATASI(xxx.xxx.xxx.xxx adresinin bu işleme yetkisi yoktur)</td>
</tr>
<tr>
<td>220</td>
<td>GÜNLÜK İSTEK LİTİMİ AŞILDI</td>
</tr>
<tr>
<td>230</td>
<td>BELGE SİSTEMDE MEVCUT ( ZRAPOR:XXXXX)</td>
</tr>
<tr>
<td>240</td>
<td>BELGE KONTROL HATASI ()</td>
</tr>
</tbody></table>

<h2 id="z-rapor-sorgulama-ekme-getzreport">Z-Rapor Sorgulama / Çekme (GetZReport)</h2>

<ul>
<li>Entegrasyon platformunda bulunan Z-Raporun sorgulamasını sağlayan servistir.</li>
<li><strong>SON_RAPOR</strong> parametresi <code class="prettyprint">Y</code> göndererek son yüklenen Z-Rapor bilgisi çekilebilir.</li>
</ul>

<p><br>
Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur. Faturaları XML formatında sıkıştırılmadan çekmek için mutlaka <code class="prettyprint">COMPRESSED</code> elemanı eklenmeli ve <code class="prettyprint">N</code> değeri gönderilmelidir. Eğer gönderilmezse faturalar sıkıştırılmış/ziplenmiş olarak dönülecektir.</td>
</tr>
<tr>
<td><strong>SON_RAPOR</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Sadece son yüklenen Z-Raporu sorgulamak için <code class="prettyprint">Y</code> değerleri gönderilebilir.  Eleman <strong>gönderilmezse</strong> veya <code class="prettyprint">N</code> değeri gönderilirse diğer kriterlere uyan kayıtlar dönülür. Gönderilebilecek değerler: Y/N</td>
</tr>
<tr>
<td><strong>ZREPORT_SEARCH_KEY.LIMIT</strong></td>
<td>Integer</td>
<td>Hayır</td>
<td>Kaç kayıt okunmak istendiği. Eğer eleman gönderilmezse en fazla 25.000 adet kayıt dönülür.</td>
</tr>
<tr>
<td><strong>ZREPORT_SEARCH_KEY.SUBE_KODU</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Şube kodu. Şubeli yapısı olan müşteriler için bir şubeye ait Z-Raporları sorgulamak için kullanılabilir.</td>
</tr>
<tr>
<td><strong>ZREPORT_SEARCH_KEY.OKC_SICIL_NO</strong></td>
<td>String</td>
<td>Hayır</td>
<td>ÖKC cihaz sicil numarası</td>
</tr>
<tr>
<td><strong>ZREPORT_SEARCH_KEY.EKU_NO</strong></td>
<td>String</td>
<td>Hayır</td>
<td>ÖKC cihaz EKU numarası</td>
</tr>
<tr>
<td><strong>ZREPORT_SEARCH_KEY.ZRAPOR_NO</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Z-Rapor numarası</td>
</tr>
<tr>
<td><strong>ZREPORT_SEARCH_KEY.BASLANGIC_TARIH</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Belirli tarih aralığında ki belgeleri çekmek istendiğinde dönem başlangıç tarihi. format: YYYY-MM-DD</td>
</tr>
<tr>
<td><strong>ZREPORT_SEARCH_KEY.BITIS_TARIH</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Belirli tarih aralığında ki belgeleri çekmek istendiğinde dönem bitiş tarihi format: YYYY-MM-DD</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>ZREPORT</strong></td>
<td>ComplexType</td>
<td>Sorgu kriterine uyan belgelerin listesi.</td>
</tr>
<tr>
<td><strong>ZREPORT.SUBE_KODU</strong></td>
<td>String</td>
<td>ÖKC kurulu olduğu şube numarası.</td>
</tr>
<tr>
<td><strong>ZREPORT.OKC_SICIL_NO</strong></td>
<td>String</td>
<td>ÖKC Sicil numarası</td>
</tr>
<tr>
<td><strong>ZREPORT.EKU_NO</strong></td>
<td>String</td>
<td>ÖKC cihazına ait EKU numarası.</td>
</tr>
<tr>
<td><strong>ZREPORT.ZRAPOR_NO</strong></td>
<td>String</td>
<td>Z-Rapor numarası</td>
</tr>
<tr>
<td><strong>ZREPORT.ZRAPOR_TARIH</strong></td>
<td>String</td>
<td>Z-Rapor tarihi. <strong>Format: YYYY-MM-DD</strong></td>
</tr>
<tr>
<td><strong>ZREPORT.SATIS_TUTAR</strong></td>
<td>Decimal</td>
<td>Z-Raporda ki satış tutarı</td>
</tr>
<tr>
<td><strong>ZREPORT.VERGI_KDV</strong></td>
<td>Decimal</td>
<td>Z-Raporda ki toplam KDV tutarı.</td>
</tr>
<tr>
<td><strong>ZREPORT.VERGI_OTV</strong></td>
<td>Decimal</td>
<td>Z-Raporda ki toplam OTV tutarı (Eğer varsa)</td>
</tr>
<tr>
<td><strong>ZREPORT.ZREPORT_DETAIL</strong></td>
<td>ComplexType</td>
<td>Z-Rapora ait durum, rapor vs detayları</td>
</tr>
<tr>
<td><strong>ZREPORT_DETAIL.STATUS</strong></td>
<td>String</td>
<td>Z-Raporun durumu</td>
</tr>
<tr>
<td><strong>ZREPORT_DETAIL.STATUS_CODE</strong></td>
<td>Integer</td>
<td>Z-Raporun durum kodu</td>
</tr>
<tr>
<td><strong>ZREPORT_DETAIL.STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Z-Raporun durum açıklaması</td>
</tr>
<tr>
<td><strong>ZREPORT_DETAIL.REPORT_IDENTIFIER</strong></td>
<td>String</td>
<td>Z-Raporun GİB&#39;e raporlandığı rapora ait ETTN bilgisi. Raporlanmadı ise eleman dönülmez.</td>
</tr>
<tr>
<td><strong>ZREPORT_DETAIL.REPORT_DATE</strong></td>
<td>String</td>
<td>Z-Raporun GİB&#39;e raporlandığı raporun tarihi. Raporlanmadı ise eleman dönülmez.</td>
</tr>
<tr>
<td><strong>ZREPORT_DETAIL.REPORT_STATUS_CODE</strong></td>
<td>String</td>
<td>Z-Raporun GİB&#39;e raporlandığı raporun durum kodu. Raporlanmadı ise eleman dönülmez.</td>
</tr>
<tr>
<td><strong>ZREPORT_DETAIL.REPORT_STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Z-Raporun GİB&#39;e raporlandığı raporun durum açıklaması. Raporlanmadı ise eleman dönülmez.</td>
</tr>
</tbody></table>

<h2 id="ba-bs-mutabakat-durum-sorgulama-getbabsreconciliationstatus">BA/BS Mutabakat Durum Sorgulama (GetBABSReconciliationStatus)</h2>

<ul>
<li>Entegrasyon platformunda bulunan BA/BS mutabakatın durumunu sorgulamayı sağlayan servistir.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code>, <code class="prettyprint">CHANNEL_NAME</code> alanı zorunludur.</td>
</tr>
<tr>
<td><strong>RECONCILIATION_SEARCHING</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Sorgulanacak mutabakatlara ait kriterleri belirlemek için kullanılır.</td>
</tr>
<tr>
<td><strong>SEARCH_KEY.CUSTOMER_IDENTIFIER</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Durumu sorgulanacak müşteri VKN/TCKN. Bir dönemde sadece bir cari/mükellefe ait mutabakatın durumunu sorgulamak için kullanılabilir.</td>
</tr>
<tr>
<td><strong>SEARCH_KEY.ACCOUNTING_PERIOD</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Durumu sorgulanacak mutabakat dönemi. Bir dönemde ki bütün mutabakatların durumunu sorgulamak için kullanılır.</td>
</tr>
</tbody></table>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>RECONCILIATION_STATUS</strong></td>
<td>ComplexType</td>
<td>Mutabakat durum sonuç objesi. Eğer aranan kritere uygun mutabakat bulunmuyorsa sonuç boş kayıt döner.</td>
</tr>
<tr>
<td><strong>RECONCILIATION_STATUS.RECONCILATION</strong></td>
<td>ComplexType</td>
<td>Durumu sorgulaması kriterine uyan mutabakat objesi.</td>
</tr>
<tr>
<td><strong>RECONCILATION.CUSTOMER_IDENTIFIER</strong></td>
<td>String</td>
<td>Mutabakat gönderilen mükellef VKN/TCKN.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.ACCOUNTING_PERIOD</strong></td>
<td>String</td>
<td>Mutabakat dönemi. <strong>Format: 201807</strong></td>
</tr>
<tr>
<td><strong>RECONCILIATION.STATUS_CODE</strong></td>
<td>String</td>
<td>Mutabakat durum kodu. Detaylar için E-Mutabakat durum kodları başlığını inceleyebilirsiniz.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Mutabakat durum açıklaması. Detaylar için E-Mutabakat durum kodları başlığını inceleyebilirsiniz.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.CREATE_DATE</strong></td>
<td>DateTime</td>
<td>Mutabakatın özel entegratör sistemine yüklendiği tarih.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.EMAIL</strong></td>
<td>ComplexType</td>
<td>Mutabakatın e-posta durum sonuç objesi</td>
</tr>
<tr>
<td><strong>RECONCILIATION.EMAIL_STATUS_CODE</strong></td>
<td>String</td>
<td>Mutabakatın e-posta durum kodu. Detaylar için E-Mutabakat e-posta durum kodları başlığını inceleyebilirsiniz.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.EMAIL_STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Mutabakatın e-posta durum açıklaması. Detaylar için E-Mutabakat e-posta durum kodları başlığını inceleyebilirsiniz.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.EMAIL_STATUS_DATE</strong></td>
<td>DateTime</td>
<td>Mutabakatın e-posta durum tarihi.</td>
</tr>
</tbody></table>

<h3 id="e-mutabakat-durumlar">E-Mutabakat Durumları</h3>

<table><thead>
<tr>
<th>Durum Kodu</th>
<th>Durum Açıklaması</th>
</tr>
</thead><tbody>
<tr>
<td>100</td>
<td>KUYRUĞA EKLENDİ</td>
</tr>
<tr>
<td>105</td>
<td>TASLAK OLARAK EKLENDİ</td>
</tr>
<tr>
<td>110</td>
<td>İŞLENİYOR</td>
</tr>
<tr>
<td>120</td>
<td>İŞLENDİ</td>
</tr>
<tr>
<td>125</td>
<td>MUTABIK</td>
</tr>
<tr>
<td>126</td>
<td>MUTABIK DEĞİL</td>
</tr>
</tbody></table>

<h3 id="e-mutabakat-e-posta-g-nderim-durumlar">E-Mutabakat E-Posta Gönderim Durumları</h3>

<table><thead>
<tr>
<th>Durum Kodu</th>
<th>Durum Açıklaması</th>
</tr>
</thead><tbody>
<tr>
<td>100</td>
<td>HENÜZ İŞLENMEDİ</td>
</tr>
<tr>
<td>110</td>
<td>İŞLENİYOR</td>
</tr>
<tr>
<td>120</td>
<td>İŞLENDİ</td>
</tr>
<tr>
<td>130</td>
<td>E-POSTA GÖNDERİM SONLANDI</td>
</tr>
</tbody></table>

          <h1 id="faturalama-webservisi">Faturalama Webservisi</h1>

<p>E-Dönüşüm hizmeti alan kullanıcıların Kontör ve Bakiye durumlarını, Borç durumlarını ve Kullanım durumlarını sorgulayabilecekleri webservistir.</p>

<h2 id="webservice-endpoint-wsdl-url">Webservice Endpoint (WSDL) URL</h2>

<table><thead>
<tr>
<th>Ürün</th>
<th>Endpoint URL</th>
</tr>
</thead><tbody>
<tr>
<td>Kimlik Doğrulama</td>
<td><a href="https://efaturatest.izibiz.com.tr/AuthenticationWS?wsdl">https://efaturatest.izibiz.com.tr/AuthenticationWS?wsdl</a></td>
</tr>
<tr>
<td>E-Fatura Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/EInvoiceWS?wsdl">https://efaturatest.izibiz.com.tr/EInvoiceWS?wsdl</a></td>
</tr>
<tr>
<td>E-Arşiv Fatura Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/EIArchiveWS/EFaturaArchive?wsdl">https://efaturatest.izibiz.com.tr/EIArchiveWS/EFaturaArchive?wsdl</a></td>
</tr>
<tr>
<td>E-İrsaliye Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/EIrsaliyeWS/EIrsaliye?wsdl">https://efaturatest.izibiz.com.tr/EIrsaliyeWS/EIrsaliye?wsdl</a></td>
</tr>
<tr>
<td>E-Müstahsil Webservis</td>
<td><a href="http://efaturatest.izibiz.com.tr/CreditNoteWS/CreditNote?wsdl">http://efaturatest.izibiz.com.tr/CreditNoteWS/CreditNote?wsdl</a></td>
</tr>
<tr>
<td>E-Mutabakat Webservis</td>
<td><a href="http://efaturatest.izibiz.com.tr/ReconciliationWS?wsdl">http://efaturatest.izibiz.com.tr/ReconciliationWS?wsdl</a></td>
</tr>
<tr>
<td>E-Serbest Meslek Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/SmmWS?wsdl">https://efaturatest.izibiz.com.tr/SmmWS?wsdl</a></td>
</tr>
<tr>
<td>E-ZRapor Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/ZReportWS?wsdl">https://efaturatest.izibiz.com.tr/ZReportWS?wsdl</a></td>
</tr>
<tr>
<td>Faturalama Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/BillingWS?wsdl">https://efaturatest.izibiz.com.tr/BillingWS?wsdl</a></td>
</tr>
</tbody></table>

<h3 id="portal-uygulamas">Portal Uygulaması</h3>

<p>Entegrasyon sürecinde Portal uygulamamızı aşağıda ki durumlar için kullanabilirsiniz:</p>

<ul>
<li>Belgelerin durumunu kontrol</li>
<li>Farklı senaryolar için belge düzenleyerek XML içeriğini kontrol</li>
<li>Alıcı firmanın mükellefiyet sorgulaması</li>
</ul>

<p>Test Portal Adresimiz: <a href="https://portaltest.izibiz.com.tr">https://portaltest.izibiz.com.tr</a></p>

<p>Test portali erişim bilgileri için <strong>entegrasyon@izibiz.com.tr</strong> adresi ile iletişime geçebilirsiniz.</p>

<h2 id="dikkat-edilecek-hususlar">Dikkat Edilecek Hususlar</h2>

<p>Uygulamanızı tasarlarken aşağıda ki bilgiler faydalı olacaktır:</p>

<ol>
<li><strong>Kimlik Doğrulama (Authentication)</strong> Webservisinde bulunan <strong>Login</strong> servisi ile oturum açarak session id alınacak. Session Id sistemimiz tarafında 8 saate kadar zaman aşımına uğramadığı için kullanıcı giriş yapınca session id alıp bütün kullanım süresinde aynı session id kullanabilirsiniz.</li>
<li><strong>Borç Sorgulama(GetBalance)</strong> ile ne kadar borçlarının olduğu sorgulanabilinir. Detaylar için ilgili bölümü inceleyiniz.</li>
<li><strong>Kontör Bakiye Sorgulama(GetCredit)</strong> ile yüklenen toplam kontör, mevcut kalan kontör miktarı ve son kontör kullanımı sorgulanılabilinir. <strong>CREDIT_DETAIL_FLAG</strong> ile kullanıcıya tanımlanmış olan aktif kontörler detaylı olarak öğrenmek için kullanılmaktadır.</li>
<li><strong>Kullanım Sorgulama(GetUsage)</strong> ile kullanıcının belirlediği periyotta, seçilen ürüne ve gönderim yönüne göre kullanım miktarı sorgulaması yapılır.</li>
<li><strong>Kimlik Doğrulama (Authentication)</strong> Webservisinde bulunan <strong>Logout</strong> metodu ile kullanıcı oturum kapatılabilir.</li>
</ol>

<h2 id="ortak-kullan-lan-eleman">Ortak Kullanılan Eleman</h2>

<p>Her webservis isteğinde gönderilmesi beklen ortak elemandır (REQUEST_HEADER)</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login Metodunda sistem tarafında gönderilen SESSION_ID bilgisi. Sonraki tüm metod çağrılarında parametre olarak metoda geçmelidir.</td>
</tr>
<tr>
<td><strong>APPLICATION_NAME</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Metodu çağıran uygulamanın adı. Mutlaka uygulama adının yazılması gerekmektedir.</td>
</tr>
<tr>
<td><strong>CHANNEL_NAME</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Metodun çağrıldığı kanal adı.</td>
</tr>
<tr>
<td><strong>COMPRESSED</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İçerikte taşınan bilginin ZIP formatında sıkıştırılmış mı gönderildiği/talep edildiği bilgisi. Belge gönderim ve belge okuma servislerinde gönderilen değere göre işlem yapılmaktadır.</td>
</tr>
<tr>
<td><strong>CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İstemci uygulama tarafından işlem için üretilen işlem bilgisi (transaction id) varsa istek esnasında gönderilip, sonuçta alabileceğiniz bir değerdir. request/response eşleşmesi yapmak için kullanılabilir.</td>
</tr>
<tr>
<td><strong>INT_PARENT_TXN_ID</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İstemci uygulamasında ana modül entitileri ile ilişkilendirelmek istenen ana transaction ID.</td>
</tr>
<tr>
<td><strong>ACTION_DATE</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Metodun çağrılma tarihi</td>
</tr>
<tr>
<td><strong>CHANGE_INFO</strong></td>
<td>Array</td>
<td>Hayır</td>
<td>Bu eleman ile eğer verilerde bir değişiklik yapılacak ise o değişikliği ait bilgi.</td>
</tr>
<tr>
<td><strong>REASON</strong></td>
<td>String</td>
<td>Hayır</td>
<td>İşlem sebebi. Fatura gönderme, fatura alma vs.</td>
</tr>
<tr>
<td><strong>HOST_NAME</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Metodu çağıran sunucunun host bilgisi.</td>
</tr>
<tr>
<td><strong>SIMULATION_FLAG</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Metod çağrılır ancak arkadaki işlem yapılmaz.</td>
</tr>
</tbody></table>

<h2 id="bor-sorgulama-getbalance">Borç Sorgulama (GetBalance)</h2>

<ul>
<li>Özel entegratör sistemi üzerinden borç durumunun sorgulandığı servistir.</li>
<li><code class="prettyprint">BALANCE_DETAIL_FLAG</code> parametresi kullanılarak borç detayı sorgulanabilinir.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur.</td>
</tr>
<tr>
<td><strong>BALANCE_DETAIL_FLAG</strong></td>
<td>Enum</td>
<td><strong>Hayır</strong></td>
<td>Borç bilgisine dair detay istenmesi veya istenmemesi. <code class="prettyprint">Y</code> ve <code class="prettyprint">N</code> değerleri alır. Değer verilmemesi durumunda <code class="prettyprint">N</code> olarak kabul edilir.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>TOTAL_BALANCE</strong></td>
<td>String</td>
<td>Toplam borç tutarı.</td>
</tr>
<tr>
<td><strong>INVOICE_COUNT</strong></td>
<td>String</td>
<td>Borçlu olunan fatura sayısı.</td>
</tr>
<tr>
<td><strong>MESSAGE</strong></td>
<td>String</td>
<td>Borç bilgisine dair dönülen mesaj.</td>
</tr>
<tr>
<td><strong>BALANCE_DETAIL</strong></td>
<td>ComplexType</td>
<td>Borçlu olunan faturaları içerisinde bulundurur.</td>
</tr>
<tr>
<td><strong>BALANCE_DETAIL.INVOICE</strong></td>
<td>ComplexType</td>
<td>Borçlu olunan faturalara dair detayı içerisinde bulundurur.</td>
</tr>
<tr>
<td><strong>INVOICE.INVOICE_NO</strong></td>
<td>String</td>
<td>Borçlu olunan faturanın numarası.</td>
</tr>
<tr>
<td><strong>INVOICE.INVOICE_DATE</strong></td>
<td>String</td>
<td>Borçlu olunan fatura tarihi.</td>
</tr>
<tr>
<td><strong>INVOICE.PERIOD</strong></td>
<td>String</td>
<td>Borçlu olunan faturanın yer aldığı yıl/ay değeri.</td>
</tr>
<tr>
<td><strong>INVOICE.PAYABLE_AMOUNT</strong></td>
<td>String</td>
<td>Ödenmesi gereken tutar.</td>
</tr>
</tbody></table>

<h2 id="kont-r-bakiye-sorgulama-getcredit">Kontör Bakiye Sorgulama (GetCredit)</h2>

<ul>
<li>Özel entegratör sistemi üzerinden mevcut kontör bakiye, yüklenen toplam kontör bakiyesi ve bu kontör paketlerine dair detayların sorgulandığı servistir.</li>
<li><code class="prettyprint">CREDIT_DETAIL_FLAG</code> parametresi kullanılarak Kontor Bakiye detay bilgileri alınabilinir.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur.</td>
</tr>
<tr>
<td><strong>CREDIT_DETAIL_FLAG</strong></td>
<td>Enum</td>
<td><strong>Hayır</strong></td>
<td>Kontör bilgisine dair detay istenmesi veya istenmemesi. <code class="prettyprint">Y</code> ve <code class="prettyprint">N</code> değerleri alır. Değer verilmemesi durumunda <code class="prettyprint">N</code> olarak kabul edilir.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>CREDIT_LOADED</strong></td>
<td>String</td>
<td>Toplam yüklenmiş kontör miktarı.</td>
</tr>
<tr>
<td><strong>CREDIT_BALANCE</strong></td>
<td>String</td>
<td>Mevcut kalan kontör miktarı.</td>
</tr>
<tr>
<td><strong>LAST_PROCESS_TIME</strong></td>
<td>Date</td>
<td>En son kontör kullanılma zamanı.</td>
</tr>
<tr>
<td><strong>MESSAGE</strong></td>
<td>String</td>
<td>Kontör kullanıma dair bilgi mesajı.</td>
</tr>
<tr>
<td><strong>CREDIT_DETAIL</strong></td>
<td>ComplexType</td>
<td>Yüklenmiş kontör bilgilerini içinde bulunduran yapı.</td>
</tr>
<tr>
<td><strong>CREDIT_DETAIL.CREDIT</strong></td>
<td>ComplexType</td>
<td>Yüklenen kontörlere ait detayı bulunduran yapı.</td>
</tr>
<tr>
<td><strong>CREDIT.CDATE</strong></td>
<td>Date</td>
<td>Kontörün tanımlanma tarihi.</td>
</tr>
<tr>
<td><strong>CREDIT.EXPIRE_DATE</strong></td>
<td>Date</td>
<td>Kontörün kullanım hakkının sona erme tarihi.</td>
</tr>
<tr>
<td><strong>CREDIT.LOADED_AMOUNT</strong></td>
<td>String</td>
<td>Yüklenmiş kontör adeti.</td>
</tr>
<tr>
<td><strong>CREDIT.REMAINING_AMOUNT</strong></td>
<td>String</td>
<td>Kalan kontör adeti.</td>
</tr>
<tr>
<td><strong>CREDIT.TARIFF_NAME</strong></td>
<td>String</td>
<td>Tanımlanmış kontör tarifesinin adı.</td>
</tr>
<tr>
<td><strong>CREDIT.PRICE</strong></td>
<td>String</td>
<td>Tarifenin ücreti.</td>
</tr>
</tbody></table>

<h2 id="kullan-m-sorgulama-getusage">Kullanım Sorgulama (GetUsage)</h2>

<ul>
<li>Özel entegratör sistemi üzerinden kullanım tutarlarının sorgulandığı servistir.</li>
<li><code class="prettyprint">PERIOD</code> parametresi ile özel bir perioda dair sorgulama yapılabilinir.</li>
<li><code class="prettyprint">PRODUCT_TYPE</code> ile sadece seçtiğiniz ürüne dair kullanım detaylarını görebilirsiniz.</li>
<li><code class="prettyprint">DIRECTION</code> parametresi ile seçtiğiniz ürünün gelen, giden veya hem gelen hem giden toplam kullanımını inceleyebilirsiniz.</li>
<li><code class="prettyprint">EARSIV</code>, <code class="prettyprint">ESMM</code>, <code class="prettyprint">EMM</code>, <code class="prettyprint">EMUTABAKAT</code>, <code class="prettyprint">SMS</code> ve <code class="prettyprint">MAIL</code> kullanımları sadece gönderim yapıldığından, sorgulanırken <code class="prettyprint">DIRECTION</code> parametresi <code class="prettyprint">INBOX</code> verilemez. </li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_HEADER</strong></td>
<td>ComplexType</td>
<td><strong>Evet</strong></td>
<td>Request Header objesi içerisinde <code class="prettyprint">SESSION_ID</code> ve <code class="prettyprint">APPLICATION_NAME</code> alanı zorunludur.</td>
</tr>
<tr>
<td><strong>PERIOD</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Kullanım sorgulanacak yıl/ay değeri girilir. Değer girilmediği zaman son 6 aylık kullanımlar dönülür. <strong>Format : 201812</strong></td>
</tr>
<tr>
<td><strong>PRODUCT_TYPE</strong></td>
<td>Enum</td>
<td><strong>Hayır</strong></td>
<td>Kullanımı sorgulanmak istenen ürün bilgisi girilir. <strong>Alabileceği değerler :</strong> <code class="prettyprint">ALL</code>, <code class="prettyprint">EFATURA</code>, <code class="prettyprint">EARSIV</code>, <code class="prettyprint">EIRSALIYE</code>, <code class="prettyprint">ESMM</code>, <code class="prettyprint">EMM</code>, <code class="prettyprint">EMUTABAKAT</code>, <code class="prettyprint">SMS</code> ve <code class="prettyprint">MAIL</code>.</td>
</tr>
<tr>
<td><strong>DIRECTION</strong></td>
<td>Enum</td>
<td><strong>Evet</strong></td>
<td>Kullanımı sorgulanmak istenen ürünün hangi yönde gönderildiği bilgisi girilir. <strong>Alabileceği değerler :</strong> <code class="prettyprint">ALL</code>, <code class="prettyprint">INBOX</code> ve <code class="prettyprint">OUTBOX</code>.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>LAST_PROCESS_TIME</strong></td>
<td>ComplexType</td>
<td>Kullanımları bulunduran yapıdır.</td>
</tr>
<tr>
<td><strong>LAST_PROCESS_TIME.USAGE</strong></td>
<td>ComplexType</td>
<td>Kullanım aylarını bulunduran yapıdır.</td>
</tr>
<tr>
<td><strong>USAGE.PERIOD</strong></td>
<td>String</td>
<td>Kullanımların ait olduğu yıl/ay değeridir.</td>
</tr>
<tr>
<td><strong>USAGE.TOTAL_USAGE</strong></td>
<td>String</td>
<td>Tüm ürünlerin o ay içerisindeki toplam kullanım adetidir.</td>
</tr>
<tr>
<td><strong>USAGE.PRODUCT</strong></td>
<td>ComplexType</td>
<td>Ürünlere göre kullanım adetlerinin tutulduğu yapıdır.</td>
</tr>
<tr>
<td><strong>PRODUCT.EFATURA</strong></td>
<td>String</td>
<td>E-Fatura kullanım adeti.</td>
</tr>
<tr>
<td><strong>PRODUCT.EARSIV</strong></td>
<td>String</td>
<td>E-Arşiv Fatura kullanım adeti.</td>
</tr>
<tr>
<td><strong>PRODUCT.EIRSALIYE</strong></td>
<td>String</td>
<td>E-İrsaliye kullanım adeti.</td>
</tr>
<tr>
<td><strong>PRODUCT.ESMM</strong></td>
<td>String</td>
<td>E-Serbest Meslek Makbuzu kullanım adeti.</td>
</tr>
<tr>
<td><strong>PRODUCT.EMM</strong></td>
<td>String</td>
<td>E-Müstahsil Makbuzu kullanım adeti.</td>
</tr>
<tr>
<td><strong>PRODUCT.EMUTABAKAT</strong></td>
<td>String</td>
<td>E-Mutabakat kullanım adeti.</td>
</tr>
<tr>
<td><strong>PRODUCT.SMS</strong></td>
<td>String</td>
<td>Sms kullanım adeti.</td>
</tr>
<tr>
<td><strong>PRODUCT.MAIL</strong></td>
<td>String</td>
<td>Mail kullanım adeti.</td>
</tr>
</tbody></table>

          <h1 id="di-er-e-d-n-m-servisleri">Diğer E-Dönüşüm Servisleri</h1>

<p>Tüm e-Dönüşüm modüllerin içerisinde bulunduran webservistir.
<strong>Lütfen bu servisi Özel entegratör ile kararlaştırmadan kullanmayınız.</strong></p>

<h2 id="webservice-endpoint-wsdl-url">Webservice Endpoint (WSDL) URL</h2>

<table><thead>
<tr>
<th>Ürün</th>
<th>Endpoint URL</th>
</tr>
</thead><tbody>
<tr>
<td>Kimlik Doğrulama</td>
<td><a href="https://efaturatest.izibiz.com.tr/AuthenticationWS?wsdl">https://efaturatest.izibiz.com.tr/AuthenticationWS?wsdl</a></td>
</tr>
<tr>
<td>E-Fatura Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/EInvoiceWS?wsdl">https://efaturatest.izibiz.com.tr/EInvoiceWS?wsdl</a></td>
</tr>
<tr>
<td>E-Arşiv Fatura Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/EIArchiveWS/EFaturaArchive?wsdl">https://efaturatest.izibiz.com.tr/EIArchiveWS/EFaturaArchive?wsdl</a></td>
</tr>
<tr>
<td>E-İrsaliye Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/EIrsaliyeWS/EIrsaliye?wsdl">https://efaturatest.izibiz.com.tr/EIrsaliyeWS/EIrsaliye?wsdl</a></td>
</tr>
<tr>
<td>E-Müstahsil Webservis</td>
<td><a href="http://efaturatest.izibiz.com.tr/CreditNoteWS/CreditNote?wsdl">http://efaturatest.izibiz.com.tr/CreditNoteWS/CreditNote?wsdl</a></td>
</tr>
<tr>
<td>E-Mutabakat Webservis</td>
<td><a href="http://efaturatest.izibiz.com.tr/ReconciliationWS?wsdl">http://efaturatest.izibiz.com.tr/ReconciliationWS?wsdl</a></td>
</tr>
<tr>
<td>E-Serbest Meslek Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/SmmWS?wsdl">https://efaturatest.izibiz.com.tr/SmmWS?wsdl</a></td>
</tr>
<tr>
<td>E-ZRapor Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/ZReportWS?wsdl">https://efaturatest.izibiz.com.tr/ZReportWS?wsdl</a></td>
</tr>
<tr>
<td>Faturalama Webservis</td>
<td><a href="https://efaturatest.izibiz.com.tr/BillingWS?wsdl">https://efaturatest.izibiz.com.tr/BillingWS?wsdl</a></td>
</tr>
</tbody></table>

<h3 id="portal-uygulamas">Portal Uygulaması</h3>

<p>Entegrasyon sürecinde Portal uygulamamızı aşağıda ki durumlar için kullanabilirsiniz:</p>

<ul>
<li>Belgelerin durumunu kontrol</li>
<li>Farklı senaryolar için belge düzenleyerek XML içeriğini kontrol</li>
<li>Alıcı firmanın mükellefiyet sorgulaması</li>
</ul>

<p>Test Portal Adresimiz: <a href="https://portaltest.izibiz.com.tr">https://portaltest.izibiz.com.tr</a></p>

<p>Test portali erişim bilgileri için <strong>entegrasyon@izibiz.com.tr</strong> adresi ile iletişime geçebilirsiniz.</p>

<h2 id="dikkat-edilecek-hususlar">Dikkat Edilecek Hususlar</h2>

<p>Uygulamanızı tasarlarken aşağıda ki bilgiler faydalı olacaktır:</p>

<ol>
<li>Proxy servisinde bulunan <strong>Login</strong> servisi ile oturum açarak session id alınacak. Session Id sistemimiz tarafında 8 saate kadar zaman aşımına uğramadığı için kullanıcı giriş yapınca session id alıp bütün kullanım süresinde aynı session id kullanabilirsiniz.</li>
<li>Proxy servisinde bulunan <strong>Logout</strong> metodu ile kullanıcı mutabakat programını kapatınca oturum kapatılabilir.</li>
<li>Proxy servisinde bulunan <strong>SendInvoice</strong>, <strong>SendEInvoice</strong>, <strong>LoadInvoice</strong>, <strong>GetInvoice</strong>, <strong>GetUserList</strong>, <strong>CheckUser</strong>, <strong>MarkInvoice</strong>, <strong>GetInvoiceStatus</strong>, <strong>GetUserListBinary</strong>, <strong>GetAllUserListBinary</strong> metodlarına dair detaylar için <strong>E-Fatura</strong> kısmına bakınız.</li>
<li>Proxy servisinde bulunan <strong>SendEArchiveInvoice</strong>, <strong>CancelEArchiveInvoice</strong>, <strong>ReadFromArchive</strong>, <strong>GetEArchiveReport</strong>, <strong>GetEArchiveInvoiceStatus</strong>, <strong>SendInvoiceByXml</strong> metodlarına dair detaylar için <strong>E-Arşiv Fatura</strong> kısmına bakınız.</li>
<li>Proxy servisinde bulunan <strong>SendDespatchAdvice</strong>, <strong>LoadDespatchAdvice</strong>, <strong>GetDespatchAdviceStatus</strong>, <strong>GetDespatchAdvice</strong>, <strong>MarkDespatchAdvice</strong>, <strong>SendReceiptAdvice</strong>, <strong>LoadReceiptAdvice</strong>, <strong>GetReceiptAdviceStatus</strong>, <strong>GetReceiptAdvice</strong>, <strong>MarkReceiptAdvice</strong> metodlarına dair detaylar için <strong>E-İrsaliye</strong> kısmına bakınız.</li>
<li>Proxy servisinde bulunan <strong>GetSmm</strong>, <strong>GetSmmStatus</strong>, <strong>SendSmm</strong>, <strong>CancelSmm</strong>, <strong>LoadSmm</strong> metodlarına dair detaylar için <strong>E-Serbest Meslek Makbuzu</strong> kısmına bakınız.</li>
<li>Proxy servisinde bulunan <strong>CancelCreditNote</strong>, <strong>GetCreditNote</strong>, <strong>GetCreditNoteReport</strong>, <strong>GetCreditNoteStatus</strong>, <strong>LoadCreditNote</strong>, <strong>MarkCreditNote</strong>, <strong>SendCreditNote</strong> metodlarına dair detaylar için <strong>E-Müstahsil</strong> kısmına bakınız.</li>
<li>Proxy servisinde bulunan <strong>GetReconciliationStatus</strong>, <strong>SendMailReconciliation</strong>, <strong>SendReconciliation</strong> metodlarına dair detaylar için <strong>E-Mutabakat</strong> kısmına bakınız.</li>
</ol>

<h2 id="e-fatura-metodlar">E-Fatura Metodları</h2>

<p>e-Fatura servisi, e-fatura mükellefinin fatura gönderimini ve gelen faturaları kendisi sistemine çekmesini sağlayan webservis uygulamasının clientıdır.</p>

<ul>
<li>Şu metodları içerir.</li>
<li>SendInvoice</li>
<li>SendEInvoice</li>
<li>LoadInvoice</li>
<li>GetInvoice</li>
<li>GetUserList</li>
<li>CheckUser</li>
<li>MarkInvoice</li>
<li>GetInvoiceStatus</li>
<li>SendInvoiceResp</li>
<li>GetUserListBinary</li>
<li>GetAllUserListBinary</li>
</ul>

<h2 id="dikkat-edilecek-hususlar-e-fatura">Dikkat Edilecek Hususlar(E-Fatura)</h2>

<ol>
<li><strong>Kimlik Doğrulama (Authentication)</strong> Webservisinde bulunan <strong>Login</strong> servisi ile oturum açarak session id alınacak. Session Id sistemimiz tarafında 8 saate kadar zaman aşımına uğramadığı için kullanıcı giriş yapınca session id alıp bütün kullanım süresinde aynı session id kullanabilirsiniz.</li>
<li>E-Fatura Mükellefi olan firmalara kesilen faturaları UBL-TR formatına dönüştürerek (ekte örnek fatura bulunuyor) İzibiz sunucularına gönderebilirsiniz. Her fatura içerisinde faturanın görüntülenmesini sağlayan XSLT dokümanı olmalıdır.</li>
<li><strong>SendInvoice</strong> metodu ile fatura gönderimi yapılacak. Gönderim esnasında eğer faturanın alıcısına ait birden fazla Posta Kutusu bulunuyorsa ekranda seçilerek gönderilmesi sağlanmalı. Sadece 1 adet PK adresi varsa seçim yapılmadan gönderim sağlanabilir.</li>
<li><strong>GetInvoiceStatus</strong> metodu ile gelen/giden faturaların durumları sorgulanacak. Nihai duruma erişene kadar faturanın durumu özel entegratör sisteminden minumum 4 saatte bir sorgulanmalıdır. <strong>Sık sorgulama yapmayınız.</strong></li>
<li><strong>GetInvoice</strong> metodu ile firmaya gelen faturalar müşteri bilgisayarına aktarılır. İzibiz sistemlerine gelen yeni faturaları almanız gerekmektedir. Servis ile yeni gelen en fazla 100 adet faturayı çekebilirsiniz. Eğer dönen listede 100 adet fatura varsa yeniden getinvoice servisi çağırılarak başka fatura olup olmadığı kontrol edilmelidir. Dönen listede 100den az fatura varsa tekrar sorgulama yapmaya gerek yoktur. Fatura çekme zamanlayıcı ile yapılıyorsa en az 15 dk bir servis çağırılmalıdır.</li>
<li><strong>MarkInvoice</strong> metodu ile başarılı şekilde teslim alınan faturalar izibiz sistemlerinde okundu olarak işaretlenir. Böylece bir sonra ki getinvoice servisi çağrılınca dönülmez.</li>
<li>Gelen bir faturaya 8 gün içerisinde kabul veya red gönderilebilir. <strong>8 günü geçtikten sonra kabul/red yapılması engellenmelidir. Temel faturalar için yanıt gönderilmesi kısıtlanmalıdır.</strong></li>
<li>Ticari bir faturaya elektronik ortamda en fazla 1 adet yanıt gönderilebilir. Bundan dolayı bir faturaya başarıyla yanıt (kabul/red) gönderilmişse farklı bir yanıt gönderilmesi kısıtlanmalıdır.</li>
<li><strong>Kimlik Doğrulama (Authentication)</strong> Webservisinde bulunan <strong>Logout</strong> metodu ile kullanıcı e-fatura programını kapatınca veya sizin belirlediğiniz bir sürede oturumu kapatabilirsiniz.</li>
</ol>

<h2 id="fatura-g-nderme-sendinvoicebyxml">Fatura Gönderme(SendInvoiceByXml)</h2>

<ul>
<li>UBL-TR XML üretmeden webservis parametreleri doldurularak fatura gönderimi sağlar.</li>
<li>Webservice Endpoint URL için iletişme geçiniz.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>İşlem yapılacak oturum. Oturum açmak için <code class="prettyprint">Login</code> metodu kullanılır.</td>
</tr>
<tr>
<td><strong>INVOICE_PROPERTIES</strong></td>
<td>Complex</td>
<td><strong>Evet</strong></td>
<td>Fatura gönderimi ile ilgili parametreler</td>
</tr>
<tr>
<td><strong>INVOICE_PROPERTIES.INVOICE_TYPE</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>E-Fatura olarak göndermek için <code class="prettyprint">EINVOICE</code> E-Arşiv olarak göndermek için <code class="prettyprint">EARCHIVE</code> değeri gönderilmelidir.</td>
</tr>
<tr>
<td><strong>INVOICE_PROPERTIES.EMAIL_FLAG</strong></td>
<td>boolean</td>
<td>Hayır</td>
<td>Değerler [true,false]: E-Arşiv faturalarını e-posta olarak iletmek için <code class="prettyprint">true</code> değeri gönderilmelidir. Parametre gönderilmez veya <code class="prettyprint">false</code> değeri gönderilirse fatura e-posta gönderilmez. E-Fatura için bu parametre dikkate alınmaz.</td>
</tr>
<tr>
<td><strong>INVOICE</strong></td>
<td>Complex</td>
<td><strong>Evet</strong></td>
<td>Gönderilecek fatura alanları</td>
</tr>
<tr>
<td><strong>INVOICE.PROFILE_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Gönderilecek fatura profili. E-Arşiv için <code class="prettyprint">EARSIVFATURA</code> olmalıdır. E-Fatura için  [TEMELFATURA, TICARIFATURA, YOLCUBERABERFATURA, IHRACAT] değerleri içerebilir.</td>
</tr>
<tr>
<td><strong>INVOICE.INVOICE_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Faturanın numarası (AAA2019000000001 formatında olmak zorunda)</td>
</tr>
<tr>
<td><strong>INVOICE.UUID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Faturanın ETTN numarası</td>
</tr>
<tr>
<td><strong>INVOICE.ISSUE_DATE</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Fatura Tarihi (YYYY-AA-GG formatında)</td>
</tr>
<tr>
<td><strong>INVOICE.ISSUE_TIME</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Fatura Düzenleme Saati (SS:DD:ss)</td>
</tr>
<tr>
<td><strong>INVOICE.INVOICE_TYPE_CODE</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>E-Fatura için [SATIS, IADE, TEVKIFAT, ISTISNA, OZELMATRAH, IHRACKAYITLI]. E-Arşiv için SATIS ve IADE dışında değer gönderilemez.</td>
</tr>
<tr>
<td><strong>INVOICE.DOCUMENT_CURRENCY_CODE</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Fatura para birimi [TRY, USD, EUR vs] <a href="/resource/BELGELER/UBL-TR Kod Listeleri - V 1.18.pdf">Diğer para birimleri için Kod Listesi dokümanında Para Birimi Kodları bölümünü inceleyiniz.</a></td>
</tr>
<tr>
<td><strong>INVOICE.LINE_COUNT_NUMERIC</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Fatura satır sayısı</td>
</tr>
<tr>
<td><strong>INVOICE.CALCULATION_RATE</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Dövizli faturalar kur bilgisi</td>
</tr>
<tr>
<td><strong>INVOICE.NOTE</strong></td>
<td>Array</td>
<td>Hayır</td>
<td>Faturaya eklenecek notlar. Çoklanabilir.</td>
</tr>
<tr>
<td><strong>INVOICE.ORDER_REFERENCE</strong></td>
<td>Complex</td>
<td>Hayır</td>
<td>Sipariş bilgileri</td>
</tr>
<tr>
<td>INVOICE.ORDER_REFERENCE.ID</td>
<td>String</td>
<td>Hayır</td>
<td>Sipariş numarası</td>
</tr>
<tr>
<td>INVOICE.ORDER_REFERENCE.ISSUE_DATE</td>
<td>String</td>
<td>Hayır</td>
<td>Sipariş tarihi</td>
</tr>
<tr>
<td><strong>INVOICE.DESPACTH_DOCUMENT_REFERENCE</strong></td>
<td>Complex</td>
<td>Hayır</td>
<td>İrsaliye bilgileri. Çoklanabilir.</td>
</tr>
<tr>
<td>DESPACTH_DOCUMENT_REFERENCE.ID</td>
<td>String</td>
<td>Hayır</td>
<td>İrsaliye numarası</td>
</tr>
<tr>
<td>DESPACTH_DOCUMENT_REFERENCE.ISSUE_DATE</td>
<td>String</td>
<td>Hayır</td>
<td>İrsaliye tarihi</td>
</tr>
<tr>
<td><strong>INVOICE.ADDITIONAL_DOCUMENT_REFERENCE</strong></td>
<td>Complex</td>
<td><strong>Evet</strong></td>
<td>Ek belgeler. Çoklanabilir. En az fatura şablonu (xslt) eklenmelidir.</td>
</tr>
<tr>
<td>ADDITIONAL_DOCUMENT_REFERENCE.ID</td>
<td>String</td>
<td>Hayır</td>
<td>Ek belge id</td>
</tr>
<tr>
<td>ADDITIONAL_DOCUMENT_REFERENCE.ISSUE_DATE</td>
<td>String</td>
<td>Hayır</td>
<td>Ek belge tarihi</td>
</tr>
<tr>
<td>ADDITIONAL_DOCUMENT_REFERENCE.DOCUMENT_TYPE_CODE</td>
<td>String</td>
<td>Hayır</td>
<td>Ek belge tip kodu. Fatura şablonu için XSLT değeri gönderilmelidir.</td>
</tr>
<tr>
<td>ADDITIONAL_DOCUMENT_REFERENCE.DOCUMENT_TYPE</td>
<td>String</td>
<td>Hayır</td>
<td>Ek belge tipi</td>
</tr>
<tr>
<td>ADDITIONAL_DOCUMENT_REFERENCE.ATTACHMENT</td>
<td>Base64</td>
<td><strong>Evet</strong></td>
<td>Belgenin Base64Binary değeri</td>
</tr>
<tr>
<td><strong>INVOICE.ACCOUNTING_SUPPLIER_PARTY</strong></td>
<td>Complex</td>
<td><strong>Evet</strong></td>
<td>Faturayı düzenleyen tarafın bilgileri</td>
</tr>
<tr>
<td>ACCOUNTING_SUPPLIER_PARTY.PARTY</td>
<td>Complex</td>
<td>Hayır</td>
<td>Gönderen firma bilgileri</td>
</tr>
<tr>
<td>PARTY.WEB_SITE_URI</td>
<td>String</td>
<td>Hayır</td>
<td>Gönderen firma websitesi (http://www.firmaadres.com formatında)</td>
</tr>
<tr>
<td>PARTY.PARTY_IDENTIFICATION</td>
<td>Complex</td>
<td>Hayır</td>
<td>Gönderen firmayı tanımlayan bilgiler.  VKN/TCKN no bilgisi ekleneblir. Çoklanabilir. Bu alan çoklanarak şu bilgiler eklenebilir.</td>
</tr>
<tr>
<td>PARTY.PARTY_IDENTIFICATION.ID</td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Düzenleyen tarafı tanımlayan bilgi. VKN veya TCKN bilgisi olmak zorundadır.</td>
</tr>
<tr>
<td>PARTY.PARTY_IDENTIFICATION.TYPE</td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Düzenleyen tarafın vergi kimlik numarası veya TC kimlik numarası zorunludur. <a href="/resource/BELGELER/UBL-TR Kod Listeleri - V 1.18.pdf">Kod Listesi dokümanında Kimlik Şemaları bölümünü inceleyiniz.</a></td>
</tr>
<tr>
<td>PARTY.NAME</td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Düzenleyen firma ünvanı</td>
</tr>
<tr>
<td>PARTY.POSTAL_ADDRESS</td>
<td>Complex</td>
<td><strong>Evet</strong></td>
<td>Düzenleyen firma adresi</td>
</tr>
<tr>
<td>POSTAL_ADDRESS.STREET_NAME</td>
<td>String</td>
<td>Hayır</td>
<td>Adres (Sokak mahalle cadde vs)</td>
</tr>
<tr>
<td>POSTAL_ADDRESS.BUILDING_NUMBER</td>
<td>String</td>
<td>Hayır</td>
<td>Bina numarası</td>
</tr>
<tr>
<td>POSTAL_ADDRESS.CITY_SUB_DIVISION_NAME</td>
<td>String</td>
<td>Hayır</td>
<td>İlçe</td>
</tr>
<tr>
<td>POSTAL_ADDRESS.CITY_NAME</td>
<td>String</td>
<td>Hayır</td>
<td>İl</td>
</tr>
<tr>
<td>POSTAL_ADDRESS.POSTAL_ZONE</td>
<td>String</td>
<td>Hayır</td>
<td>Posta kodu</td>
</tr>
<tr>
<td>POSTAL_ADDRESS.COUNTRY</td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Ülke. (Türkiye)</td>
</tr>
<tr>
<td>PARTY.PARTY_TAX_SCHEME</td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Vergi Dairesi.</td>
</tr>
<tr>
<td>PARTY.CONTACT</td>
<td>Complex</td>
<td>Hayır</td>
<td>Düzenleyen firma irtibat bilgileri</td>
</tr>
<tr>
<td>CONTACT.TELEPHONE</td>
<td>String</td>
<td>Hayır</td>
<td>Telefon numarası</td>
</tr>
<tr>
<td>CONTACT.TELEFAX</td>
<td>String</td>
<td>Hayır</td>
<td>Faks numarası</td>
</tr>
<tr>
<td>CONTACT.ELECTRONIC_MAIL</td>
<td>String</td>
<td>Hayır</td>
<td>E-Posta adresi</td>
</tr>
<tr>
<td>PARTY.FIRST_NAME</td>
<td>String</td>
<td>Hayır</td>
<td>Düzenleyen şahıs firması ise firma sahibinin Adı zorunlu</td>
</tr>
<tr>
<td>PARTY.FAMILY_NAME</td>
<td>String</td>
<td>Hayır</td>
<td>Düzenleyen şahıs firması ise firma sahibinin Soyadı zorunlu</td>
</tr>
<tr>
<td><strong>INVOICE.ACCOUNTING_CUSTOMER_PARTY</strong></td>
<td>Complex</td>
<td><strong>Evet</strong></td>
<td>Faturayı alan tarafın bilgileri</td>
</tr>
<tr>
<td>PARTY.WEB_SITE_URI</td>
<td>String</td>
<td>Hayır</td>
<td>Alıcı firma websitesi (http://www.firmaadres.com formatında)</td>
</tr>
<tr>
<td>PARTY.PARTY_IDENTIFICATION</td>
<td>Complex</td>
<td>Hayır</td>
<td>Alıcı firmayı tanımlayan bilgiler.  VKN/TCKN no bilgisi ekleneblir. Çoklanabilir. Bu alan çoklanarak şu bilgiler eklenebilir.</td>
</tr>
<tr>
<td>PARTY.PARTY_IDENTIFICATION.ID</td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Alıcı tarafı tanımlayan bilgi. VKN veya TCKN bilgisi olmak zorundadır.</td>
</tr>
<tr>
<td>PARTY.PARTY_IDENTIFICATION.TYPE</td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Alıcı tarafın vergi kimlik numarası veya TC kimlik numarası zorunludur. <a href="/resource/BELGELER/UBL-TR Kod Listeleri - V 1.18.pdf">Kod Listesi dokümanında Kimlik Şemaları bölümünü inceleyiniz.</a></td>
</tr>
<tr>
<td>PARTY.NAME</td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Alıcı firma ünvanı</td>
</tr>
<tr>
<td>PARTY.POSTAL_ADDRESS</td>
<td>Complex</td>
<td><strong>Evet</strong></td>
<td>Alıcı firma adresi</td>
</tr>
<tr>
<td>POSTAL_ADDRESS.STREET_NAME</td>
<td>String</td>
<td>Hayır</td>
<td>Adres (Sokak mahalle cadde vs)</td>
</tr>
<tr>
<td>POSTAL_ADDRESS.BUILDING_NUMBER</td>
<td>String</td>
<td>Hayır</td>
<td>Bina numarası</td>
</tr>
<tr>
<td>POSTAL_ADDRESS.CITY_SUB_DIVISION_NAME</td>
<td>String</td>
<td>Hayır</td>
<td>İlçe</td>
</tr>
<tr>
<td>POSTAL_ADDRESS.CITY_NAME</td>
<td>String</td>
<td>Hayır</td>
<td>İl</td>
</tr>
<tr>
<td>POSTAL_ADDRESS.POSTAL_ZONE</td>
<td>String</td>
<td>Hayır</td>
<td>Posta kodu</td>
</tr>
<tr>
<td>POSTAL_ADDRESS.COUNTRY</td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Ülke. (Türkiye)</td>
</tr>
<tr>
<td>PARTY.PARTY_TAX_SCHEME</td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Vergi Dairesi. Alıcısı firma olanlar için zorunludur. Nihai tüketiciye düzenenlenen faturalar için zorunlu değildir.</td>
</tr>
<tr>
<td>PARTY.CONTACT</td>
<td>Complex</td>
<td>Hayır</td>
<td>Alıcı firma irtibat bilgileri</td>
</tr>
<tr>
<td>CONTACT.TELEPHONE</td>
<td>String</td>
<td>Hayır</td>
<td>Telefon numarası</td>
</tr>
<tr>
<td>CONTACT.TELEFAX</td>
<td>String</td>
<td>Hayır</td>
<td>Faks numarası</td>
</tr>
<tr>
<td>CONTACT.ELECTRONIC_MAIL</td>
<td>String</td>
<td>Hayır</td>
<td>E-Posta adresi. Bu alan boş ise mail gönderimi sağlanamaz.</td>
</tr>
<tr>
<td>PARTY.FIRST_NAME</td>
<td>String</td>
<td>Hayır</td>
<td>Alıcı firma şahıs firması ise firma sahibinin Adı zorunlu veya nihai tüketicinin adı</td>
</tr>
<tr>
<td>PARTY.FAMILY_NAME</td>
<td>String</td>
<td>Hayır</td>
<td>Alıcı firma şahıs firması ise firma sahibinin Soyadı zorunlu veya nihai tüketici soyadı</td>
</tr>
<tr>
<td><strong>INVOICE.DELIVERY</strong></td>
<td>Complex</td>
<td><strong>Evet</strong></td>
<td>Gönderim, Taşıma, Sevkiyat Bilgileri. E-Arşiv için Zorunludur.</td>
</tr>
<tr>
<td><strong>DELIVERY.CARRIER_PARTY</strong></td>
<td>Complex</td>
<td><strong>Evet</strong></td>
<td>Taşıyan firma bilgiler. Internet üzerinden yapılan satışlar için düzenlenen E-Arşiv fatura için zorunludur.</td>
</tr>
<tr>
<td>CARRIER_PARTY.ID</td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Taşıyan firma/şahıs 10 hane VKN veya 11 hane TCKN değeri</td>
</tr>
<tr>
<td>CARRIER_PARTY.TYPE</td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Değerler [<code class="prettyprint">VKN</code>,<code class="prettyprint">TCKN</code>]. Taşıyan kurumsal firma ise <code class="prettyprint">VKN</code>, şahıs firması veya şahıs ise <code class="prettyprint">TCKN</code> gönderilmeldir.</td>
</tr>
<tr>
<td>CARRIER_PARTY.NAME</td>
<td>String</td>
<td>Hayır</td>
<td>Taşıyan firma ünvanı</td>
</tr>
<tr>
<td>CARRIER_PARTY.FIRST_NAME</td>
<td>String</td>
<td>Hayır</td>
<td>Taşıyan şahıs adı</td>
</tr>
<tr>
<td>CARRIER_PARTY.FAMILY_NAME</td>
<td>String</td>
<td>Hayır</td>
<td>Taşıyan şahıs soyadı</td>
</tr>
<tr>
<td>CARRIER_PARTY.POSTAL_ADDRESS</td>
<td>Complex</td>
<td><strong>Evet</strong></td>
<td>Taşıyan firma adresi</td>
</tr>
<tr>
<td>POSTAL_ADDRESS.STREET_NAME</td>
<td>String</td>
<td>Hayır</td>
<td>Adres (Sokak mahalle cadde vs)</td>
</tr>
<tr>
<td>POSTAL_ADDRESS.BUILDING_NUMBER</td>
<td>String</td>
<td>Hayır</td>
<td>Bina numarası</td>
</tr>
<tr>
<td>POSTAL_ADDRESS.CITY_SUB_DIVISION_NAME</td>
<td>String</td>
<td>Hayır</td>
<td>İlçe</td>
</tr>
<tr>
<td>POSTAL_ADDRESS.CITY_NAME</td>
<td>String</td>
<td>Hayır</td>
<td>İl</td>
</tr>
<tr>
<td>POSTAL_ADDRESS.POSTAL_ZONE</td>
<td>String</td>
<td>Hayır</td>
<td>Posta kodu</td>
</tr>
<tr>
<td>POSTAL_ADDRESS.COUNTRY</td>
<td>String</td>
<td>Hayır</td>
<td>Ülke. (Türkiye)</td>
</tr>
<tr>
<td>CARRIER_PARTY.ACTULA_DEPATCH_DATE</td>
<td>String</td>
<td>Hayır</td>
<td>Fiili Sevk Tarihi</td>
</tr>
<tr>
<td><strong>INVOICE.PAYMENT_MEANS</strong></td>
<td>Complex</td>
<td>Hayır</td>
<td>Ödeme Şekli. Internet satışları için zorunludur.</td>
</tr>
<tr>
<td>PAYMENT_MEANS.PAYMENT_MEANS_CODE</td>
<td>String</td>
<td>Hayır</td>
<td>Ödeme şeklinin kodu</td>
</tr>
<tr>
<td>PAYMENT_MEANS.PAYMENT_DUE_DATE</td>
<td>String</td>
<td>Hayır</td>
<td>Son ödeme günü yıl-ay-gün formatında</td>
</tr>
<tr>
<td>PAYMENT_MEANS.PAYMENT_CHANNEL_CODE</td>
<td>String</td>
<td>Hayır</td>
<td>Ödeme kanalı kodu</td>
</tr>
<tr>
<td>PAYMENT_MEANS.INSTRUCTION_NOTE</td>
<td>String</td>
<td>Hayır</td>
<td>Ödeme ile ilgili açıklamalar serbest metin</td>
</tr>
<tr>
<td><strong>INVOICE.PAYMENT_TERMS</strong></td>
<td>Complex</td>
<td>Hayır</td>
<td>Ödeme Koşulları</td>
</tr>
<tr>
<td>PAYMENT_TERMS.PENALTY_SURCHARGE_PERCENT</td>
<td>String</td>
<td>Hayır</td>
<td>Ödemenin gecikmesi durumunda uygulanacak ceza oranı numerik olarak girilir.</td>
</tr>
<tr>
<td>PAYMENT_TERMS.AMOUNT</td>
<td>Decimal</td>
<td>Hayır</td>
<td>Ödemenin gecikmesi durumunda uygulanacak ceza tutarı numerik olarak girilir.</td>
</tr>
<tr>
<td>PAYMENT_TERMS.NOTE</td>
<td>String</td>
<td>Hayır</td>
<td>Ödeme koşulları ile ilgili açıklama serbest metin olarak girilir.</td>
</tr>
<tr>
<td><strong>INVOICE.TAX_TOTAL</strong></td>
<td>Complex</td>
<td>Hayır</td>
<td>Vergi Toplamı</td>
</tr>
<tr>
<td>TAX_TOTAL.TAX_AMOUNT</td>
<td>Decimal</td>
<td>Hayır</td>
<td>Toplam vergi tutarı girilir.</td>
</tr>
<tr>
<td>TAX_TOTAL.TAX_SUB_TOTAL</td>
<td>Complex</td>
<td>Hayır</td>
<td>Vergi ara toplamı. Çoklanarak birden fazla vergi tipi eklenebilir.</td>
</tr>
<tr>
<td>TAX_SUB_TOTAL.TAX_ABLE_AMOUNT</td>
<td>Decimal</td>
<td>Hayır</td>
<td>Verginin üzerinden hesaplandığı tutar (matrah) bilgisi</td>
</tr>
<tr>
<td>TAX_SUB_TOTAL.TAX_AMOUNT</td>
<td>Decimal</td>
<td>Hayır</td>
<td>Hesaplanan Vergi Tutarı</td>
</tr>
<tr>
<td>TAX_SUB_TOTAL.CALCULATION_SEQ_NUMERIC</td>
<td>String</td>
<td>Hayır</td>
<td>Vergi hesaplamasında sıra numarası.</td>
</tr>
<tr>
<td>TAX_SUB_TOTAL.PERCENT</td>
<td>Decimal</td>
<td>Hayır</td>
<td>Vergi oranı</td>
</tr>
<tr>
<td>TAX_SUB_TOTAL.TAX_NAME</td>
<td>String</td>
<td>Hayır</td>
<td>Vergi türü ismi. <a href="/resource/BELGELER/UBL-TR Kod Listeleri - V 1.18.pdf">Kod Listesi dokümanında Vergi Kodları Listesini inceleyiniz.</a></td>
</tr>
<tr>
<td>TAX_SUB_TOTAL.TAX_TYPE_CODE</td>
<td>String</td>
<td>Hayır</td>
<td>Vergi Tipi Kodu. <a href="/resource/BELGELER/UBL-TR Kod Listeleri - V 1.18.pdf">Kod Listesi dokümanında Vergi Kodları Listesini inceleyiniz.</a></td>
</tr>
<tr>
<td>TAX_SUB_TOTAL.TAX_EXEMPTION_REASON_CODE</td>
<td>String</td>
<td>Hayır</td>
<td>Vergi muafiyet, istisna kodu Bknz. <a href="/resource/BELGELER/UBL-TR Kod Listeleri - V 1.18.pdf">Kod listeleri</a></td>
</tr>
<tr>
<td>TAX_SUB_TOTAL.TAX_EXEMPTION_REASON_CODE</td>
<td>String</td>
<td>Hayır</td>
<td>Vergi muafiyet, istisna sebepleri serbest metin. Bknz. <a href="/resource/BELGELER/UBL-TR Kod Listeleri - V 1.18.pdf">Kod listeleri</a></td>
</tr>
<tr>
<td><strong>INVOICE.WITH_HOLDING_TAX</strong></td>
<td>Complex</td>
<td>Hayır</td>
<td>Tevkifatlı faturalarda, uygulanan tevkifat miktarları, oranları ve diğer bilgileri girilir.</td>
</tr>
<tr>
<td>WITH_HOLDING_TAX.TAX_AMOUNT</td>
<td>Decimal</td>
<td>Hayır</td>
<td>Tevkifat tutari</td>
</tr>
<tr>
<td>WITH_HOLDING_TAX.TAX_SUB_TOTAL</td>
<td>Complex</td>
<td>Hayır</td>
<td>Tevkifat ara toplamı. Çoklanarak birden fazla tevkifat tipi eklenebilir.</td>
</tr>
<tr>
<td>WITH_HOLDING_TAX.TAX_ABLE_AMOUNT</td>
<td>Decimal</td>
<td>Hayır</td>
<td>Tevkifatın üzerinden hesaplandığı tutar (matrah) bilgisi</td>
</tr>
<tr>
<td>WITH_HOLDING_TAX.TAX_AMOUNT</td>
<td>Decimal</td>
<td>Hayır</td>
<td>Hesaplanan Tevkifat Tutarı</td>
</tr>
<tr>
<td>WITH_HOLDING_TAX.CALCULATION_SEQ_NUMERIC</td>
<td>String</td>
<td>Hayır</td>
<td>Tevkifat hesaplamasında sıra numarası.</td>
</tr>
<tr>
<td>WITH_HOLDING_TAX.PERCENT</td>
<td>Decimal</td>
<td>Hayır</td>
<td>Tevkifat oranı</td>
</tr>
<tr>
<td>WITH_HOLDING_TAX.TAX_NAME</td>
<td>String</td>
<td>Hayır</td>
<td>Tevkifat türü ismi. <a href="/resource/BELGELER/UBL-TR Kod Listeleri - V 1.18.pdf">Kod Listesi dokümanında Tevkifat Kodları Listesi bölümünü inceleyiniz.</a></td>
</tr>
<tr>
<td>WITH_HOLDING_TAX.TAX_TYPE_CODE</td>
<td>String</td>
<td>Hayır</td>
<td>Tevkifat Tipi Kodu. <a href="/resource/BELGELER/UBL-TR Kod Listeleri - V 1.18.pdf">Kod Listesi dokümanında Tevkifat Kodları Listesi bölümünü inceleyiniz.</a></td>
</tr>
<tr>
<td>WITH_HOLDING_TAX.TAX_EXEMPTION_REASON_CODE</td>
<td>String</td>
<td>Hayır</td>
<td>Vergi muafiyet, istisna kodu Bknz. <a href="/resource/BELGELER/UBL-TR Kod Listeleri - V 1.18.pdf">Kod listeleri</a></td>
</tr>
<tr>
<td>WITH_HOLDING_TAX.TAX_EXEMPTION_REASON_CODE</td>
<td>String</td>
<td>Hayır</td>
<td>Vergi muafiyet, istisna sebepleri serbest metin. Bknz. <a href="/resource/BELGELER/UBL-TR Kod Listeleri - V 1.18.pdf">Kod listeleri</a></td>
</tr>
<tr>
<td><strong>INVOICE.ALLOWANCE_CHARGES</strong></td>
<td>Complex</td>
<td>Hayır</td>
<td>Iskonto / Artırım. Eğer iskonto veya artırım uygulanacaksa eklenir. Birden fazla iskonto/artırım uygulamak için çoklanır.</td>
</tr>
<tr>
<td>ALLOWANCE_CHARGES.CHARGE_INDICATOR</td>
<td>String</td>
<td>Hayır</td>
<td>Eğer artırım ise <code class="prettyprint">Y</code> değilse <code class="prettyprint">N</code> değeri doldurulur</td>
</tr>
<tr>
<td>ALLOWANCE_CHARGES.MULTIPLIER_FACTOR_NUMERIC</td>
<td>Decimal</td>
<td>Hayır</td>
<td>Iskonto/ Artırım Oranı</td>
</tr>
<tr>
<td>ALLOWANCE_CHARGES.AMOUNT</td>
<td>Decimal</td>
<td>Hayır</td>
<td>Iskonto/ Artırım Tutarı</td>
</tr>
<tr>
<td>ALLOWANCE_CHARGES.BASE_AMOUNT</td>
<td>Decimal</td>
<td>Hayır</td>
<td>Iskonto veya artırımın uygulandığı tutar</td>
</tr>
<tr>
<td><strong>INVOICE.LEGAL_MONETARY_TOTAL</strong></td>
<td>Complex</td>
<td><strong>Evet</strong></td>
<td>Fatura Parasal Toplam Bilgileri</td>
</tr>
<tr>
<td>LEGAL_MONETARY_TOTAL.LINE_EXTENSION_AMOUNT</td>
<td>Decimal</td>
<td><strong>Evet</strong></td>
<td>Mal/hizmet miktarı ile Mal/hizmet birim fiyatının çarpımı ile bulunan tutardır.</td>
</tr>
<tr>
<td>LEGAL_MONETARY_TOTAL.TAX_EXCLUSIVE_AMOUNT</td>
<td>Decimal</td>
<td><strong>Evet</strong></td>
<td>Vergiler hariç, ıskonto veya artırım dahil toplam tutarı (Vergi Matrahı)</td>
</tr>
<tr>
<td>LEGAL_MONETARY_TOTAL.TAX_INCLUSIVE_AMOUNT</td>
<td>Decimal</td>
<td><strong>Evet</strong></td>
<td>Vergiler, ıskonto ve artırım dahil toplam tutar girilir.</td>
</tr>
<tr>
<td>LEGAL_MONETARY_TOTAL.ALLOWANCE_TOTAL_AMOUNT</td>
<td>Decimal</td>
<td><strong>Evet</strong></td>
<td>Toplam ıskonto tutarı</td>
</tr>
<tr>
<td>LEGAL_MONETARY_TOTAL.PAYABLE_AMOUNT</td>
<td>Decimal</td>
<td><strong>Evet</strong></td>
<td>Ödenecek tutar</td>
</tr>
<tr>
<td><strong>INVOICE.INVOICE_LINE</strong></td>
<td>Complex</td>
<td><strong>Evet</strong></td>
<td>Mal/Hizmet Kalemleri</td>
</tr>
<tr>
<td>INVOICE_LINE.ID</td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Kalem sıra numarası</td>
</tr>
<tr>
<td>INVOICE_LINE.INVOICE_QUANTITY</td>
<td>Decimal</td>
<td><strong>Evet</strong></td>
<td>Mal/hizmet miktarı</td>
</tr>
<tr>
<td>INVOICE_LINE.UNITCODE</td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Mal/hizmet miktar birimi   Bknz. <a href="/resource/BELGELER/UBL-TR Kod Listeleri - V 1.18.pdf">Kod listeleri</a></td>
</tr>
<tr>
<td>INVOICE_LINE.LINE_EXTENSION_AMOUNT</td>
<td>Decimal</td>
<td><strong>Evet</strong></td>
<td>Mal/hizmet miktarı ile Mal/hizmet birim fiyatının çarpımı ile bulunan tutar</td>
</tr>
<tr>
<td><strong>INVOICE_LINE.ALLOWANCE_CHARGES</strong></td>
<td>Complex</td>
<td>Hayır</td>
<td>Satırda Iskonto / Artırım. Eğer iskonto veya artırım uygulanacaksa eklenir. Birden fazla iskonto/artırım uygulamak için çoklanır.</td>
</tr>
<tr>
<td>ALLOWANCE_CHARGES.CHARGE_INDICATOR</td>
<td>String</td>
<td>Hayır</td>
<td>Eğer artırım ise <code class="prettyprint">Y</code> değilse <code class="prettyprint">N</code> değeri doldurulur</td>
</tr>
<tr>
<td>ALLOWANCE_CHARGES.MULTIPLIER_FACTOR_NUMERIC</td>
<td>Decimal</td>
<td>Hayır</td>
<td>Iskonto/ Artırım Oranı</td>
</tr>
<tr>
<td>ALLOWANCE_CHARGES.AMOUNT</td>
<td>Decimal</td>
<td>Hayır</td>
<td>Iskonto/ Artırım Tutarı</td>
</tr>
<tr>
<td>ALLOWANCE_CHARGES.BASE_AMOUNT</td>
<td>Decimal</td>
<td>Hayır</td>
<td>Iskonto veya artırımın uygulandığı tutar</td>
</tr>
<tr>
<td><strong>INVOICE_LINE.TAX_TOTAL</strong></td>
<td>Complex</td>
<td>Hayır</td>
<td>Satırda Vergi Toplamı</td>
</tr>
<tr>
<td>TAX_TOTAL.TAX_AMOUNT</td>
<td>Decimal</td>
<td>Hayır</td>
<td>Toplam vergi tutarı girilir.</td>
</tr>
<tr>
<td>TAX_TOTAL.TAX_SUB_TOTAL</td>
<td>Complex</td>
<td>Hayır</td>
<td>Vergi ara toplamı. Çoklanarak birden fazla vergi tipi eklenebilir.</td>
</tr>
<tr>
<td>TAX_SUB_TOTAL.TAX_ABLE_AMOUNT</td>
<td>Decimal</td>
<td>Hayır</td>
<td>Verginin üzerinden hesaplandığı tutar (matrah) bilgisi</td>
</tr>
<tr>
<td>TAX_SUB_TOTAL.TAX_AMOUNT</td>
<td>Decimal</td>
<td>Hayır</td>
<td>Hesaplanan Vergi Tutarı</td>
</tr>
<tr>
<td>TAX_SUB_TOTAL.CALCULATION_SEQ_NUMERIC</td>
<td>String</td>
<td>Hayır</td>
<td>Vergi hesaplamasında sıra numarası.</td>
</tr>
<tr>
<td>TAX_SUB_TOTAL.PERCENT</td>
<td>Decimal</td>
<td>Hayır</td>
<td>Vergi oranı</td>
</tr>
<tr>
<td>TAX_SUB_TOTAL.TAX_NAME</td>
<td>String</td>
<td>Hayır</td>
<td>Vergi türü ismi. <a href="/resource/BELGELER/UBL-TR Kod Listeleri - V 1.18.pdf">Kod Listesi dokümanında Vergi Kodları Listesini inceleyiniz.</a></td>
</tr>
<tr>
<td>TAX_SUB_TOTAL.TAX_TYPE_CODE</td>
<td>String</td>
<td>Hayır</td>
<td>Vergi Tipi Kodu. <a href="/resource/BELGELER/UBL-TR Kod Listeleri - V 1.18.pdf">Kod Listesi dokümanında Vergi Kodları Listesini inceleyiniz.</a></td>
</tr>
<tr>
<td>TAX_SUB_TOTAL.TAX_EXEMPTION_REASON_CODE</td>
<td>String</td>
<td>Hayır</td>
<td>Vergi muafiyet, istisna kodu Bknz. <a href="/resource/BELGELER/UBL-TR Kod Listeleri - V 1.18.pdf">Kod listeleri</a></td>
</tr>
<tr>
<td>TAX_SUB_TOTAL.TAX_EXEMPTION_REASON_CODE</td>
<td>String</td>
<td>Hayır</td>
<td>Vergi muafiyet, istisna sebepleri serbest metin. Bknz. <a href="/resource/BELGELER/UBL-TR Kod Listeleri - V 1.18.pdf">Kod listeleri</a></td>
</tr>
<tr>
<td><strong>INVOICE_LINE.WITH_HOLDING_TAX</strong></td>
<td>Complex</td>
<td>Hayır</td>
<td>Satırda uygulanan tevkifat miktarları, oranları ve diğer bilgileri girilir.</td>
</tr>
<tr>
<td>WITH_HOLDING_TAX.TAX_AMOUNT</td>
<td>Decimal</td>
<td>Hayır</td>
<td>Tevkifat tutari</td>
</tr>
<tr>
<td>WITH_HOLDING_TAX.TAX_SUB_TOTAL</td>
<td>Complex</td>
<td>Hayır</td>
<td>Tevkifat ara toplamı. Çoklanarak birden fazla tevkifat tipi eklenebilir.</td>
</tr>
<tr>
<td>WITH_HOLDING_TAX.TAX_ABLE_AMOUNT</td>
<td>Decimal</td>
<td>Hayır</td>
<td>Tevkifatın üzerinden hesaplandığı tutar (matrah) bilgisi</td>
</tr>
<tr>
<td>WITH_HOLDING_TAX.TAX_AMOUNT</td>
<td>Decimal</td>
<td>Hayır</td>
<td>Hesaplanan Tevkifat Tutarı</td>
</tr>
<tr>
<td>WITH_HOLDING_TAX.CALCULATION_SEQ_NUMERIC</td>
<td>String</td>
<td>Hayır</td>
<td>Tevkifat hesaplamasında sıra numarası.</td>
</tr>
<tr>
<td>WITH_HOLDING_TAX.PERCENT</td>
<td>Decimal</td>
<td>Hayır</td>
<td>Tevkifat oranı</td>
</tr>
<tr>
<td>WITH_HOLDING_TAX.TAX_NAME</td>
<td>String</td>
<td>Hayır</td>
<td>Tevkifat türü ismi. <a href="/resource/BELGELER/UBL-TR Kod Listeleri - V 1.18.pdf">Kod Listesi dokümanında Tevkifat Kodları Listesi bölümünü inceleyiniz.</a></td>
</tr>
<tr>
<td>WITH_HOLDING_TAX.TAX_TYPE_CODE</td>
<td>String</td>
<td>Hayır</td>
<td>Tevkifat Tipi Kodu. <a href="/resource/BELGELER/UBL-TR Kod Listeleri - V 1.18.pdf">Kod Listesi dokümanında Tevkifat Kodları Listesi bölümünü inceleyiniz.</a></td>
</tr>
<tr>
<td>WITH_HOLDING_TAX.TAX_EXEMPTION_REASON_CODE</td>
<td>String</td>
<td>Hayır</td>
<td>Vergi muafiyet, istisna kodu Bknz. <a href="/resource/BELGELER/UBL-TR Kod Listeleri - V 1.18.pdf">Kod listeleri</a></td>
</tr>
<tr>
<td>WITH_HOLDING_TAX.TAX_EXEMPTION_REASON_CODE</td>
<td>String</td>
<td>Hayır</td>
<td>Vergi muafiyet, istisna sebepleri serbest metin. Bknz. <a href="/resource/BELGELER/UBL-TR Kod Listeleri - V 1.18.pdf">Kod listeleri</a></td>
</tr>
<tr>
<td><strong>INVOICE_LINE.ITEM_NAME</strong></td>
<td>String</td>
<td>Hayır</td>
<td>Mal/hizmet adı serbest metin</td>
</tr>
<tr>
<td><strong>INVOICE_LINE.ITEM_PRICE</strong></td>
<td>Decimal</td>
<td>Hayır</td>
<td>Mal/hizmetin birim fiyatı</td>
</tr>
<tr>
<td><strong>INVOICE_LINE.BUYER_IDENTIFICATION</strong></td>
<td>Decimal</td>
<td>Hayır</td>
<td>Alıcının mal/hizmete verdiği tanımlama bilgisi. barkod bilgisi girilebilir.</td>
</tr>
</tbody></table>

<h2 id="fatura-g-nderme-sendinvoice">Fatura Gönderme(SendInvoice)</h2>

<ul>
<li>Fatura Entegrasyon Platformu üzerinden faturayı GIB (Gelir İdaresi Başkanlığı) EFATURA sistemine gönderir.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>SENDER_VKN</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Göndericinin VKNsi.</td>
</tr>
<tr>
<td><strong>SENDER_ALIAS</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Göndericinin ünvanı.</td>
</tr>
<tr>
<td><strong>RECEIVER_VKN</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Alıcının VKNsi.</td>
</tr>
<tr>
<td><strong>RECEIVER_ALIAS</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Alıcının ünvanı.</td>
</tr>
<tr>
<td><strong>INVOICE_CONTENT</strong></td>
<td>Base64Binary</td>
<td><strong>Evet</strong></td>
<td>Belgenin Base64Binary olarak encode edilmiş içeriği.</td>
</tr>
<tr>
<td><strong>COMPRESSED</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Binary Fatura içeriği sıkıştırılmış/sıkıştırılmamış bilgisi. Varsayılan değer Y olduğu için gönderilmediği durumda fatura sıkıştırılarak/ziplenerek gönderilmesi beklenmektedir. <strong>Faturayı XML olarak göndermek için mutlaka eleman eklenmeli ve N değeri gönderilmelidir.</strong></td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>İstek ile istemci tarafından işlem IDsi gönderilmişse sonuç ile beraber dönülür.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda WS Fault objesi dönecektir.</td>
</tr>
</tbody></table>

<h2 id="fatura-g-nderme-sendeinvoice">Fatura Gönderme(SendEInvoice)</h2>

<ul>
<li>Fatura Entegrasyon Platformu üzerinden faturayı GIB (Gelir İdaresi Başkanlığı) EFATURA sistemine gönderir.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>SENDER_VKN</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Göndericinin VKNsi.</td>
</tr>
<tr>
<td><strong>SENDER_ALIAS</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Göndericinin ünvanı.</td>
</tr>
<tr>
<td><strong>RECEIVER_VKN</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Alıcının VKNsi.</td>
</tr>
<tr>
<td><strong>RECEIVER_ALIAS</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Alıcının ünvanı.</td>
</tr>
<tr>
<td><strong>RECEIVER_EMAIL</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Alıcının e-posta adresi. <strong>Format: invoice@firma.com.tr</strong></td>
</tr>
<tr>
<td><strong>INVOICE_TYPE</strong></td>
<td>Enum</td>
<td><strong>Evet</strong></td>
<td>E-Faturanın tipi. <code class="prettyprint">SATIS</code> veya <code class="prettyprint">IADE</code> girilir.</td>
</tr>
<tr>
<td><strong>INVOICE_CONTENT</strong></td>
<td>Base64Binary</td>
<td><strong>Evet</strong></td>
<td>Belgenin Base64Binary olarak encode edilmiş içeriği.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>İstek ile istemci tarafından işlem IDsi gönderilmişse sonuç ile beraber dönülür.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda WS Fault objesi dönecektir.</td>
</tr>
</tbody></table>

<h2 id="taslak-fatura-y-kleme-loadinvoice">Taslak Fatura Yükleme (LoadInvoice)</h2>

<ul>
<li>Fatura Entegrasyon Platformu üzerinden 1 yada daha fazla faturayı E-Fatura sistemine yükler.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>INVOICE_CONTENT</strong></td>
<td>Base64Binary</td>
<td><strong>Evet</strong></td>
<td>Belgenin Base64Binary olarak encode edilmiş içeriği.</td>
</tr>
<tr>
<td><strong>INVOICE_FORMAT</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td></td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>İstek ile istemci tarafından işlem IDsi gönderilmişse sonuç ile beraber dönülür.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda WS Fault objesi dönecektir.</td>
</tr>
</tbody></table>

<h2 id="e-fatura-okuma-getinvoice">E-Fatura Okuma (GetInvoice)</h2>

<ul>
<li>E-Fatura sisteminden giden imzalı faturaları veya gelen faturaları muhasebe paketine çekmek için kullanılır.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>DIRECTION</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Belge yönü. Gelen veya Giden faturaları çekmek için kullanılabilir. Gelen faturaları çekmek için <code class="prettyprint">IN</code>, giden faturaları çekmek için <code class="prettyprint">OUT</code> değeri gönderilebilir. Varsayılan değer <code class="prettyprint">IN</code> olduğu için eğer parametre gönderilmezse sadece gelen faturalar dönülecektir. <strong>Gönderilebilecek değerler: <code class="prettyprint">IN</code>, <code class="prettyprint">OUT</code></strong></td>
</tr>
<tr>
<td><strong>LIMIT</strong></td>
<td>Integer</td>
<td><strong>Hayır</strong></td>
<td>Kaç fatura okunmak istendiği. Eğer eleman gönderilmezse 10 adet fatura, fatura içerikleri (XML) ile beraber en fazla 100 adet fatura, sadece fatura başlıklarını çekildiğindeise en fazla 25.000 adet fatura dönülür.</td>
</tr>
<tr>
<td><strong>SENDER_ALIAS</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Faturayı gönderen firma ünvanı.</td>
</tr>
<tr>
<td><strong>RECEIVER_ALIAS</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Faturayı alan firma ünvanı.</td>
</tr>
<tr>
<td><strong>INVOICE_UUID</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Evrensel Tekil Tanımlama Numarası (ETTN) ile fatura okumak için kullanılabilir.</td>
</tr>
<tr>
<td><strong>START_DATE</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Belirli tarih aralığında fatura çekmek istendiğinde dönem başlangıç tarihi <strong>Format: 2019-01-01</strong></td>
</tr>
<tr>
<td><strong>END_DATE</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Belirli tarih aralığında fatura çekmek istendiğinde dönem bitiş tarihi <strong>Format: 2019-12-31</strong></td>
</tr>
<tr>
<td><strong>HEADER_ONLY</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Fatura içerik ile beraber mi yoksa sadece özet bilgisi mi okunmak istenildiğini belirler. Eleman <strong>gönderilmezse</strong> veya <code class="prettyprint">N</code> değeri gönderilirse faturalar XML ile beraber dönülür. <code class="prettyprint">Y</code> değeri gönderilirse faturaların özeti dönülür. <strong>Değerler: Y/N</strong></td>
</tr>
<tr>
<td><strong>READ_INCLUDED</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Fatura okurken daha önce okunmuş faturaları dönüşe dahil edilip edilmeyeceğini belirler. <code class="prettyprint">true</code> değeri gönderilirse fatura daha önce okunmuş olsa bile yanıta eklenir. Gönderilmezse veya <code class="prettyprint">false</code> gönderilirse sadece yeni gelen faturalar dönülür. <strong>Değerler: <code class="prettyprint">true</code>/<code class="prettyprint">false</code></strong></td>
</tr>
<tr>
<td><strong>COMPRESSED</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Binary Fatura içeriği sıkıştırılmış/sıkıştırılmamış bilgisi. Varsayılan değer Y olduğu için gönderilmediği durumda fatura sıkıştırılarak/ziplenerek gönderilmesi beklenmektedir. <strong>Faturayı XML olarak göndermek için mutlaka eleman eklenmeli ve N değeri gönderilmelidir.</strong></td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>INVOICE</strong></td>
<td>Complex</td>
<td>Sorgu kriterine uyan fatura(lar)ın listesi. Fatura numarası <code class="prettyprint">ID</code>, fatura evrensel tekil tanımlama numarası  <code class="prettyprint">UUID</code> ve e-fatura sisteminde tanımlı tekil numara değeri  <code class="prettyprint">LIST_ID</code> attribute içerisinde dönülmektedir.</td>
</tr>
<tr>
<td><strong>INVOICE.HEADER</strong></td>
<td>Complex</td>
<td>Faturaya ait özet bilgiler içermektedir.</td>
</tr>
<tr>
<td><strong>HEADER.SENDER</strong></td>
<td>String</td>
<td>Faturayı gönderen firma VKN&#39;si.</td>
</tr>
<tr>
<td><strong>HEADER.RECEIVER</strong></td>
<td>String</td>
<td>Faturayı alan firma VKN&#39;si.</td>
</tr>
<tr>
<td><strong>HEADER.SUPPLIER</strong></td>
<td>String</td>
<td>Faturayı gönderen firma ünvanı.</td>
</tr>
<tr>
<td><strong>HEADER.CUSTOMER</strong></td>
<td>String</td>
<td>Faturayı alan firma ünvanı.</td>
</tr>
<tr>
<td><strong>HEADER.ISSUE_DATE</strong></td>
<td>String</td>
<td>Fatura tarihi.</td>
</tr>
<tr>
<td><strong>HEADER.PAYABLE_AMOUNT</strong></td>
<td>String</td>
<td>Toplam ödenecek tutar.</td>
</tr>
<tr>
<td><strong>HEADER.FROM</strong></td>
<td>String</td>
<td>Faturayı gönderen Gönderici Birim (GB)</td>
</tr>
<tr>
<td><strong>HEADER.TO</strong></td>
<td>String</td>
<td>Faturanın geldiği Posta Kutusu (PK)</td>
</tr>
<tr>
<td><strong>HEADER.PROFILEID</strong></td>
<td>String</td>
<td>Faturanın senaryosu. TEMELFATURA, TICARIFATURA,IHRACATFATURA, YOLCUBERABER değerleri olabilir.</td>
</tr>
<tr>
<td><strong>HEADER.INVOICE_TYPE_CODE</strong></td>
<td>String</td>
<td>Faturanın tipi. SATIS, IADE, ISTISNA, IHRACAT, OZELMATRAH, TEVKIFAT, IHRACKAYITLI değerleri olabilir.</td>
</tr>
<tr>
<td><strong>HEADER.STATUS</strong></td>
<td>String</td>
<td>Faturanın durumu. Detay için Fatura durum sorgulama ekranında bulunan <strong>Fatura Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Fatura durum açıklaması. Detay için Fatura durum sorgulama ekranında bulunan <strong>Fatura Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.GIB_STATUS_CODE</strong></td>
<td>String</td>
<td>Faturanın GİB&#39;de ki durum kodu. Detay için Fatura durum sorgulama ekranında bulunan <strong>GİB Durum Kodları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.GIB_STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Faturanın GİB&#39;de ki durumunun kodunun açıklaması. Detay için <strong>GİB Durum Kodları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>HEADER.RESPONSE_CODE</strong></td>
<td>String</td>
<td>Ticari fatura için verilen yanıtı içeren zarfın durum kodu</td>
</tr>
<tr>
<td><strong>HEADER.RESPONSE_DESC</strong></td>
<td>String</td>
<td>Ticari fatura için verilen yanıtı içeren zarfın durum açıklaması</td>
</tr>
<tr>
<td><strong>HEADER.CDATE</strong></td>
<td>String</td>
<td>Faturanın sistemimize ulaştığı tarih</td>
</tr>
<tr>
<td><strong>HEADER.ENVELOPE_IDENTIFIER</strong></td>
<td>String</td>
<td>Faturanın zarf IDsi.</td>
</tr>
<tr>
<td><strong>INVOICE.CONTENT</strong></td>
<td>String</td>
<td>Faturanın içeriği. Eğer <code class="prettyprint">COMPRESSED</code> elemanı <code class="prettyprint">N</code> olarak gönderilmişse XML dosya, <code class="prettyprint">COMPRESSED</code> elemanı gönderilmemiş veya <code class="prettyprint">Y</code> değeri gönderilmişse sıkıştırılmış/ziplenmiş XML dosyası dönülür.</td>
</tr>
</tbody></table>

<h2 id="m-kellef-listesi-ekme-getuserlist">Mükellef Listesi Çekme(GetUserList)</h2>

<ul>
<li>Kayıt zamanı kullanılarak mükellef listesi çekiminde kullanılır.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>REGISTER_TIME_START</strong></td>
<td>DateFormat</td>
<td><strong>Evet</strong></td>
<td>Kayıt başlangıç tarihini belirtir. <strong>Format: 2019-12-31T23:59:59</strong></td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>USER</strong></td>
<td>Complex</td>
<td>Kullanıcı bilgilerini içeren yapı.</td>
</tr>
<tr>
<td><strong>USER.IDENTIFIER</strong></td>
<td>String</td>
<td>Kullanıcının tanımlayıcı numarası.</td>
</tr>
<tr>
<td><strong>USER.ALIAS</strong></td>
<td>String</td>
<td><strong>Format: urn:mail:defaultpk@firma.com.tr</strong></td>
</tr>
<tr>
<td><strong>USER.TITLE</strong></td>
<td>String</td>
<td>Firmanın Ünvanı</td>
</tr>
<tr>
<td><strong>USER.TYPE</strong></td>
<td>String</td>
<td>Kullanıcı tipi</td>
</tr>
<tr>
<td><strong>USER.REGISTER_TIME</strong></td>
<td>DateFormat</td>
<td>Kullanıcı kayıt zamanı. <strong>Format: 2019-12-31T23:59:59</strong></td>
</tr>
<tr>
<td><strong>USER.UNIT</strong></td>
<td>String</td>
<td>Unite değeri.</td>
</tr>
<tr>
<td><strong>USER.ALIAS_CREATION_TIME</strong></td>
<td>DateFormat</td>
<td>Kullanıcı <code class="prettyprint">ALIAS</code> üretilme zamanı. <strong>Format: 2019-12-31T23:59:59</strong></td>
</tr>
</tbody></table>

<h2 id="m-kellef-kontrol-checkuser">Mükellef Kontrol(CheckUser)</h2>

<ul>
<li>Mükellef VKN veya TCKN yada ismi kullanarak mükellef çekiminde ve kontrolünde kullanılır.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>IDENTIFIER_VKN_TCKN</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Firmanın VKN veya TCKN si.</td>
</tr>
<tr>
<td><strong>TITLE</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Firmanın ismi.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>USER</strong></td>
<td>Complex</td>
<td>Kullanıcı bilgilerini içeren yapı.</td>
</tr>
<tr>
<td><strong>USER.IDENTIFIER</strong></td>
<td>String</td>
<td>Kullanıcının tanımlayıcı numarası.</td>
</tr>
<tr>
<td><strong>USER.ALIAS</strong></td>
<td>String</td>
<td><strong>Format: urn:mail:defaultpk@firma.com.tr</strong></td>
</tr>
<tr>
<td><strong>USER.TITLE</strong></td>
<td>String</td>
<td>Firmanın İsmi</td>
</tr>
<tr>
<td><strong>USER.TYPE</strong></td>
<td>String</td>
<td>Kullanıcı tipi</td>
</tr>
<tr>
<td><strong>USER.REGISTER_TIME</strong></td>
<td>DateFormat</td>
<td>Kullanıcı kayıt zamanı. <strong>Format: 2019-12-31T23:59:59</strong></td>
</tr>
<tr>
<td><strong>USER.UNIT</strong></td>
<td>String</td>
<td>Unite değeri.</td>
</tr>
<tr>
<td><strong>USER.ALIAS_CREATION_TIME</strong></td>
<td>DateFormat</td>
<td>Kullanıcı <code class="prettyprint">ALIAS</code> üretilme zamanı. <strong>Format: 2019-12-31T23:59:59</strong></td>
</tr>
</tbody></table>

<h2 id="fatura-okundu-aretleme-markinvoice">Fatura Okundu İşaretleme (MarkInvoice)</h2>

<ul>
<li>E-Fatura sisteminde faturayı alındı/alınmadı olarak işaretlemek için geliştirilmiş servistir.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>INVOICE_UUID</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Evrensel Tekil Tanımlama Numarası (ETTN) ile okumak için kullanılır.</td>
</tr>
<tr>
<td><strong>ACTION</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Başarı ile alındıysa <code class="prettyprint">READ</code> gönderilmeli. Daha önce alındı olarak işaretlenen bir faturayı tekrar çekmeden önce <code class="prettyprint">UNREAD</code> olarak gönderilebilir.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>İstek ile istemci tarafından işlem IDsi gönderilmişse sonuç ile beraber dönülür.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda WS Fault objesi dönecektir.</td>
</tr>
</tbody></table>

<h2 id="fatura-durum-sorgulama-getinvoicestatus">Fatura Durum Sorgulama (GetInvoiceStatus)</h2>

<ul>
<li>E-Fatura sisteminde bulunan taslak, gelen ve giden faturaların durumunu sorgulamayı sağlayan servistir.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>INVOICE_UUID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Evrensel Tekil Tanımlama Numarası (ETTN) ile fatura okumak için kullanılabilir.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>INVOICE_STATUS</strong></td>
<td>ComplexType</td>
<td>Sorgu kriterine uyan fatura(lar)ın listesi. Fatura numarası <code class="prettyprint">ID</code>, fatura evrensel tekil tanımlama numarası  <code class="prettyprint">UUID</code> attribute içerisinde dönülmektedir.</td>
</tr>
<tr>
<td><strong>INVOICE_STATUS.STATUS</strong></td>
<td>String</td>
<td>Faturanın e-fatura sisteminde ki durumu. Detay için <strong>Fatura Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>INVOICE_STATUS.STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Fatura durum açıklaması. Detay için <strong>Fatura Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>INVOICE_STATUS.GIB_STATUS_CODE</strong></td>
<td>String</td>
<td>Faturanın GİB&#39;de ki durum kodu. Faturanın GİB&#39;de ki durumu e-fatura sistemi tarafından henüz sorgulanmadıysa eleman dönülmez. Detay için <strong>GİB Durum Kodları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>INVOICE_STATUS.GIB_STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Faturanın GİB&#39;de ki durumunun kodunun açıklaması. Faturanın GİB&#39;de ki durumu e-fatura sistemi tarafından henüz sorgulanmadıysa eleman dönülmez. Detay için <strong>GİB Durum Kodları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>INVOICE_STATUS.CDATE</strong></td>
<td>String</td>
<td>Faturanın e-fatura sistemine yüklendiği/ulaştığı tarih</td>
</tr>
<tr>
<td><strong>INVOICE_STATUS.ENVELOPE_IDENTIFIER</strong></td>
<td>String</td>
<td>Faturanın zarf IDsi. Taslak faturalar için eleman dönülmez.</td>
</tr>
</tbody></table>

<h2 id="m-kellef-listesi-ekme-getuserlistbinary">Mükellef Listesi Çekme(GetUserListBinary)</h2>

<ul>
<li>Mükellef Listesini Çekmek için kullanılır.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>TYPE</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Belgenin hangi türde geleceği.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>CONTENT</strong></td>
<td>Base64Binary</td>
<td>Belgenin Base64Binary olarak encode edilmiş içeriği dönecektir.</td>
</tr>
</tbody></table>

<h2 id="t-m-m-kelleflerin-listesini-ekme-getalluserlistbinary">Tüm Mükelleflerin Listesini Çekme(GetAllUserListBinary)</h2>

<ul>
<li>Tüm Mükellef Listesini Çekmek için kullanılır.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>TYPE</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Belgenin hangi türde geleceği.</td>
</tr>
<tr>
<td><strong>DOCUMENT_TYPE</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Dökümanın tipi.</td>
</tr>
<tr>
<td><strong>REGISTER_TIME_START</strong></td>
<td>GregorianCalendar</td>
<td><strong>Hayır</strong></td>
<td>Tarih bilgisi girilir. <strong>Format: 2018-01-01</strong></td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>CONTENT</strong></td>
<td>Base64Binary</td>
<td>Belgenin Base64Binary olarak encode edilmiş içeriği dönecektir.</td>
</tr>
</tbody></table>

<h2 id="e-ar-iv-fatura-metodlar">E-Arşiv Fatura Metodları</h2>

<p>E-Fatura mükellefi olmayan firma veya nihai tüketiciye düzenlenen faturaların özel entegratör sistemine gönderilmesi ve raporlamasını sağlayan webservis uygulamasının clientıdır.</p>

<ul>
<li>Aşağıdaki metodlari içerir.</li>
<li>SendEArchiveInvoice</li>
<li>CancelEArchiveInvoice</li>
<li>ReadFromArchive</li>
<li>GetEArchiveReport</li>
<li>GetEArchiveInvoiceStatus</li>
</ul>

<h2 id="dikkat-edilecek-hususlar-e-ar-iv-fatura">Dikkat Edilecek Hususlar(E-Arşiv Fatura)</h2>

<ul>
<li><strong>Kimlik Doğrulama (Authentication)</strong> Webservisinde bulunan <strong>Login</strong> servisi ile giriş yaparak session id alınacak. Session Id sistemimiz tarafında 8 saate kadar zaman aşımına uğramadığı için kullanıcı giriş yapınca session id alıp bütün kullanım süresinde aynı session id kullanabilirsiniz.</li>
<li><strong>ReadFromArchive</strong> servisi ile fatura istenilen formatta (XML, PDF, HTML) okunabilir.</li>
<li><strong>CancelEArchiveInvoice</strong> servisi ile hata tespiti veya müşterinin malı iade etmesi sebebi ile iptal edilen faturaları GIBe bildirilmek üzere gönderilir.</li>
<li><strong>GetEArchiveInvoiceStatus</strong> servisi ile özel entegratör sistemine yüklemiş e-Arşiv faturasanın durumu, e-posta durumu ve raporlanma durumunu sorgulayabilirsiniz.</li>
<li>E-Fatura ve E-Arşiv faturaları farklı seri ile düzenlenmelidir.</li>
<li>İnternet üzerinden yapılan satışlar için düzenlenen E-Arşiv faturaları ile diğer satışlardan (E-Fatura veya E-Arşiv) farklı serilerden düzenlenmesi zorunludur.</li>
<li>UBL-TR olarak hazırlanan E-Arşiv faturaların ProfileId alanı <code class="prettyprint">EARSIVFATURA</code> olarak yazılmalıdır. Bu alan eğer sizin tarafınızda farklı bir değer belirtilmiş ise sistem bu alan otomatik olarak “EARSIVFATURA” yazacaktır.</li>
<li>E-Arşiv faturalarda faturanın düzenlenme zamanı(IssueTime) zorunludur.</li>
<li>E-Arşiv faturalarda AdditionalDocumentReference alanında DocumentTypeCode ve DocumentType alanları zorunlu alandır.</li>
<li>İnternet üzerinden yapılan satış için düzenlenen faturalar için Ödeme Şekli (PaymentMeans) ve Kargo bilgileri (Delivery) zorunludur.</li>
</ul>

<h2 id="e-ar-iv-fatura-g-nderme-sendearchiveinvoice">E-Arşiv Fatura Gönderme (SendEArchiveInvoice)</h2>

<ul>
<li>E-Arşiv Fatura belgesini özel entegratör sistemlerine gönderilmesini sağlayan servisin clientıdır.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>EARSIV_EMAIL_FLAG</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Belge alıcısına e-posta olarak gönderilip gönderilmeyeceğinin belirlendiği parametredir. E-Posta göndermek istenilen durumda <code class="prettyprint">Y</code> değeri gönderilmelidir.</td>
</tr>
<tr>
<td><strong>EARSIV_EMAIL</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Belgenin e-posta olarak iletileceği e-posta adresi. E-Posta formatında olmak zorundadır. <code class="prettyprint">EARSIV_EMAIL_FLAG</code> parametresi <code class="prettyprint">N</code> verilirse, değer verilse bile dikkate alınmaz. <strong>Format: archive@firma.com.tr</strong></td>
</tr>
<tr>
<td><strong>EARSIV_TYPE</strong></td>
<td>Enum</td>
<td><strong>Evet</strong></td>
<td>E-Arşiv Faturanın tipi. <code class="prettyprint">INTERNET</code> veya <code class="prettyprint">NORMAL</code> girilir.</td>
</tr>
<tr>
<td><strong>CONTENT</strong></td>
<td>Base64Binary</td>
<td><strong>Evet</strong></td>
<td>Belgenin Base64Binary olarak encode edilmiş içeriği.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>İstek ile istemci tarafından işlem IDsi gönderilmişse sonuç ile beraber dönülür.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda WS Fault objesi dönecektir.</td>
</tr>
</tbody></table>

<h2 id="e-ar-iv-fatura-ptal-cancelearchiveinvoice">E-Arşiv Fatura İptal (CancelEArchiveInvoice)</h2>

<ul>
<li>Mevcut E-Arşiv Fatura belgesinin iptalini sağlayan servisin clientıdır.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>INVOICE_UUID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Evrensel Tekil Tanımlama Numarası (ETTN) ile okumak için kullanılır.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>İstek ile istemci tarafından işlem IDsi gönderilmişse sonuç ile beraber dönülür.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda WS Fault objesi dönecektir.</td>
</tr>
</tbody></table>

<h2 id="e-ar-iv-fatura-okuma-readfromarchive">E-Arşiv Fatura Okuma (ReadFromArchive)</h2>

<ul>
<li>E-Arşiv Fatura içeriğinin fatura UUID ve içerik tipi kullanılarak çekilmesini sağlar.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>INVOICE_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Evrensel Tekil Tanımlama Numarası (ETTN) ile okumak için kullanılır.</td>
</tr>
<tr>
<td><strong>DOCUMENT_TYPE</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>E-Arşiv Fatura içeriğinin nasıl yollanacağını belirler. <code class="prettyprint">XML</code>, <code class="prettyprint">HTML</code> ve <code class="prettyprint">PDF</code> olabilir.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>CONTENT</strong></td>
<td>Base64Binary</td>
<td>Belgenin Base64Binary formatında gelen içeriği.</td>
</tr>
</tbody></table>

<h2 id="e-ar-iv-rapor-listesini-ekme-getearchivereport">E-Arşiv Rapor Listesini Çekme (GetEArchiveReport)</h2>

<ul>
<li>E-Arşiv Fatura raporların dönem bilgisi kullanılarak çekilmesini sağlar.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>RAPOR_DONEMI</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Rapor listesinin alınmak istenilen dönem bilgisi. <strong>Format: 201805</strong></td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REPORT</strong></td>
<td>Complex</td>
<td>Dönem için oluşturulan raporların listesi.</td>
</tr>
<tr>
<td><strong>REPORT.REPORT_NO</strong></td>
<td>String</td>
<td>Raporun numarası GUID formatında.</td>
</tr>
<tr>
<td><strong>REPORT.STATUS</strong></td>
<td>String</td>
<td>Raporun durumu. İşlenmiş rapor durumu <code class="prettyprint">SUCCEED</code> olur.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda WS Fault objesi dönecektir.</td>
</tr>
</tbody></table>

<h2 id="e-ar-iv-fatura-durum-sorgulama-getearchiveinvoicestatus">E-Arşiv Fatura Durum Sorgulama (GetEArchiveInvoiceStatus)</h2>

<ul>
<li>Özel entegratör platformundan E-Arşiv Fatura belgelerinin durumunu okumayı sağlayan servisin clientıdır.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>UUID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Evrensel Tekil Tanımlama Numarası (ETTN) ile okumak için kullanılır.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>INVOICE.HEADER</strong></td>
<td>ComplexType</td>
<td>Kritere uyan faturaların durumlarınını içeren objedir.</td>
</tr>
<tr>
<td><strong>HEADER.INVOICE_ID</strong></td>
<td>String</td>
<td>Fatura numarası</td>
</tr>
<tr>
<td><strong>HEADER.UUID</strong></td>
<td>String</td>
<td>Faturanın Evrensel Tekil Tanımlama Numarası (ETTN)</td>
</tr>
<tr>
<td><strong>HEADER.PROFILE</strong></td>
<td>String</td>
<td>Faturanın senaryosu (<code class="prettyprint">EARSIVFATURA</code>)</td>
</tr>
<tr>
<td><strong>HEADER.INVOICE_DATE</strong></td>
<td>String</td>
<td>Fatura tarihi</td>
</tr>
<tr>
<td><strong>HEADER.STATUS</strong></td>
<td>String</td>
<td>Fatura durumu kodu. <strong>Lütfen E-Arşiv Durum başlığını inceleyiniz.</strong></td>
</tr>
<tr>
<td><strong>HEADER.STATUS_DESC</strong></td>
<td>String</td>
<td>Faturanın durum açıklaması <strong>Lütfen E-Arşiv Durum başlığını inceleyiniz.</strong></td>
</tr>
<tr>
<td><strong>HEADER.EMAIL_STATUS</strong></td>
<td>String</td>
<td>E-Posta gönderim durum kodu. <strong>Lütfen E-Arşiv E-Posta Durum başlığını inceleyiniz.</strong></td>
</tr>
<tr>
<td><strong>HEADER.EMAIL_STATUS_DESC</strong></td>
<td>String</td>
<td>E-Posta gönderim durum açıklaması. <strong>Lütfen E-Arşiv E-Posta Durum başlığını inceleyiniz.</strong></td>
</tr>
<tr>
<td><strong>HEADER.REPORT_ID</strong></td>
<td>String</td>
<td>Faturanın GİB&#39;e gönderilen rapor numarası. Raporlanmamış faturalarda parametre dönülmez.</td>
</tr>
<tr>
<td><strong>HEADER.WEB_KEY</strong></td>
<td>String</td>
<td>Fatura alıcısının e-arşiv platformu üzerinden ulaşabileceği URL.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda request return objesi dönülmez.</td>
</tr>
</tbody></table>

<h2 id="e-rsaliye-metodlar">E-İrsaliye Metodları</h2>

<p>Özel entegratör sistemi üzerinde E-İrsaliyelerin yollanması, okunması ve yüklenmesi durumlarını yapabilmek için kullanılır. Aşağıdaki metodlari içerir.</p>

<ul>
<li>SendDespatchAdvice</li>
<li>LoadDespatchAdvice</li>
<li>GetDespatchAdviceStatus</li>
<li>GetDespatchAdvice</li>
<li>MarkDespatchAdvice</li>
<li>SendReceiptAdvice</li>
<li>LoadReceiptAdvice</li>
<li>GetReceiptAdviceStatus</li>
<li>GetReceiptAdvice</li>
<li>MarkReceiptAdvice</li>
</ul>

<h2 id="dikkat-edilecek-hususlar-e-rsaliye">Dikkat Edilecek Hususlar(E-İrsaliye)</h2>

<ol>
<li><strong>Kimlik Doğrulama (Authentication)</strong> Webservisinde bulunan <strong>Login</strong> metodu ile oturum açarak session id alınacaktır. Session Id sistemimiz tarafında 8 saate kadar zaman aşımına uğramadığı için kullanıcı giriş yapınca session id alıp bütün kullanım süresinde aynı session id kullanabilirsiniz.</li>
<li><strong>Kimlik Doğrulama (Authentication)</strong> Webservisinde bulunan <strong>GetGibUserList</strong> metodu ile GIB e-irsaliye mükellef listesini her 2 saatte entegrasyon sunucularından çekmenizi tavsiye ederiz. Güncel listeyi çektikten sonra Cari listenizde ki firmaların e-irsaliye mükellefi olup olmadığını güncellemelisiniz.</li>
<li>E-İrsaliye Mükellefi olan firmalara düzenlenen irsaliyeleleri UBL-TR İrsaliye formatına dönüştürerek gönderilmelidir. Her e-irsaliye içerisinde görüntülenmesini sağlayan XSLT dokümanı olmalıdır.</li>
<li><strong>SendDespatchAdvice</strong> metodu ile irsaliye gönderimi yapılacak. Gönderim esnasında eğer alıcı mükellefe ait birden fazla Posta Kutusu bulunuyorsa ekranda seçilerek gönderilmesi sağlanmalı. Sadece 1 adet PK adresi varsa seçim yapılmadan gönderim sağlanabilir.</li>
<li><strong>GetDespatchAdviceStatus</strong> metodu ile gelen/giden irsaliyelerin durumları sorgulanacak. Nihai duruma erişene kadar belgenin durumu entegrasyon sunucularından minumum 4 saatte bir sorgulanmalıdır. <strong>Sık sorgulama yapmayınız.</strong></li>
<li><strong>GetDespatchAdvice</strong> metodu ile firmaya gelen irsaliyeleri müşteri bilgisayarına aktarılır. Sisteme gelen yeni irsaliyeleri almanız gerekmektedir. Servis ile yeni gelen en fazla 100 adet belgeyi çekebilirsiniz. Eğer dönen listede 100 adet kayıt varsa yeniden <strong>GetDespatchAdvice</strong> servisi çağırılarak başka belge olup olmadığı kontrol edilmelidir. Dönen listede 100den az kayıt varsa tekrar sorgulama yapmaya gerek yoktur.</li>
<li><strong>MarkDespatchAdvice</strong> metodu ile başarılı şekilde teslim alınan irsaliyeler eirsaliye sisteminde okundu olarak işaretlenir. Böylece bir sonra ki <strong>GetDespatchAdvice</strong> servisi çağrılınca aynı kayıt dönülmez.</li>
<li><strong>Logout</strong> metodu ile kullanıcı e-fatura programını kapatınca veya sizin belirlediğiniz bir sürede oturumu
kapatabilirsiniz.</li>
</ol>

<h2 id="e-rsaliye-g-nderme-senddespatchadvice">E-İrsaliye Gönderme (SendDespatchAdvice)</h2>

<ul>
<li>E-İrsaliye belgesini özel entegratör sistemlerine gönderilmesini sağlayan servisin clientıdır.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>SENDER_VKN</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Gönderenin VKNsi.</td>
</tr>
<tr>
<td><strong>SENDER_ALIAS</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Gönderenin ünvanı.</td>
</tr>
<tr>
<td><strong>RECEIVER_VKN</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Alıcının VKNsi.</td>
</tr>
<tr>
<td><strong>RECEIVER_ALIAS</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Alıcının ünvanı.</td>
</tr>
<tr>
<td><strong>COMPRESSED</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>İrsaliye contentini nasıl alınacağını belirler. <code class="prettyprint">Y</code> değeri için sıkıştırılmış, <code class="prettyprint">N</code> değeri için sıkıştırılmamış contenti verir.</td>
</tr>
<tr>
<td><strong>CONTENT</strong></td>
<td>Base64Binary</td>
<td><strong>Evet</strong></td>
<td>Belgenin Base64Binary olarak encode edilmiş XML veya Ziplenmiş içeriği. Eğer belgeyi ziplemeden/sıkıştırmadan göndermek istiyorsanız <code class="prettyprint">COMPRESSED</code> elemanı eklenmeli ve <code class="prettyprint">N</code> değeri gönderilmelidir.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>İstek ile istemci tarafından işlem IDsi gönderilmişse sonuç ile beraber dönülür.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda WS Fault objesi dönecektir.</td>
</tr>
</tbody></table>

<h2 id="taslak-e-rsaliye-y-kleme-loaddespatchadvice">Taslak E-İrsaliye Yükleme (LoadDespatchAdvice)</h2>

<ul>
<li>Taslak E-İrsaliye belgelerini yüklemek için kullanılan servisin clientıdır.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>CONTENT</strong></td>
<td>Base64Binary</td>
<td><strong>Evet</strong></td>
<td>Belgenin Base64Binary olarak encode edilmiş XML veya Ziplenmiş içeriği. Eğer belgeyi ziplemeden/sıkıştırmadan göndermek istiyorsanız <code class="prettyprint">COMPRESSED</code> elemanı eklenmeli ve <code class="prettyprint">N</code> değeri gönderilmelidir.</td>
</tr>
<tr>
<td><strong>COMPRESSED</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>İrsaliye contentini nasıl alınacağını belirler. <code class="prettyprint">Y</code> değeri için sıkıştırılmış, <code class="prettyprint">N</code> değeri için sıkıştırılmamış contenti verir.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>İstek ile istemci tarafından işlem IDsi gönderilmişse sonuç ile beraber dönülür.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda WS Fault objesi dönecektir.</td>
</tr>
</tbody></table>

<h2 id="e-rsaliye-durumunu-okuma-getdespatchadvicestatus">E-İrsaliye Durumunu Okuma (GetDespatchAdviceStatus)</h2>

<ul>
<li>Sistemde bulunan irsaliyelerin durumlarını okumak için kullanılan servisin clientıdır.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>UUID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Evrensel Tekil Tanımlama Numarası (ETTN) ile okumak için kullanılır.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>DESPATCHADVICE_STATUS</strong></td>
<td>Complex</td>
<td>Sorgu kriterine uyan irsaliye yanıtlarının listesi.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICE_STATUS.DESPATCHADVICEHEADER</strong></td>
<td>Complex</td>
<td>İrsaliye yanıtına ait özet bilgiler içermektedir.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.ID</strong></td>
<td>String</td>
<td>İrsaliye yanıtı numarası.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.UUID</strong></td>
<td>String</td>
<td>Evrensel tekil tanımlama numarası.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.PROFILEID</strong></td>
<td>String</td>
<td>Belge senaryosu. <code class="prettyprint">TEMELIRSALIYE</code> değeri olabilir.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.ISSUE_DATE</strong></td>
<td>Date</td>
<td>Belge tarihi.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.ISSUE_TIME</strong></td>
<td>String</td>
<td>Belge düzenleme zamanı.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.ACTUAL_SHIPMENT_DATE</strong></td>
<td>Date</td>
<td>Fiili sevk tarihi.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.ACTUAL_SHIPMENT_TIME</strong></td>
<td>String</td>
<td>Fiili sevk zamanı.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.DIRECTION</strong></td>
<td>String</td>
<td>Belge yönü. Gelen irsaliye yanıtı için <code class="prettyprint">IN</code>, giden irsaliye yanıtı için <code class="prettyprint">OUT</code> değeri dönülür.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.STATUS</strong></td>
<td>String</td>
<td>Belgenin durumu. Detay için <strong>E-İrsaliye Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.STATUS_CODE</strong></td>
<td>String</td>
<td>Belgenin durum kodu. Detay için <strong>E-İrsaliye Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Belge durum açıklaması. Detay için <strong>E-İrsaliye Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.GIB_STATUS_CODE</strong></td>
<td>String</td>
<td>Belgenin GİB&#39;de ki durum kodu. Detay için <strong>GİB Durum Kodları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.GIB_STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Belgenin GİB&#39;de ki durum kodunun açıklaması. Detay için <strong>GİB Durum Kodları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.ENVELOPE_IDENTIFIER</strong></td>
<td>String</td>
<td>Belgenin zarf IDsi.</td>
</tr>
</tbody></table>

<h2 id="e-rsaliye-okuma-getdespatchadvice">E-İrsaliye Okuma (GetDespatchAdvice)</h2>

<ul>
<li>Sistemde bulunan irsaliyeleri okumak için kullanılan servisin clientıdır.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>DIRECTION</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Belge yönü. Gelen veya Giden irsaliyeleri çekmek için kullanılabilir. Gelen irsaliyeleleri çekmek için <code class="prettyprint">IN</code>, giden irsaliyeleleri çekmek için <code class="prettyprint">OUT</code> değeri gönderilebilir. Varsayılan değer <code class="prettyprint">IN</code> olduğu için eğer parametre gönderilmezse sadece gelen irsaliyeler dönülecektir. Gönderilebilecek değerler: <code class="prettyprint">IN</code>, <code class="prettyprint">OUT</code></td>
</tr>
<tr>
<td><strong>LIMIT</strong></td>
<td>Integer</td>
<td><strong>Hayır</strong></td>
<td>Gelen cevapta en fazla kaç adet irsaliye olabileceğini belirtir.</td>
</tr>
<tr>
<td><strong>SENDER_ALIAS</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Gönderenin ünvanı.</td>
</tr>
<tr>
<td><strong>RECEIVER_ALIAS</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Alıcının ünvanı.</td>
</tr>
<tr>
<td><strong>UUID</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Evrensel Tekil Tanımlama Numarası (ETTN) ile okumak için kullanılır.</td>
</tr>
<tr>
<td><strong>START_DATE</strong></td>
<td>Date</td>
<td><strong>Hayır</strong></td>
<td>Belirli bir tarih aralığı araması yapıldığında başlangıç tarihi ataması yapılır. <strong>Format: 2019-01-01</strong></td>
</tr>
<tr>
<td><strong>END_DATE</strong></td>
<td>Date</td>
<td><strong>Hayır</strong></td>
<td>Belirli bir tarih aralığı araması yapıldığında bitiş tarihi ataması yapılır. <strong>Format: 2019-12-31</strong></td>
</tr>
<tr>
<td><strong>HEADER_ONLY</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td><code class="prettyprint">Y</code> verildiğinde irsaliye özeti döner. <code class="prettyprint">N</code> verildiğinde ise <code class="prettyprint">CONTENT</code>i de yollanır.</td>
</tr>
<tr>
<td><strong>READ_INCLUDED</strong></td>
<td>Boolean</td>
<td><strong>Hayır</strong></td>
<td>Daha önce okunmuş belgeleri dönüşe dahil edilip edilmeyeceğini belirleyen parametredir.<code class="prettyprint">true</code> değeri atanırsa okunmuş belgeler de gelir, <code class="prettyprint">false</code> atamasında iste sadece okunmamış belgeler gelecektir.</td>
</tr>
<tr>
<td><strong>COMPRESSED</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>İrsaliye contentini nasıl alınacağını belirler. <code class="prettyprint">Y</code> değeri için sıkıştırılmış, <code class="prettyprint">N</code> değeri için sıkıştırılmamış contenti verir.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>DESPATCHADVICE</strong></td>
<td>Complex</td>
<td>Sorgu kriterine uyan irsaliyelerin listesi. İrsaliye numarası <code class="prettyprint">ID</code>, evrensel tekil tanımlama numarası <code class="prettyprint">UUID</code> ve e-irsaliye sisteminde tanımlı tekil numara değeri <code class="prettyprint">LIST_ID</code> attribute içerisinde dönülmektedir.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICE.DESPATCHADVICEHEADER</strong></td>
<td>Complex</td>
<td>İrsaliyeye ait özet bilgiler içermektedir.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.PROFILEID</strong></td>
<td>String</td>
<td>Belge senaryosu. <code class="prettyprint">TEMELIRSALIYE</code> değeri olabilir.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.ISSUE_DATE</strong></td>
<td>Date</td>
<td>Belge tarihi.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.ISSUE_TIME</strong></td>
<td>String</td>
<td>Belge düzenleme zamanı.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.ACTUAL_SHIPMENT_DATE</strong></td>
<td>Date</td>
<td>Fiili sevk tarihi.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.ACTUAL_SHIPMENT_TIME</strong></td>
<td>String</td>
<td>Fiili sevk zamanı.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.TYPE_CODE</strong></td>
<td>String</td>
<td>Belgenin tipi. <code class="prettyprint">SEVK</code> değeri olabilir.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.DIRECTION</strong></td>
<td>String</td>
<td>Belge yönü. Gelen irsaliye için <code class="prettyprint">IN</code>, giden irsaliye için <code class="prettyprint">OUT</code> değeri dönülür.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.SENDER</strong></td>
<td>String</td>
<td>Belgeyi gönderen firma VKN&#39;si.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.RECEIVER</strong></td>
<td>String</td>
<td>Belgeyi alan firma VKN&#39;si.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.STATUS</strong></td>
<td>String</td>
<td>Belgenin durumu. Detay için <strong>E-İrsaliye Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.STATUS_CODE</strong></td>
<td>String</td>
<td>Belgenin durum kodu. Detay için <strong>E-İrsaliye Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Belge durum açıklaması. Detay için <strong>E-İrsaliye Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.GIB_STATUS_CODE</strong></td>
<td>Integer</td>
<td>Belgenin GİB&#39;de ki durum kodu. Detay için <strong>GİB Durum Kodları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.GIB_STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Belgenin GİB&#39;de ki durum kodunun açıklaması. Detay için <strong>GİB Durum Kodları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.CDATE</strong></td>
<td>DateTime</td>
<td>Belgenin sisteme ulaştığı tarih</td>
</tr>
<tr>
<td><strong>DESPATCHADVICEHEADER.ENVELOPE_IDENTIFIER</strong></td>
<td>String</td>
<td>Belgenin zarf IDsi.</td>
</tr>
<tr>
<td><strong>DESPATCHADVICE.CONTENT</strong></td>
<td>Base64Binary</td>
<td>Belgenin içeriği. Eğer <code class="prettyprint">COMPRESSED</code> parametresi <code class="prettyprint">N</code> olarak gönderilmişse XML dosya, <code class="prettyprint">COMPRESSED</code> elemanı gönderilmemiş veya <code class="prettyprint">Y</code> değeri gönderilmişse sıkıştırılmış/ziplenmiş XML dosyası dönülür.</td>
</tr>
</tbody></table>

<h2 id="e-rsaliyeyi-okundu-aretleme-markdespatchadvice">E-İrsaliyeyi Okundu İşaretleme (MarkDespatchAdvice)</h2>

<ul>
<li>E-İrsaliye belgelerini okundu/okunmadı olarak işaretlemek için kullanılan servisin clientıdır.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>ACTION</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Başarı ile alındıysa <code class="prettyprint">READ</code> gönderilmeli. Daha önce alındı olarak işaretlenen bir faturayı tekrar çekmeden önce <code class="prettyprint">UNREAD</code> olarak gönderilebilir.</td>
</tr>
<tr>
<td><strong>UUID</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>İşaretlenecek belgenin Evrensel Tekil Tanımlama Numarası.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>İstek ile istemci tarafından işlem IDsi gönderilmişse sonuç ile beraber dönülür.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda WS Fault objesi dönecektir.</td>
</tr>
</tbody></table>

<h2 id="e-rsaliye-yan-t-g-nderme-sendreceiptadvice">E-İrsaliye Yanıtı Gönderme (SendReceiptAdvice)</h2>

<ul>
<li>E-İrsaliye Yanıtı belgesini özel entegratör sistemlerine gönderilmesini sağlayan servisin clientıdır.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>SENDER_VKN</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Gönderenin VKNsi.</td>
</tr>
<tr>
<td><strong>SENDER_ALIAS</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Gönderenin ünvanı.</td>
</tr>
<tr>
<td><strong>RECEIVER_VKN</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Alıcının VKNsi.</td>
</tr>
<tr>
<td><strong>RECEIVER_ALIAS</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Alıcının ünvanı.</td>
</tr>
<tr>
<td><strong>COMPRESSED</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>İrsaliye contentini nasıl alınacağını belirler. <code class="prettyprint">Y</code> değeri için sıkıştırılmış, <code class="prettyprint">N</code> değeri için sıkıştırılmamış contenti verir.</td>
</tr>
<tr>
<td><strong>CONTENT</strong></td>
<td>Base64Binary</td>
<td><strong>Evet</strong></td>
<td>Belgenin Base64Binary olarak encode edilmiş XML veya Ziplenmiş içeriği. Eğer belgeyi ziplemeden/sıkıştırmadan göndermek istiyorsanız <code class="prettyprint">COMPRESSED</code> elemanı eklenmeli ve <code class="prettyprint">N</code> değeri gönderilmelidir.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>İstek ile istemci tarafından işlem IDsi gönderilmişse sonuç ile beraber dönülür.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda WS Fault objesi dönecektir.</td>
</tr>
</tbody></table>

<h2 id="taslak-e-rsaliye-yan-t-y-kleme-loadreceiptadvice">Taslak E-İrsaliye Yanıtı Yükleme (LoadReceiptAdvice)</h2>

<ul>
<li>Taslak E-İrsaliye Yanıtı belgelerini yüklemek için kullanılan servisin clientıdır.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>CONTENT</strong></td>
<td>Base64Binary</td>
<td><strong>Evet</strong></td>
<td>Belgenin Base64Binary olarak encode edilmiş XML veya Ziplenmiş içeriği. Eğer belgeyi ziplemeden/sıkıştırmadan göndermek istiyorsanız <code class="prettyprint">COMPRESSED</code> elemanı eklenmeli ve <code class="prettyprint">N</code> değeri gönderilmelidir.</td>
</tr>
<tr>
<td><strong>COMPRESSED</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>İrsaliye contentini nasıl alınacağını belirler. <code class="prettyprint">Y</code> değeri için sıkıştırılmış, <code class="prettyprint">N</code> değeri için sıkıştırılmamış contenti verir.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>İstek ile istemci tarafından işlem IDsi gönderilmişse sonuç ile beraber dönülür.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda WS Fault objesi dönecektir.</td>
</tr>
</tbody></table>

<h2 id="e-rsaliye-yan-t-durumu-okuma-getreceiptadvicestatus">E-İrsaliye Yanıtı Durumu Okuma (GetReceiptAdviceStatus)</h2>

<ul>
<li>Sistemde bulunan irsaliye yanıtlarının durumlarını okumak için kullanılan servisin clientıdır.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>UUID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Evrensel Tekil Tanımlama Numarası (ETTN) ile okumak için kullanılır.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>RECEIPTADVICE_STATUS</strong></td>
<td>Complex</td>
<td>Sorgu kriterine uyan irsaliye yanıtlarının listesi.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICE_STATUS.RECEIPTADVICEHEADER</strong></td>
<td>Complex</td>
<td>İrsaliye yanıtına ait özet bilgiler içermektedir.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICEHEADER.ID</strong></td>
<td>String</td>
<td>İrsaliye yanıtı numarası.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICEHEADER.UUID</strong></td>
<td>String</td>
<td>Evrensel tekil tanımlama numarası.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICEHEADER.PROFILEID</strong></td>
<td>String</td>
<td>Belge senaryosu. <code class="prettyprint">TEMELIRSALIYE</code> değeri olabilir.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICEHEADER.ISSUE_DATE</strong></td>
<td>Date</td>
<td>Belge tarihi.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICEHEADER.ISSUE_TIME</strong></td>
<td>String</td>
<td>Belge düzenleme zamanı.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICEHEADER.ACTUAL_SHIPMENT_DATE</strong></td>
<td>Date</td>
<td>Fiili sevk tarihi.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICEHEADER.ACTUAL_SHIPMENT_TIME</strong></td>
<td>String</td>
<td>Fiili sevk zamanı.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICEHEADER.DIRECTION</strong></td>
<td>String</td>
<td>Belge yönü. Gelen irsaliye yanıtı için <code class="prettyprint">IN</code>, giden irsaliye yanıtı için <code class="prettyprint">OUT</code> değeri dönülür.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICEHEADER.STATUS</strong></td>
<td>String</td>
<td>Belgenin durumu. Detay için <strong>E-İrsaliye Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICEHEADER.STATUS_CODE</strong></td>
<td>String</td>
<td>Belgenin durum kodu. Detay için <strong>E-İrsaliye Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICEHEADER.STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Belge durum açıklaması. Detay için <strong>E-İrsaliye Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICEHEADER.GIB_STATUS_CODE</strong></td>
<td>String</td>
<td>Belgenin GİB&#39;de ki durum kodu. Detay için <strong>GİB Durum Kodları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICEHEADER.GIB_STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Belgenin GİB&#39;de ki durum kodunun açıklaması. Detay için <strong>GİB Durum Kodları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICEHEADER.ENVELOPE_IDENTIFIER</strong></td>
<td>String</td>
<td>Belgenin zarf IDsi.</td>
</tr>
</tbody></table>

<h2 id="e-rsaliye-yan-t-okuma-getreceiptadvice">E-İrsaliye Yanıtı Okuma (GetReceiptAdvice)</h2>

<ul>
<li>Sistemde bulunan irsaliye yanıtlarını okumak için kullanılan servisin clientıdır.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>DIRECTION</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Belge yönü. Gelen veya Giden irsaliyeleri çekmek için kullanılabilir. Gelen irsaliyeleleri çekmek için <code class="prettyprint">IN</code>, giden irsaliyeleleri çekmek için <code class="prettyprint">OUT</code> değeri gönderilebilir. Varsayılan değer <code class="prettyprint">IN</code> olduğu için eğer parametre gönderilmezse sadece gelen irsaliyeler dönülecektir. Gönderilebilecek değerler: <code class="prettyprint">IN</code>, <code class="prettyprint">OUT</code></td>
</tr>
<tr>
<td><strong>LIMIT</strong></td>
<td>Integer</td>
<td><strong>Hayır</strong></td>
<td>Gelen cevapta en fazla kaç adet irsaliye olabileceğini belirtir.</td>
</tr>
<tr>
<td><strong>SENDER_ALIAS</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Gönderenin ünvanı.</td>
</tr>
<tr>
<td><strong>RECEIVER_ALIAS</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Alıcının ünvanı.</td>
</tr>
<tr>
<td><strong>UUID</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Evrensel Tekil Tanımlama Numarası (ETTN) ile okumak için kullanılır.</td>
</tr>
<tr>
<td><strong>START_DATE</strong></td>
<td>Date</td>
<td><strong>Hayır</strong></td>
<td>Belirli bir tarih aralığı araması yapıldığında başlangıç tarihi ataması yapılır. <strong>Format: 2019-01-01</strong></td>
</tr>
<tr>
<td><strong>END_DATE</strong></td>
<td>Date</td>
<td><strong>Hayır</strong></td>
<td>Belirli bir tarih aralığı araması yapıldığında bitiş tarihi ataması yapılır. <strong>Format: 2019-12-31</strong></td>
</tr>
<tr>
<td><strong>HEADER_ONLY</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td><code class="prettyprint">Y</code> verildiğinde irsaliye özeti döner. <code class="prettyprint">N</code> verildiğinde ise <code class="prettyprint">CONTENT</code>i de yollanır.</td>
</tr>
<tr>
<td><strong>READ_INCLUDED</strong></td>
<td>Boolean</td>
<td><strong>Hayır</strong></td>
<td>Daha önce okunmuş belgeleri dönüşe dahil edilip edilmeyeceğini belirleyen parametredir.<code class="prettyprint">true</code> değeri atanırsa okunmuş belgeler de gelir, <code class="prettyprint">false</code> atamasında iste sadece okunmamış belgeler gelecektir.</td>
</tr>
<tr>
<td><strong>COMPRESSED</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>İrsaliye contentini nasıl alınacağını belirler. <code class="prettyprint">Y</code> değeri için sıkıştırılmış, <code class="prettyprint">N</code> değeri için sıkıştırılmamış contenti verir.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>RECEIPTADVICE</strong></td>
<td>Complex</td>
<td>Sorgu kriterine uyan irsaliye yanıtlarının listesi. İrsaliye numarası <code class="prettyprint">ID</code>, evrensel tekil tanımlama numarası <code class="prettyprint">UUID</code> ve e-irsaliye sisteminde tanımlı tekil numara değeri <code class="prettyprint">LIST_ID</code> attribute içerisinde dönülmektedir.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICE.RECEIPTADVICEHEADER</strong></td>
<td>Complex</td>
<td>İrsaliye yanıtına ait özet bilgiler içermektedir.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICEHEADER.PROFILEID</strong></td>
<td>String</td>
<td>Belge senaryosu. <code class="prettyprint">TEMELIRSALIYE</code> değeri olabilir.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICEHEADER.ISSUE_DATE</strong></td>
<td>Date</td>
<td>Belge tarihi.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICEHEADER.ISSUE_TIME</strong></td>
<td>String</td>
<td>Belge düzenleme zamanı.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICEHEADER.ACTUAL_SHIPMENT_DATE</strong></td>
<td>Date</td>
<td>Fiili sevk tarihi.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICEHEADER.ACTUAL_SHIPMENT_TIME</strong></td>
<td>String</td>
<td>Fiili sevk zamanı.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICEHEADER.TYPE_CODE</strong></td>
<td>String</td>
<td>Belgenin tipi. <code class="prettyprint">SEVK</code> değeri olabilir.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICEHEADER.DIRECTION</strong></td>
<td>String</td>
<td>Belge yönü. Gelen irsaliye yanıtı için <code class="prettyprint">IN</code>, giden irsaliye yanıtı için <code class="prettyprint">OUT</code> değeri dönülür.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICEHEADER.SENDER</strong></td>
<td>String</td>
<td>Belgeyi gönderen firma VKN&#39;si.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICEHEADER.RECEIVER</strong></td>
<td>String</td>
<td>Belgeyi alan firma VKN&#39;si.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICEHEADER.STATUS</strong></td>
<td>String</td>
<td>Belgenin durumu. Detay için <strong>E-İrsaliye Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICEHEADER.STATUS_CODE</strong></td>
<td>String</td>
<td>Belgenin durum kodu. Detay için <strong>E-İrsaliye Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICEHEADER.STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Belge durum açıklaması. Detay için <strong>E-İrsaliye Durumları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICEHEADER.GIB_STATUS_CODE</strong></td>
<td>Integer</td>
<td>Belgenin GİB&#39;de ki durum kodu. Detay için <strong>GİB Durum Kodları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICEHEADER.GIB_STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Belgenin GİB&#39;de ki durum kodunun açıklaması. Detay için <strong>GİB Durum Kodları</strong> başlığını inceleyiniz.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICEHEADER.CDATE</strong></td>
<td>DateTime</td>
<td>Belgenin sisteme ulaştığı tarih</td>
</tr>
<tr>
<td><strong>RECEIPTADVICEHEADER.ENVELOPE_IDENTIFIER</strong></td>
<td>String</td>
<td>Belgenin zarf IDsi.</td>
</tr>
<tr>
<td><strong>RECEIPTADVICE.CONTENT</strong></td>
<td>Base64Binary</td>
<td>Belgenin içeriği. Eğer <code class="prettyprint">COMPRESSED</code> parametresi <code class="prettyprint">N</code> olarak gönderilmişse XML dosya, <code class="prettyprint">COMPRESSED</code> elemanı gönderilmemiş veya <code class="prettyprint">Y</code> değeri gönderilmişse sıkıştırılmış/ziplenmiş XML dosyası dönülür.</td>
</tr>
</tbody></table>

<h2 id="e-rsaliye-yan-t-n-okundu-aretleme-markreceiptadvice">E-İrsaliye Yanıtını Okundu İşaretleme (MarkReceiptAdvice)</h2>

<ul>
<li>E-İrsaliye Yanıtı belgelerini okundu/okunmadı olarak işaretlemek için kullanılan servisin clientıdır.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>ACTION</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Başarı ile alındıysa <code class="prettyprint">READ</code> gönderilmeli. Daha önce alındı olarak işaretlenen bir faturayı tekrar çekmeden önce <code class="prettyprint">UNREAD</code> olarak gönderilebilir.</td>
</tr>
<tr>
<td><strong>UUID</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>İşaretlenecek belgenin Evrensel Tekil Tanımlama Numarası.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>İstek ile istemci tarafından işlem IDsi gönderilmişse sonuç ile beraber dönülür.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda WS Fault objesi dönecektir.</td>
</tr>
</tbody></table>

<h2 id="e-smm-metodlar">E-SMM Metodları</h2>

<p>Serbest Meslek Makbuzunun Gelir İdaresi Başkanlığı tarafından belirlenen standartlara uygun olarak elektronik ortamda oluşturulması, muhafazası, ibrazı ve raporlanmasını kapsayan uygulamadır. Aşağıdaki metodlari içerir.</p>

<ul>
<li>GetSmm</li>
<li>GetSmmStatus</li>
<li>SendSmm</li>
<li>CancelSmm</li>
<li>LoadSmm</li>
</ul>

<h2 id="dikkat-edilecek-hususlar-e-smm">Dikkat Edilecek Hususlar(E-SMM)</h2>

<ol>
<li><strong>Kimlik Doğrulama (Authentication)</strong> Webservisinde bulunan <strong>Login</strong> metodu ile oturum açarak session id alınacaktır. Session Id sistemimiz tarafında 8 saate kadar zaman aşımına uğramadığı için kullanıcı giriş yapınca session id alıp bütün kullanım süresinde aynı session id kullanabilirsiniz.</li>
<li>SMM belgeleri UBL-TR Invoice formatına dönüştürerek gönderilmelidir. Her dosya içerisinde görüntülenmesini sağlayan XSLT dokümanı olmalıdır.</li>
<li><strong>SendSMM</strong> metodu ile belge gönderimi yapılmaktadır.</li>
<li><strong>GetSMMStatus</strong> metodu ile entegrasyon sunucularına yüklenen belgelerin durumları sorgulanacak. <strong>Sık sorgulama yapmayınız.</strong></li>
<li><strong>GetSMM</strong> metodu ile yüklenen belgenin imzalı XML, PDF ve HTML formatında tekrar müşteri bilgisayarına çekmek için kullanılabilir.</li>
<li><strong>CancelSMM</strong> metodu ile eksik/hatalı oluşturulmuş veya müşteri tarafından iptal/iade edilmiş belgeleri GİB&#39;e iptal olarak raporlanmasını veya tamamen iptal edilerek hiç raporlanmamasını sağlayabilirsiniz.</li>
<li><strong>Kimlik Doğrulama (Authentication)</strong> Webservisinde bulunan  <strong>Logout</strong> metodu ile kullanıcı programını kapatınca veya sizin belirlediğiniz bir sürede oturumu
kapatabilirsiniz.</li>
</ol>

<h2 id="e-smm-okuma-getsmm">E-SMM Okuma (GetSmm)</h2>

<ul>
<li>Özel entegratör platformundan imzalanmış belgeleri okumayı sağlayan servisin clientıdır.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>APPLICATION_NAME</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Metodu kullanan uygulamanın adı verilir.</td>
</tr>
<tr>
<td><strong>COMPRESSED</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Fatura contentini nasıl alınacağını belirler. <code class="prettyprint">Y</code> değeri için sıkıştırılmış, <code class="prettyprint">N</code> değeri için sıkıştırılmamış contenti verir.</td>
</tr>
<tr>
<td><strong>LIMIT</strong></td>
<td>Integer</td>
<td><strong>Hayır</strong></td>
<td>Gelen cevapta en fazla kaç adet smm olabileceğini belirtir.</td>
</tr>
<tr>
<td><strong>ID</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Belge numarası ile okumak için kullanılabilir. Format: ABC2019000000001</td>
</tr>
<tr>
<td><strong>UUID</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Evrensel Tekil Tanımlama Numarası (ETTN) ile okumak için kullanılır.</td>
</tr>
<tr>
<td><strong>START_DATE</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Belirli bir tarih aralığı araması yapıldığında başlangıç tarihi ataması yapılır. <strong>Format: 2019-01-01</strong></td>
</tr>
<tr>
<td><strong>END_DATE</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Belirli bir tarih aralığı araması yapıldığında bitiş tarihi ataması yapılır. <strong>Format: 2019-12-31</strong></td>
</tr>
<tr>
<td><strong>READ_INCLUDED</strong></td>
<td>Boolean</td>
<td><strong>Hayır</strong></td>
<td>Daha önce okunmuş belgeleri dönüşe dahil edilip edilmeyeceğini belirleyen parametredir.<code class="prettyprint">true</code> değeri atanırsa okunmuş belgeler de gelir, <code class="prettyprint">false</code> atamasında iste sadece okunmamış belgeler gelecektir.</td>
</tr>
<tr>
<td><strong>CONTENT_TYPE</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Müstahsil içeriğinin nasıl yollanacağını belirler. <code class="prettyprint">XML</code>, <code class="prettyprint">HTML</code> ve <code class="prettyprint">PDF</code> olabilir. <strong><code class="prettyprint">HEADER_ONLY</code> değeri <code class="prettyprint">N</code> verildiyse değer atanması zorunludur.</strong></td>
</tr>
<tr>
<td><strong>HEADER_ONLY</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td><code class="prettyprint">Y</code> verildiğinde SMM özeti döner. <code class="prettyprint">N</code> verildiğinde ise içeriğin kendiside yollanır. <strong><code class="prettyprint">N</code> yollandığı zaman <code class="prettyprint">CONTENT_TYPE</code> değerinin atanması zorunludur.</strong></td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SMM</strong></td>
<td>Complex</td>
<td>Sorgu kriterine uyan tekil belge. Belge numarası <code class="prettyprint">ID</code>, evrensel tekil tanımlama numarası <code class="prettyprint">UUID</code> attribute içerisinde dönülmektedir.</td>
</tr>
<tr>
<td><strong>SMM.HEADER</strong></td>
<td>Complex</td>
<td>Belgeye ait özet bilgileri içerir.</td>
</tr>
<tr>
<td><strong>HEADER.CUSTOMER</strong></td>
<td>Complex</td>
<td>Belge düzenlenen alıcı bilgisi. <code class="prettyprint">IDENTIFIER</code> attribute ile VKN/TCKN bilgisi, <code class="prettyprint">NAME</code> attribute ile ünvan bilgisi dönülür.</td>
</tr>
<tr>
<td><strong>HEADER.ISSUE_DATE</strong></td>
<td>DateTime</td>
<td>Belge düzenlenme tarihi. <strong>Format: 2019-12-31+03:00</strong></td>
</tr>
<tr>
<td><strong>HEADER.PAYABLE_AMOUNT</strong></td>
<td>AmountType</td>
<td>Toplam ödenecek tutar.</td>
</tr>
<tr>
<td><strong>HEADER.PROFILE_ID</strong></td>
<td>String</td>
<td>Belge senaryosu.</td>
</tr>
<tr>
<td><strong>HEADER.STATUS</strong></td>
<td>String</td>
<td>Belgenin durumu.</td>
</tr>
<tr>
<td><strong>HEADER.STATUS_CODE</strong></td>
<td>String</td>
<td>Belge durum kodu.</td>
</tr>
<tr>
<td><strong>HEADER.STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Belge durum açıklaması.</td>
</tr>
<tr>
<td><strong>HEADER.CDATE</strong></td>
<td>String</td>
<td>Belgenin sisteme yüklendiği tarih. <strong>Format: 2019-12-31T23:59:59.000+03:00</strong></td>
</tr>
<tr>
<td><strong>SMM.CONTENT</strong></td>
<td>Base64Binary</td>
<td>Belgenin içeriği. PDF formatında. Eğer <code class="prettyprint">COMPRESSED</code> parametresi <code class="prettyprint">N</code> olarak gönderilmişse PDF dosya sıkıştırılmadan, <code class="prettyprint">COMPRESSED</code> elemanı gönderilmemiş veya <code class="prettyprint">Y</code> değeri gönderilmişse sıkıştırılmış/ziplenmiş PDF dosyası dönülür.</td>
</tr>
</tbody></table>

<h2 id="e-smm-durumu-okuma-getsmmstatus">E-SMM Durumu Okuma (GetSMMStatus)</h2>

<ul>
<li>Özel entegratör platformundan imzalanmış belgelerin durumlarını okumayı sağlayan servisin clientıdır.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>APPLICATION_NAME</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Metodu kullanan uygulamanın adı verilir.</td>
</tr>
<tr>
<td><strong>UUID</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Yüklenecek taslağın UUID değeri.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SMM_STATUS</strong></td>
<td>Complex</td>
<td>Sorgu kriterine uyan tekil belge. Belge numarası <code class="prettyprint">ID</code>, evrensel tekil tanımlama numarası <code class="prettyprint">UUID</code> attribute içerisinde dönülmektedir.</td>
</tr>
<tr>
<td><strong>SMM_STATUS.HEADER</strong></td>
<td>Complex</td>
<td>Belgeye ait özet bilgileri içerir.</td>
</tr>
<tr>
<td><strong>HEADER.ISSUE_DATE</strong></td>
<td>DateTime</td>
<td>Belge düzenlenme tarihi. <strong>Format: 2019-12-31+03:00</strong></td>
</tr>
<tr>
<td><strong>HEADER.PAYABLE_AMOUNT</strong></td>
<td>AmountType</td>
<td>Toplam ödenecek tutar.</td>
</tr>
<tr>
<td><strong>HEADER.PROFILE_ID</strong></td>
<td>String</td>
<td>Belge senaryosu.</td>
</tr>
<tr>
<td><strong>HEADER.STATUS</strong></td>
<td>String</td>
<td>Belgenin durumu.</td>
</tr>
<tr>
<td><strong>HEADER.STATUS_CODE</strong></td>
<td>String</td>
<td>Belge durum kodu.</td>
</tr>
<tr>
<td><strong>HEADER.STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Belge durum açıklaması.</td>
</tr>
</tbody></table>

<h2 id="e-smm-g-nderme-sendsmm">E-SMM Gönderme (SendSmm)</h2>

<ul>
<li>E-SMM belgesini özel entegratör sistemlerine gönderilmesini sağlayan servisin clientıdır.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>APPLICATION_NAME</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Metodu kullanan uygulamanın adı verilir.</td>
</tr>
<tr>
<td><strong>COMPRESSED</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Belge sıkıştırılarak/ziplenerek gönderiliyorsa değer verilmeyebilir veya <code class="prettyprint">Y</code> olarak gönderilebilir. XML formatında sıkıştırılmadan yüklemek için <code class="prettyprint">N</code> değeri gönderilmelidir.</td>
</tr>
<tr>
<td><strong>ID</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Yüklenecek taslağın ID değeri.</td>
</tr>
<tr>
<td><strong>UUID</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Yüklenecek taslağın UUID değeri.</td>
</tr>
<tr>
<td><strong>SMS_FLAG</strong></td>
<td>Enum</td>
<td><strong>Hayır</strong></td>
<td><code class="prettyprint">ELEKTRONIK</code> olarak yollanan belgelerde kontrolü yapılır. <code class="prettyprint">Y</code> girildi ise <code class="prettyprint">SMS_NUMBER</code> değeri verilmelidir. <code class="prettyprint">N</code>verildiğinde verilse bile <code class="prettyprint">SMS_NUMBER</code> değeri dikkate alınmaz.</td>
</tr>
<tr>
<td><strong>SMS_NUMBER</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Belgenin yollanacağı kişinin telefon numarası. <strong>Format: 0(500) 500 50 50</strong></td>
</tr>
<tr>
<td><strong>EMAIL_FLAG</strong></td>
<td>Enum</td>
<td><strong>Hayır</strong></td>
<td><code class="prettyprint">ELEKTRONIK</code> olarak yollanan belgelerde kontrolü yapılır. <code class="prettyprint">Y</code> girildi ise <code class="prettyprint">EMAIL</code> değeri verilmelidir. <code class="prettyprint">N</code>verildiğinde verilse bile <code class="prettyprint">EMAIL</code> değeri dikkate alınmaz.</td>
</tr>
<tr>
<td><strong>EMAIL</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Belgenin yollanacağı mail adresi. Format kontrolü yapılır, emailin doğruluğu kullanıcıya aittir. <strong>Format: smm@firma.com.tr</strong></td>
</tr>
<tr>
<td><strong>SERIES_FLAG</strong></td>
<td>Enum</td>
<td><strong>Hayır</strong></td>
<td>Belge numarasının özel entegratör tarafından atanması için <code class="prettyprint">Y</code> değeri gönderilmelidir. DİKKAT: <code class="prettyprint">SERIES_PREFIX</code> elemanında belirlenen ön ek ile belge numarası atanacak ve belge içerisinde ki değer ezilecektir.</td>
</tr>
<tr>
<td><strong>SERIES_PREFIX</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Belge numarası atanacak ön ek. 3 hane alfanumerik değer içermelidir. Belge numarası yönetimi hakkında daha detaylı bilgi almak için <strong>Başlarken -&gt; Belge Numarası Yönetimi</strong> başlığını inceleyiniz. Belge numarasının özel entegratör tarafından atanması için <code class="prettyprint">Y</code> değeri gönderilmelidir. DİKKAT: <code class="prettyprint">SERIES_FLAG</code> elemanı <code class="prettyprint">Y</code> değeri gönderilmemişse bu alan dolu olsa dahi belge numarası atanmayacaktır.</td>
</tr>
<tr>
<td><strong>SENDING_TYPE</strong></td>
<td>Enum</td>
<td><strong>Evet</strong></td>
<td>Belgenin yollanma şekli. <code class="prettyprint">ELEKTRONIK</code> veya <code class="prettyprint">KAGIT</code> olabilir. Gönderim şekli <code class="prettyprint">ELEKTRONIK</code> olan belge SMS veya ePosta adresi olmak zorundadır</td>
</tr>
<tr>
<td><strong>SMM_CONTENT</strong></td>
<td>Base64Binary</td>
<td><strong>Evet</strong></td>
<td>Belgenin Base64Binary olarak encode edilmiş XML veya Ziplenmiş içeriği. Eğer belgeyi ziplemeden/sıkıştırmadan göndermek istiyorsanız <code class="prettyprint">COMPRESSED</code> elemanı eklenmeli ve <code class="prettyprint">N</code> değeri gönderilmelidir.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>İstek ile istemci tarafından işlem IDsi gönderilmişse sonuç ile beraber dönülür.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda WS Fault objesi dönecektir.</td>
</tr>
</tbody></table>

<h2 id="e-smm-ptal-cancelsmm">E-SMM İptal (CancelSmm)</h2>

<ul>
<li>E-SMM belgesinin iptal edilmesini sağlayan servisin clientıdır.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>APPLICATION_NAME</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Metodu kullanan uygulamanın adı verilir.</td>
</tr>
<tr>
<td><strong>UUID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Yüklenecek taslağın UUID değeri.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>İstek ile istemci tarafından işlem IDsi gönderilmişse sonuç ile beraber dönülür.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda WS Fault objesi dönecektir.</td>
</tr>
</tbody></table>

<h2 id="taslak-e-smm-y-kleme-loadsmm">Taslak E-SMM Yükleme (LoadSmm)</h2>

<ul>
<li>Taslak E-SMM belgesinin yüklenmesini sağlayan servisin clientıdır.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>APPLICATION_NAME</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Metodu kullanan uygulamanın adı verilir.</td>
</tr>
<tr>
<td><strong>COMPRESSED</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Belge sıkıştırılarak/ziplenerek gönderiliyorsa değer verilmeyebilir veya <code class="prettyprint">Y</code> olarak gönderilebilir. XML formatında sıkıştırılmadan yüklemek için <code class="prettyprint">N</code> değeri gönderilmelidir.</td>
</tr>
<tr>
<td><strong>ID</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Yüklenecek taslağın ID değeri.</td>
</tr>
<tr>
<td><strong>UUID</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Yüklenecek taslağın UUID değeri.</td>
</tr>
<tr>
<td><strong>SMS_FLAG</strong></td>
<td>Enum</td>
<td><strong>Hayır</strong></td>
<td><code class="prettyprint">ELEKTRONIK</code> olarak yollanan belgelerde kontrolü yapılır. <code class="prettyprint">Y</code> girildi ise <code class="prettyprint">SMS_NUMBER</code> değeri verilmelidir. <code class="prettyprint">N</code>verildiğinde verilse bile <code class="prettyprint">SMS_NUMBER</code> değeri dikkate alınmaz.</td>
</tr>
<tr>
<td><strong>SMS_NUMBER</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Belgenin yollanacağı kişinin telefon numarası. <strong>Format: 0(500) 500 50 50</strong></td>
</tr>
<tr>
<td><strong>EMAIL_FLAG</strong></td>
<td>Enum</td>
<td><strong>Hayır</strong></td>
<td><code class="prettyprint">ELEKTRONIK</code> olarak yollanan belgelerde kontrolü yapılır. <code class="prettyprint">Y</code> girildi ise <code class="prettyprint">EMAIL</code> değeri verilmelidir. <code class="prettyprint">N</code>verildiğinde verilse bile <code class="prettyprint">EMAIL</code> değeri dikkate alınmaz.</td>
</tr>
<tr>
<td><strong>EMAIL</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Belgenin yollanacağı mail adresi. Format kontrolü yapılır, emailin doğruluğu kullanıcıya aittir. <strong>Format: smm@firma.com.tr</strong></td>
</tr>
<tr>
<td><strong>SENDING_TYPE</strong></td>
<td>Enum</td>
<td><strong>Evet</strong></td>
<td>Belgenin yollanma şekli. <code class="prettyprint">ELEKTRONIK</code> veya <code class="prettyprint">KAGIT</code> olabilir. Gönderim şekli <code class="prettyprint">ELEKTRONIK</code> olan belge SMS veya ePosta adresi olmak zorundadır</td>
</tr>
<tr>
<td><strong>SMM_CONTENT</strong></td>
<td>Base64Binary</td>
<td><strong>Evet</strong></td>
<td>Belgenin Base64Binary olarak encode edilmiş XML veya Ziplenmiş içeriği. Eğer belgeyi ziplemeden/sıkıştırmadan göndermek istiyorsanız <code class="prettyprint">COMPRESSED</code> elemanı eklenmeli ve <code class="prettyprint">N</code> değeri gönderilmelidir.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>İstek ile istemci tarafından işlem IDsi gönderilmişse sonuç ile beraber dönülür.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda WS Fault objesi dönecektir.</td>
</tr>
</tbody></table>

<h2 id="e-mustahsil">E-Mustahsil</h2>

<p>e-Müstahsil Makbuzu (e-MM) Uygulaması, müstahsil makbuzunun Gelir İdaresi Başkanlığı tarafından belirlenen standartlara uygun olarak elektronik ortamda oluşturulması, hem kağıt hem de elektronik ortamda muhafazası ve ibrazı ile elektronik ortamda raporlamasını kapsayan uygulamadır. Aşağıdaki metodları içerir.</p>

<ul>
<li>CancelCreditNote</li>
<li>GetCreditNote</li>
<li>GetCreditNoteReport</li>
<li>GetCreditNoteStatus</li>
<li>LoadCreditNote</li>
<li>MarkCreditNote</li>
<li>SendCreditNote</li>
</ul>

<h2 id="dikkat-edilecek-hususlar-e-m-stahsil">Dikkat Edilecek Hususlar(E-Müstahsil)</h2>

<ol>
<li><strong>Kimlik Doğrulama (Authentication)</strong> Webservisinde bulunan <strong>Login</strong> metodu ile oturum açarak session id alınacaktır. Session Id sistemimiz tarafında 8 saate kadar zaman aşımına uğramadığı için kullanıcı giriş yapınca session id alıp bütün kullanım süresinde aynı session id kullanabilirsiniz.</li>
<li>Müstahsil makbuzu belgeleri UBL-TR CreditNote formatına dönüştürerek gönderilmelidir. Her dosya içerisinde görüntülenmesini sağlayan XSLT dokümanı olmalıdır.</li>
<li><strong>SendCreditNote</strong> metodu ile müstahsil makbuzu gönderimi yapılmaktadır.</li>
<li><strong>GetCreditNoteStatus</strong> metodu ile entegrasyon sunucularına yüklenen belgelerin durumları sorgulanacak. <strong>Sık sorgulama yapmayınız.</strong></li>
<li><strong>ReadCreditNote</strong> metodu ile yüklenen belgenin imzalı XML, PDF ve HTML formatında tekrar müşteri bilgisayarına çekmek için kullanılabilir.</li>
<li><strong>CancelCreditNote</strong> metodu ile eksik/hatalı oluşturulmuş veya müşteri tarafından iptal/iade edilmiş belgeleri GİB&#39;e iptal olarak raporlanmasını veya tamamen iptal edilerek hiç raporlanmamasını sağlayabilirsiniz.</li>
<li><strong>Kimlik Doğrulama (Authentication)</strong> Webservisinde bulunan  <strong>Logout</strong> metodu ile kullanıcı e-fatura programını kapatınca veya sizin belirlediğiniz bir sürede oturumu
kapatabilirsiniz.</li>
</ol>

<h2 id="e-mustahsil-ptal-cancelcreditnote">E-Mustahsil İptal (CancelCreditNote)</h2>

<ul>
<li>Mevcut E-Müstahsil Makbuzu belgesinin iptalini sağlayan servisin clientıdır.</li>
<li>Belge UUID si kullanılarak iptal işlemi sağlanır.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>APPLICATION_NAME</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Metodu kullanan uygulamanın adı verilir.</td>
</tr>
<tr>
<td><strong>UUID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Müstahsil, Evrensel Tekil Tanımlama Numarası (ETTN) kullanılarak iptal edilir.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>İstek ile istemci tarafından işlem IDsi gönderilmişse sonuç ile beraber dönülür.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda WS Fault objesi dönecektir.</td>
</tr>
</tbody></table>

<h2 id="e-mustahsil-okuma-getcreditnote">E-Mustahsil Okuma (GetCreditNote)</h2>

<ul>
<li>Özel entegratör platformundan e-müstahsil belgelerini okumayı sağlayan servisin clientıdır.</li>
<li>Belgeler özet olarak getirilebileceği gibi, imzalı UBL-TR XML, PDF veya HTML olarak okunabilinir.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>APPLICATION_NAME</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Metodu kullanan uygulamanın adı verilir.</td>
</tr>
<tr>
<td><strong>COMPRESSED</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Fatura contentini nasıl alınacağını belirler. <code class="prettyprint">Y</code> değeri için sıkıştırılmış, <code class="prettyprint">N</code> değeri için sıkıştırılmamış contenti verir.</td>
</tr>
<tr>
<td><strong>DIRECTION</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Belgenin gönderildiği yön. Gelen için <code class="prettyprint">IN</code>, giden için <code class="prettyprint">OUT</code> değeri verilir.</td>
</tr>
<tr>
<td><strong>ID</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Belge numarası ile okumak için kullanılabilir. Format: ABC2019000000001</td>
</tr>
<tr>
<td><strong>UUID</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Evrensel Tekil Tanımlama Numarası (ETTN) ile okumak için kullanılır.</td>
</tr>
<tr>
<td><strong>LIMIT</strong></td>
<td>Integer</td>
<td><strong>Hayır</strong></td>
<td>Gelen cevapta en fazla kaç adet mühtahsil olabileceğini belirtir. Eğer eleman gönderilmezse 10 adet kayıt dönülür.</td>
</tr>
<tr>
<td><strong>READ_INCLUDED</strong></td>
<td>Boolean</td>
<td><strong>Hayır</strong></td>
<td>Daha önce okunmuş belgeleri dönüşe dahil edilip edilmeyeceğini belirleyen parametredir.<code class="prettyprint">true</code> değeri atanırsa okunmuş belgelerde gelir, <code class="prettyprint">false</code> atamasında iste sadece okunmamış belgeler gelecektir.</td>
</tr>
<tr>
<td><strong>CREDIT_NOTE_TYPE</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Müstahsil içeriğinin nasıl yollanacağını belirler. <code class="prettyprint">XML</code>, <code class="prettyprint">HTML</code> ve <code class="prettyprint">PDF</code> olabilir. <strong><code class="prettyprint">HEADER_ONLY</code> değeri <code class="prettyprint">N</code> verildiyse değer atanması zorunludur.</strong></td>
</tr>
<tr>
<td><strong>START_DATE</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Belirli bir tarih aralığı araması yapıldığında başlangıç tarihi ataması yapılır. <strong>Format: 2019-01-01</strong></td>
</tr>
<tr>
<td><strong>END_DATE</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Belirli bir tarih aralığı araması yapıldığında bitiş tarihi ataması yapılır. <strong>Format: 2019-12-31</strong></td>
</tr>
<tr>
<td><strong>HEADER_ONLY</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td><code class="prettyprint">Y</code> verildiğinde müstahsilin özeti döner. <code class="prettyprint">N</code> verildiğinde ise içeriğin kendiside yollanır. <strong><code class="prettyprint">N</code> yollandığı zaman <code class="prettyprint">CREDIT_NOTE_TYPE</code> değerinin atanması zorunludur.</strong></td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>CREDITNOTE</strong></td>
<td>Complex</td>
<td><code class="prettyprint">CREDITNOTEHEADER</code> ve <code class="prettyprint">CONTENT</code> objelerini barındıran nesnedir.</td>
</tr>
<tr>
<td><strong>CREDITNOTE.CREDITNOTEHEADER</strong></td>
<td>Complex</td>
<td>Müstahsilin özet bilgilerini içeren nesnedir.</td>
</tr>
<tr>
<td><strong>CREDITNOTEHEADER.ID</strong></td>
<td>String</td>
<td>Müstahsilin belge numarası.</td>
</tr>
<tr>
<td><strong>CREDITNOTEHEADER.UUID</strong></td>
<td>String</td>
<td>Müstahsilin Evrensel Tekil Tanımlama Numarası (ETTN)</td>
</tr>
<tr>
<td><strong>CREDITNOTEHEADER.PROFILEID</strong></td>
<td>String</td>
<td>Belge senaryosu.</td>
</tr>
<tr>
<td><strong>CREDITNOTEHEADER.SENDER</strong></td>
<td>Complex</td>
<td>Belgeyi gönderen firmanın VKN ve ünvanını içeren nesne.</td>
</tr>
<tr>
<td><strong>SENDER.VKN</strong></td>
<td>String</td>
<td>Belgeyi gönderen firmanın VKNsi.</td>
</tr>
<tr>
<td><strong>SENDER.IDENTIFIER</strong></td>
<td>String</td>
<td>Belgeyi gönderen firmanın ünvanı.</td>
</tr>
<tr>
<td><strong>CREDITNOTEHEADER.RECEIVER</strong></td>
<td>Complex</td>
<td>Belgeyi alan firmanın VKN ve ünvanını içeren nesne.</td>
</tr>
<tr>
<td><strong>RECEIVER.VKN</strong></td>
<td>String</td>
<td>Belgeyi alan firmanın VKNsi.</td>
</tr>
<tr>
<td><strong>RECEIVER.IDENTIFIER</strong></td>
<td>String</td>
<td>Belgeyi alan firmanın ünvanı.</td>
</tr>
<tr>
<td><strong>CREDITNOTEHEADER.STATUS</strong></td>
<td>String</td>
<td>Belgenin durumu.</td>
</tr>
<tr>
<td><strong>CREDITNOTEHEADER.STATUS_CODE</strong></td>
<td>String</td>
<td>Belgenin durum kodu.</td>
</tr>
<tr>
<td><strong>CREDITNOTEHEADER.STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Belgenin durum açıklaması.</td>
</tr>
<tr>
<td><strong>CREDITNOTE.CONTENT</strong></td>
<td>Base64Binary</td>
<td>Belgenin içeriği. Eğer <code class="prettyprint">COMPRESSED</code> parametresi <code class="prettyprint">N</code> olarak gönderilmişse sıkıştırılmamış dosya, <code class="prettyprint">COMPRESSED</code> parametresine <code class="prettyprint">Y</code> değeri gönderilmişse sıkıştırılmış/ziplenmiş dosya dönülür.</td>
</tr>
</tbody></table>

<h2 id="e-mustahsil-durumu-okuma-getcreditnotestatus">E-Mustahsil Durumu Okuma (GetCreditNoteStatus)</h2>

<ul>
<li>Özel entegratör platformundan e-müstahsil belgelerinin durumunu okumayı sağlayan servisin clientıdır.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>APPLICATION_NAME</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Metodu kullanan uygulamanın adı verilir.</td>
</tr>
<tr>
<td><strong>UUID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Durumuna bakılacak belgenin Evrensel Tekil Tanımlama Numarası(ETTN).</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>CREDITNOTE_STATUS</strong></td>
<td>Complex</td>
<td>Müstahsilin özet bilgilerini içeren nesnedir.</td>
</tr>
<tr>
<td><strong>CREDITNOTE_STATUS.ID</strong></td>
<td>String</td>
<td>Müstahsilin belge numarası.</td>
</tr>
<tr>
<td><strong>CREDITNOTE_STATUS.UUID</strong></td>
<td>String</td>
<td>Müstahsilin Evrensel Tekil Tanımlama Numarası (ETTN)</td>
</tr>
<tr>
<td><strong>CREDITNOTE_STATUS.PROFILEID</strong></td>
<td>String</td>
<td>Belge senaryosu.</td>
</tr>
<tr>
<td><strong>CREDITNOTE_STATUS.ISSUE_DATE</strong></td>
<td>Date</td>
<td>Belge tarihi.</td>
</tr>
<tr>
<td><strong>CREDITNOTE_STATUS.ISSUE_TIME</strong></td>
<td>String</td>
<td>Belge düzenleme tarihi.</td>
</tr>
<tr>
<td><strong>CREDITNOTE_STATUS.DIRECTION</strong></td>
<td>String</td>
<td>Belgenin gönderildiği yön. Gelen için <code class="prettyprint">IN</code>, giden için <code class="prettyprint">OUT</code> değeri döner.</td>
</tr>
<tr>
<td><strong>CREDITNOTE_STATUS.STATUS</strong></td>
<td>String</td>
<td>Belgenin durumu. Karar vermek için <code class="prettyprint">STATUS_CODE</code> alanını kullanınız.</td>
</tr>
<tr>
<td><strong>CREDITNOTE_STATUS.STATUS_CODE</strong></td>
<td>String</td>
<td>Belgenin durum kodu.</td>
</tr>
<tr>
<td><strong>CREDITNOTE_STATUS.STATUS_DESCRIPTION</strong></td>
<td>String</td>
<td>Belgenin durum açıklaması.</td>
</tr>
</tbody></table>

<h2 id="taslak-e-mustahsil-y-kleme-loadcreditnote">Taslak E-Mustahsil Yükleme (LoadCreditNote)</h2>

<ul>
<li>Taslak E-Müstahsil Makbuzu belgelerini yüklemek için kullanılan servisin clientıdır.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>APPLICATION_NAME</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Metodu kullanan uygulamanın adı verilir.</td>
</tr>
<tr>
<td><strong>COMPRESSED</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Belge sıkıştırılarak/ziplenerek gönderiliyorsa değer verilmeyebilir veya <code class="prettyprint">Y</code> olarak gönderilebilir. XML formatında sıkıştırılmadan yüklemek için <code class="prettyprint">N</code> değeri gönderilmelidir.</td>
</tr>
<tr>
<td><strong>ID</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Yüklenecek taslağın ID değeri.</td>
</tr>
<tr>
<td><strong>UUID</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Yüklenecek taslağın UUID değeri.</td>
</tr>
<tr>
<td><strong>CREDIT_NOTE_CONTENT</strong></td>
<td>Base64Binary</td>
<td><strong>Evet</strong></td>
<td>Belgenin Base64Binary olarak encode edilmiş XML veya Ziplenmiş içeriği. Eğer belgeyi ziplemeden/sıkıştırmadan göndermek istiyorsanız <code class="prettyprint">COMPRESSED</code> elemanı eklenmeli ve <code class="prettyprint">N</code> değeri gönderilmelidir.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>İstek ile istemci tarafından işlem IDsi gönderilmişse sonuç ile beraber dönülür.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda WS Fault objesi dönecektir.</td>
</tr>
</tbody></table>

<h2 id="e-mustahsil-okundu-aretleme-markcreditnote">E-Mustahsil Okundu İşaretleme (MarkCreditNote)</h2>

<ul>
<li>E-Müstahsil Makbuzu belgelerini okundu/okunmadı olarak işaretlemek için kullanılan servisin clientıdır.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>APPLICATION_NAME</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Metodu kullanan uygulamanın adı verilir.</td>
</tr>
<tr>
<td><strong>UUID</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>İşaretlenecek belgenin Evrensel Tekil Tanımlama Numarası.</td>
</tr>
<tr>
<td><strong>MARK_VALUE</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Başarı ile alındıysa <code class="prettyprint">READ</code> gönderilmeli. Daha önce alındı olarak işaretlenen bir faturayı tekrar çekmeden önce <code class="prettyprint">UNREAD</code> olarak gönderilebilir.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>İstek ile istemci tarafından işlem IDsi gönderilmişse sonuç ile beraber dönülür.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda WS Fault objesi dönecektir.</td>
</tr>
</tbody></table>

<h2 id="e-mustahsil-g-nderme-sendcreditnote">E-Mustahsil Gönderme (SendCreditNote)</h2>

<ul>
<li>E-Müstahsil Makbuzu belgesini özel entegratör sistemlerine gönderilmesini sağlayan servisin clientıdır.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>APPLICATION_NAME</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Metodu kullanan uygulamanın adı verilir.</td>
</tr>
<tr>
<td><strong>COMPRESSED</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Belge sıkıştırılarak/ziplenerek gönderiliyorsa değer verilmeyebilir veya <code class="prettyprint">Y</code> olarak gönderilebilir. XML formatında sıkıştırılmadan yüklemek için <code class="prettyprint">N</code> değeri gönderilmelidir.</td>
</tr>
<tr>
<td><strong>EMAIL_ADDRESS</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Belgenin e-posta olarak iletileceği e-posta adresi. E-Posta formatında olmak zorundadır. E-Posta gönderimini özel entegratör sisteminden yapılması isteniyorsa <code class="prettyprint">Y</code> değeri gönderilmelidir. Varsayılan değer <code class="prettyprint">N</code> dir. <code class="prettyprint">EMAIL_FLAG</code> alanı <code class="prettyprint">Y</code> gönderildiği zaman bu elaman zorunludur. <code class="prettyprint">EMAIL_FLAG</code> gönderilmemiş veya <code class="prettyprint">N</code> değeri gönderilmişse bu elaman dolu olsa dahi e-posta gönderilmeyecektir.</td>
</tr>
<tr>
<td><strong>EMAIL_FLAG</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Belge alıcısına e-posta olarak gönderilip gönderilmeyeceğinin belirlendiği parametredir. E-Posta göndermek istenilen durumda <code class="prettyprint">Y</code> değeri gönderilmelidir. Eleman gönderilmezse <code class="prettyprint">EMAIL</code> alanı dolu olsa dahi e-posta gönderilmez. *<em>DİKKAT: Eğer müşterinin özel entegratör ile e-posta gönderme hizmeti sözleşmesi yoksa ve <code class="prettyprint">Y</code> değeri gönderilirse belgenin sisteme yüklenmesine izin verilmeyecektir. Bu durumda özel entegratör ile iletişime geçerek e-posta gönderim hizmeti satın alınmalı veya  e-posta gönderiminin farklı bir kanaldan müşteri tarafından yapılması gerekmektedir. Bu durumda bu parametre gönderilmemeli veya <code class="prettyprint">N</code> olarak gönderilmelidir. *</em></td>
</tr>
<tr>
<td><strong>ID_ASSIGN_FLAG</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Belge numarasının özel entegratör ortamından atanmasını sağlamak için kullanılacak parametredir. Eğer belge numarası istemci tarafında atanmışsa parametre gönderilmemeli veya <code class="prettyprint">N</code> değeri gönderilmelidir. Belge numarasını sunucuda atamak için <code class="prettyprint">Y</code> değeri gönderilmelidir.</td>
</tr>
<tr>
<td><strong>ID_ASSIGN_PREFIX</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Belge numarasının özel entegratör ortamından atanmasını talep edildiği durumlarda atama yapılacak seri ön eki değerinin belirlendiği parametredir. <strong>Seri ön eki 3 hane alfanumerik değer içerebilir.</strong> Gönderilen seri ön eki özel entegratör platformunda tanımlı olmalıdır. Eğer <code class="prettyprint">ID_ASSIGN_FLAG=Y</code> olarak gönderilmiş ama <code class="prettyprint">ID_ASSIGN_PREFIX</code> parametresi gönderilmemişse, müşterinin özel entegratörde tanımlı varsaylılan serisi kullanılacaktır. Eğer varsayılan seri tanımlanmamışsa işlem başarısız olacak ve hata dönülecektir.</td>
</tr>
<tr>
<td><strong>SENDER_VKN</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Belgeyi gönderen firmanın VKNsi.</td>
</tr>
<tr>
<td><strong>RECEIVER_VKN</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Belgeyi alan firmanın VKNsi.</td>
</tr>
<tr>
<td><strong>ID</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Yüklenecek taslağın ID değeri.</td>
</tr>
<tr>
<td><strong>UUID</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Yüklenecek taslağın UUID değeri.</td>
</tr>
<tr>
<td><strong>CREDIT_NOTE_CONTENT</strong></td>
<td>Base64Binary</td>
<td><strong>Evet</strong></td>
<td>Belgenin Base64Binary olarak encode edilmiş XML veya Ziplenmiş içeriği. Eğer belgeyi ziplemeden/sıkıştırmadan göndermek istiyorsanız <code class="prettyprint">COMPRESSED</code> elemanı eklenmeli ve <code class="prettyprint">N</code> değeri gönderilmelidir.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>İstek ile istemci tarafından işlem IDsi gönderilmişse sonuç ile beraber dönülür.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda WS Fault objesi dönecektir.</td>
</tr>
</tbody></table>

<h2 id="e-mutabakat">E-Mutabakat</h2>

<p>e-Mutabakat webservisinin clientıdır. Aşağıdaki metodları içerir.</p>

<ul>
<li>GetReconcilationStatus</li>
<li>SendMailReconciliation</li>
<li>SendReconciliation</li>
</ul>

<h2 id="dikkat-edilecek-hususlar-e-mutabakat">Dikkat Edilecek Hususlar(E-Mutabakat)</h2>

<ol>
<li><strong>Kimlik Doğrulama (Authentication)</strong> Webservisinde bulunan <strong>Login</strong> servisi ile oturum açarak session id alınacak. Session Id sistemimiz tarafında 8 saate kadar zaman aşımına uğramadığı için kullanıcı giriş yapınca session id alıp bütün kullanım süresinde aynı session id kullanabilirsiniz.</li>
<li><strong>SendReconciliation</strong> metodu ile BA/BS ve Cari mutabakat gönderimi yapılabilmektedir. Detaylar için <strong>E-Mutabakat Gönderme</strong> bölümünü inceleyiniz.</li>
<li><strong>GetReconciliationStatus</strong> metodu ile gönderilen mutabakatların durumları sorgulanabilir. Nihai duruma erişene kadar mutabakatların durumu özel entegratör sisteminden minumum 4 saatte bir sorgulanmalıdır. <strong>Sık sorgulama yapmayınız.</strong></li>
<li><strong>Kimlik Doğrulama (Authentication)</strong> Webservisinde bulunan <strong>Logout</strong> metodu ile kullanıcı mutabakat programını kapatınca oturum kapatılabilir.</li>
</ol>

<h2 id="e-mutabakat-durumu-okuma-getreconciliationstatus">E-Mutabakat Durumu Okuma (GetReconciliationStatus)</h2>

<ul>
<li>Entegrasyon platformunda bulunan BA/BS Mutabakat ve Cari Mutabakatın durumunu sorgulamayı sağlayan servisin clientidir.</li>
<li>Sorgulamak için Mutabakatın ETTN değeri verilmelidir.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <code class="prettyprint">SESSION ID</code> değeri.</td>
</tr>
<tr>
<td><strong>APPLICATION_NAME</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Metodu kullanan uygulamanın adı verilir.</td>
</tr>
<tr>
<td><strong>ETTN</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Durumu sorgulanacak mutabakatın Evrensel Tekil Tanımlama Numarası.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>RECONCILIATION_STATUS</strong></td>
<td>Complex</td>
<td>ETTN si verilmiş mutabakatları içeren yapıdır.</td>
</tr>
<tr>
<td><strong>RECONCILIATION_STATUS.RECONCILIATION</strong></td>
<td>Complex</td>
<td>ETTN si verilmiş mutabakata dair bilgileri bulunduran yapıdır.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.TYPE</strong></td>
<td>Enum</td>
<td>Gelen Mutabakat eğer Cari Mutabakat ise <code class="prettyprint">CM</code>, BA/BS Mutabakat ise <code class="prettyprint">EM</code> olarak dönecektir.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.ETTN</strong></td>
<td>String</td>
<td>Mutabakatın Evrensel Tekil Tanımlama Numarası.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.CUSTOMER_IDENTIFIER</strong></td>
<td>String</td>
<td>Mutabakat gönderilmiş firmanın vergi kimlik nuarası.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.COMMERCIAL_NAME</strong></td>
<td>String</td>
<td>Mutabakat gönderilmiş firmanın ünvanı.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.BABS_ACCOUNTING_PERIOD</strong></td>
<td>String</td>
<td>BA/BS mutabakat tarihi. Sadece Type değeri <code class="prettyprint">EM</code> olan mutabakatlarda dönecektir. <strong>Format : 201901</strong></td>
</tr>
<tr>
<td><strong>RECONCILIATION.CM_DATE</strong></td>
<td>DateTime</td>
<td>Cari mutabakat tarihi. Sadece Type değeri <code class="prettyprint">CM</code> olan mutabakatlarda dönecektir. <strong>Format : 2019-01-01T01:01:01.001+03:00</strong></td>
</tr>
<tr>
<td><strong>RECONCILIATION.CM_AMOUNT_TYPE</strong></td>
<td>Enum</td>
<td>Cari mutabakat durumu. Alacak için <code class="prettyprint">A</code> Borç için <code class="prettyprint">B</code> sonucu dönecektir. Sadece Type değeri <code class="prettyprint">CM</code> olan mutabakatlarda dönecektir.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.STATUS</strong></td>
<td>String</td>
<td>ETTN si verilmiş Mutabakatın durumu dönmektedir.</td>
</tr>
<tr>
<td><strong>RECONCILIATION.CREATE_DATE</strong></td>
<td>DateTime</td>
<td>Mutabakatın üretilme tarihi. <strong>Format : 2019-01-01T01:01:01.001+03:00</strong></td>
</tr>
</tbody></table>

<h2 id="e-mutabakat-maili-g-nderme-sendmailreconciliation">E-Mutabakat Maili Gönderme (SendMailReconciliation)</h2>

<ul>
<li>Mutabakat mükellefine mail yollayan servisin clientidir.</li>
<li>Mutabakatın UUID değeri verilmesi gerekir.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <code class="prettyprint">SESSION ID</code> değeri.</td>
</tr>
<tr>
<td><strong>APPLICATION_NAME</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Metodu kullanan uygulamanın adı verilir.</td>
</tr>
<tr>
<td><strong>UUID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Mail yollanacak mutabakatın UUID si.</td>
</tr>
</tbody></table>

<p><br><br></p>

<h2 id="e-mutabakat-g-nderme-sendreconciliation">E-Mutabakat Gönderme (SendReconciliation)</h2>

<ul>
<li>Özel entegratör sistemi üzerinden toplu BA/BS ve Cari mutabakat gönderimini sağlayan servisin clientidir.</li>
<li><code class="prettyprint">BA/BS Mutabakat</code> veya <code class="prettyprint">Cari Mutabakat</code> göndermek için kullanılır. </li>
<li><code class="prettyprint">RECONCILIATION_TYPE</code> parametresinin aldığı değerlere göre Cari ve BA/BS Mutabakat arası ayrım yapılır.</li>
<li>BA/BS Mutabakatlar için <code class="prettyprint">BABS_ACCOUNTING_PERIOD</code>, <code class="prettyprint">BA_DOCUMENT_AMOUNT</code>, <code class="prettyprint">BA_DOCUMENT_COUNT</code>, <code class="prettyprint">BS_DOCUMENT_AMOUNT</code> ve <code class="prettyprint">BS_DOCUMENT_COUNT</code> kullanılır. Cari Mutabakatlar için <code class="prettyprint">CM_AMOUNT</code>, <code class="prettyprint">CM_AMOUNT_TYPE</code> ve <code class="prettyprint">CM_DATE</code> kullanılır. Kalan parametreler iki seçenek için ortaktır.</li>
</ul>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>APPLICATION_NAME</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Metodu kullanan uygulamanın adı verilir.</td>
</tr>
<tr>
<td><strong>BABS_ACCOUNTING_PERIOD</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Mutabakat dönemi. <strong>RECONCILIATION_TYPE</strong> <code class="prettyprint">EM</code> girilmiş mutabakatlar için zorunludur.<strong>Format: 201806</strong></td>
</tr>
<tr>
<td><strong>BA_DOCUMENT_AMOUNT</strong></td>
<td>Decimal</td>
<td><strong>Evet</strong></td>
<td>BA mutabakat belgelerinin toplam tutarı. <strong>RECONCILIATION_TYPE</strong> <code class="prettyprint">EM</code> girilmiş mutabakatlar için zorunludur.</td>
</tr>
<tr>
<td><strong>BA_DOCUMENT_COUNT</strong></td>
<td>Integer</td>
<td><strong>Evet</strong></td>
<td>BA mutabakat belge adeti.<strong>RECONCILIATION_TYPE</strong> <code class="prettyprint">EM</code> girilmiş mutabakatlar için zorunludur.</td>
</tr>
<tr>
<td><strong>BS_DOCUMENT_AMOUNT</strong></td>
<td>Decimal</td>
<td><strong>Evet</strong></td>
<td>BS mutabakat belgelerinin toplam tutarı. <strong>RECONCILIATION_TYPE</strong> <code class="prettyprint">EM</code> girilmiş mutabakatlar için zorunludur.</td>
</tr>
<tr>
<td><strong>BS_DOCUMENT_COUNT</strong></td>
<td>Integer</td>
<td><strong>Evet</strong></td>
<td>BS mutabakat belge adeti.<strong>RECONCILIATION_TYPE</strong> <code class="prettyprint">EM</code> girilmiş mutabakatlar için zorunludur.</td>
</tr>
<tr>
<td><strong>CM_AMOUNT</strong></td>
<td>Decimal</td>
<td><strong>Evet</strong></td>
<td>Cari mutabakat alacak ve borç toplan tutarı. <strong>RECONCILIATION_TYPE</strong> <code class="prettyprint">CM</code> girilmiş mutabakatlar için zorunludur.</td>
</tr>
<tr>
<td><strong>CM_AMOUNT_TYPE</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Cari mutabakat durumu. Alacak için <code class="prettyprint">A</code> Borç için <code class="prettyprint">B</code> gönderilmelidir. <strong>RECONCILIATION_TYPE</strong> <code class="prettyprint">CM</code> girilmiş mutabakatlar için zorunludur.</td>
</tr>
<tr>
<td><strong>CM_DATE</strong></td>
<td>Date</td>
<td><strong>Evet</strong></td>
<td>Mutabakat tarihi. <strong>RECONCILIATION_TYPE</strong> <code class="prettyprint">CM</code> girilmiş mutabakatlar için zorunludur.<strong>Format: 2019-01-01</strong></td>
</tr>
<tr>
<td><strong>COMMERCIAL_NAME</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Mutabakat gönderilecek firmanın ünvanı.</td>
</tr>
<tr>
<td><strong>CURRENCY_CODE</strong></td>
<td>Enum</td>
<td><strong>Evet</strong></td>
<td>Mutabakattaki tutarın para birimi. <code class="prettyprint">TRY</code>, <code class="prettyprint">USD</code>, <code class="prettyprint">EUR</code>, <code class="prettyprint">GBP</code> ve <code class="prettyprint">CAD</code> gönderilebilir.</td>
</tr>
<tr>
<td><strong>CUSTOMER_ADDRESS</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Mutabakat gönderilecek firmanın adresi.</td>
</tr>
<tr>
<td><strong>CUSTOMER_IDENTIFIER</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Mutabakat gönderilecek firmanın vergi kimlik nuarası. VKN doğrulaması yapılmadığı için gönderilen verinin doğruluğu kullanıcıya aittir.</td>
</tr>
<tr>
<td><strong>EMAIL</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Mutabakat gönderilecek firmanın e-posta adresi. Format kontrolu yapılır ancak doğruluğu kullanıcıya aittir. <strong>Format: muhasebe@firma.com.tr</strong></td>
</tr>
<tr>
<td><strong>FAX_NO</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Mutabakat gönderilecek firmanın faks numarası. <strong>Önerilen Format: 0(212) 100 00 00</strong></td>
</tr>
<tr>
<td><strong>NOTE</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Mutabakata eklenecek ek açıklamalar.</td>
</tr>
<tr>
<td><strong>TAX_OFFICE</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Mutabakat gönderilecek firmanın vergi dairesi.</td>
</tr>
<tr>
<td><strong>PHONE_NO</strong></td>
<td>String</td>
<td><strong>Hayır</strong></td>
<td>Mutabakat gönderilecek firmanın telefon numarası. <strong>Önerilen Format: 0(212) 100 00 00</strong></td>
</tr>
<tr>
<td><strong>RECONCILIATION_TYPE</strong></td>
<td>Enum</td>
<td><strong>Evet</strong></td>
<td>Mutabakatın türü. BA/BS Mutabakatlar için <code class="prettyprint">EM</code>, Cari Mutabakatlar için <code class="prettyprint">CM</code> gönderilir.</td>
</tr>
<tr>
<td><strong>UUID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Mutabakata atanacak Evrensel Tekil Tanımlama Numarası.</td>
</tr>
</tbody></table>

<p><br><br></p>

<p>Servisten dönen parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>İstek ile istemci tarafından işlem IDsi gönderilmişse sonuç ile beraber dönülür.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda WS Fault objesi dönecektir.</td>
</tr>
</tbody></table>

<h2 id="e-defter-saklama-servisi">E-Defter Saklama Servisi</h2>

<p>Mükellefler tarafında hazırlanan E-Defter dosyalarının özel entegratör sisteminde saklanmasını sağlayan servistir. Aşağıdaki metodlari içerir.</p>

<ul>
<li>E-Defter Yedekleme (ArchiveELedger)</li>
<li>E-Defter Çekme (GetELeger)</li>
<li>E-Defter İptal Etme (CancelELedger)</li>
</ul>

<h2 id="dikkat-edilecek-hususlar-e-defter-saklama">Dikkat Edilecek Hususlar(E-Defter Saklama)</h2>

<ol>
<li>Proxy servisinde bulunan <strong>Login</strong> servisi ile oturum açarak session id alınacaktır.</li>
<li><strong>ArchiveELedger</strong> metodu ile bir döneme ait defter yedekleme yapılmaktadır. Bir dönem en fazla bir defa yedeklenebilir.</li>
<li><strong>GetELedger</strong> metodu ile daha önce yedeklenen bir döneme ait e-defterleri tekrar müşteri bilgisayarına çekmek için kullanılabilir.</li>
<li><strong>CancelELedger</strong> metodu ile yedeklendikten sonra iptal edilmiş e-defterlerin iptali sağlanabilir.</li>
<li>Proxy servisinde bulunan <strong>Logout</strong> metodu ile oturum kapatılabilir.</li>
</ol>

<h2 id="e-defter-yedekleme-archiveeledger">E-Defter Yedekleme (ArchiveELedger)</h2>

<ul>
<li>Bir döneme ait bütün defterlerin yüklenmesini sağlayan metotdur.</li>
<li>Döneme için bütün parçalara ait XML dosyaları içermeledir.</li>
</ul>

<h3 id="stek-parametreleri">İstek Parametreleri</h3>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri verilmelidir.</td>
</tr>
<tr>
<td><strong>FILENAME</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Yüklenecek dosyanın adı. (Format: VKN-DONEM-SUBE.zip : 4840847211-201911-0000.zip). Şubesiz yapıda bir firma ise şube numarası 0000 olarak gönderilmelidir.</td>
</tr>
<tr>
<td><strong>CONTENT</strong></td>
<td>Base64Binary</td>
<td><strong>Evet</strong></td>
<td>Bir dönemde ki bütün parçalara ait XML dosyalarının (Yevmiye, Kebir, Yevmiye Beratı, Kebir Beratı, GIB İmzalı Yevmiye Beratı, GIB İmzalı Kebir Beratı, Defter Raporu) sıkıştırılmış (zip) Base64Binary olarak encode edilmiş değeri.</td>
</tr>
</tbody></table>

<h3 id="ba-ar-l-sonu-nesnesi">Başarılı Sonuç Nesnesi</h3>

<p>Webservis işlemi başarılı olması durumunda response objesi içerisinde  <code class="prettyprint">REQUEST_RETURN</code> tipinde sonuç dönülecektir.</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN</strong></td>
<td>ComplexType</td>
<td>Başarılı sonuç nesnesi</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda <code class="prettyprint">REQUEST_RETURN</code> objesi dönülmez. <code class="prettyprint">ERROR_TYPE</code> objesi dönülecektir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>İstek ile istemci tarafından işlem IDsi gönderilmişse sonuç ile beraber dönülür.</td>
</tr>
</tbody></table>

<h3 id="hata-sonu-nesnesi">Hata Sonuç Nesnesi</h3>

<p>Webservis metodunda hata oluşması durumunda response objesi içerisinde <code class="prettyprint">ERROR_TYPE</code> tipinde sonuç dönülecektir.</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>ERROR_TYPE</strong></td>
<td>ComplexType</td>
<td>Başarısız sonuç nesnesi</td>
</tr>
<tr>
<td><strong>ERROR_TYPE.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>ERROR_TYPE.ERROR_CODE</strong></td>
<td>String</td>
<td>Başarısız işlemlerde <code class="prettyprint">0</code> değeri döner.</td>
</tr>
<tr>
<td><strong>ERROR_TYPE.ERROR_SHORT_DESC</strong></td>
<td>String</td>
<td>Hatanın kısa açıklaması.</td>
</tr>
</tbody></table>

<h2 id="e-defter-ekme-geteledger">E-Defter Çekme (GetELedger)</h2>

<ul>
<li>Daha önce yüklenen E-Defter verisini tekrar müşteri ortamına çekilmesini sağlayan servistir.</li>
<li>Döneme ait bütün defterler sıkışıtırılmış formatta dönülecektir.</li>
</ul>

<h3 id="stek-parametreleri">İstek Parametreleri</h3>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri</td>
</tr>
<tr>
<td><strong>DONEM</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Yüklenen e-defter dönemi YYYYAA formatında (Ekim 2019 için 201911)</td>
</tr>
<tr>
<td><strong>VKN</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Yüklenen e-defterin sahibi firmanın vergi kimlik numarası. 10-11 hane numerik değer.</td>
</tr>
</tbody></table>

<h3 id="ba-ar-l-sonu-nesnesi">Başarılı Sonuç Nesnesi</h3>

<p>Webservis işlemi başarılı olması durumunda response objesi içerisinde <code class="prettyprint">GEN_ARCHIVE_DOC</code> ve <code class="prettyprint">REQUEST_RETURN</code> tipinde sonuç dönülecektir.</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>GEN_ARCHIVE_DOC</strong></td>
<td>Base64Binary</td>
<td>Döneme ait e-defterleri içeren sıkıştırılmış (zip) Base64Binary encode edilmiş dosya değeri. Sıkışıtırılmış (zip) formatında dönüldüğü gözönünde bulundurularak işlem yapılmalıdır.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN</strong></td>
<td>ComplexType</td>
<td>Başarılı sonuç nesnesi</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>İstek ile istemci tarafından işlem IDsi gönderilmişse sonuç ile beraber dönülür.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda WS Fault objesi dönecektir.</td>
</tr>
</tbody></table>

<h3 id="hata-sonu-nesnesi">Hata Sonuç Nesnesi</h3>

<p>Webservis metodunda hata oluşması durumunda response objesi içerisinde <code class="prettyprint">ERROR_TYPE</code> tipinde sonuç dönülecektir.</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>ERROR_TYPE</strong></td>
<td>ComplexType</td>
<td>Başarısız sonuç nesnesi</td>
</tr>
<tr>
<td><strong>ERROR_TYPE.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>ERROR_TYPE.ERROR_CODE</strong></td>
<td>String</td>
<td>Başarısız işlemlerde <code class="prettyprint">-1</code> değeri döner.</td>
</tr>
<tr>
<td><strong>ERROR_TYPE.ERROR_SHORT_DESC</strong></td>
<td>String</td>
<td>Hatanın kısa açıklaması.</td>
</tr>
</tbody></table>

<h2 id="e-defter-ptal-canceleledger">E-Defter İptal (CancelELedger)</h2>

<ul>
<li>E-Defter döneminin iptal edilmesini sağlayan servistir.</li>
<li>İptal edilen dönem tekrar yedeklenmelidir.</li>
</ul>

<h3 id="stek-parametreleri">İstek Parametreleri</h3>

<p>Servise gönderilmesi gereken parametreler şu şekildedir:</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Zorunluluk</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>SESSION_ID</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Login metodundan alınmış olan aktif <strong>SESSION_ID</strong> değeri</td>
</tr>
<tr>
<td><strong>DONEM</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Yüklenen e-defter dönemi YYYYAA formatında (Ekim 2019 için 201911)</td>
</tr>
<tr>
<td><strong>VKN</strong></td>
<td>String</td>
<td><strong>Evet</strong></td>
<td>Yüklenen e-defterin sahibi firmanın vergi kimlik numarası. 10-11 hane numerik değer.</td>
</tr>
</tbody></table>

<h3 id="ba-ar-l-sonu-nesnesi">Başarılı Sonuç Nesnesi</h3>

<p>Webservis işlemi başarılı olması durumunda response objesi içerisinde <code class="prettyprint">REQUEST_RETURN</code> tipinde sonuç dönülecektir.</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>REQUEST_RETURN</strong></td>
<td>ComplexType</td>
<td>Başarılı sonuç nesnesi</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.CLIENT_TXN_ID</strong></td>
<td>String</td>
<td>İstek ile istemci tarafından işlem IDsi gönderilmişse sonuç ile beraber dönülür.</td>
</tr>
<tr>
<td><strong>REQUEST_RETURN.RETURN_CODE</strong></td>
<td>String</td>
<td>Başarılı durumlarda <code class="prettyprint">0</code> değeri döner. Başarısız olduğunda WS Fault objesi dönecektir.</td>
</tr>
</tbody></table>

<h3 id="hata-sonu-nesnesi">Hata Sonuç Nesnesi</h3>

<p>Webservis metodunda hata oluşması durumunda response objesi içerisinde <code class="prettyprint">ERROR_TYPE</code> tipinde sonuç dönülecektir.</p>

<table><thead>
<tr>
<th>Parametre</th>
<th>Tip</th>
<th>Açıklama</th>
</tr>
</thead><tbody>
<tr>
<td><strong>ERROR_TYPE</strong></td>
<td>ComplexType</td>
<td>Başarısız sonuç nesnesi</td>
</tr>
<tr>
<td><strong>ERROR_TYPE.INTL_TXN_ID</strong></td>
<td>String</td>
<td>Sunucuda işlemin gerçekleştirildiği transaction IDsi. Bu ID istemci tarafında kaydedilerek oluşabilecek hatalarda referans olarak destek ekibine iletilebilir.</td>
</tr>
<tr>
<td><strong>ERROR_TYPE.ERROR_CODE</strong></td>
<td>String</td>
<td>Başarısız işlemlerde <code class="prettyprint">0</code> değeri döner.</td>
</tr>
<tr>
<td><strong>ERROR_TYPE.ERROR_SHORT_DESC</strong></td>
<td>String</td>
<td>Hatanın kısa açıklaması.</td>
</tr>
</tbody></table>

          <h1 id="izibiz-integration">IZIBIZ Integration</h1>

<p>The following information will be useful when designing your application:</p>

<ol>
<li> Invoice should be prepared in UBL-TR XML format.</li>
<li> Every invoice must be assigned 16 digit ID in AAAYYYY999999999 format.<br>
<strong>AAA</strong> - First 3 digits is the alphanumeric unit code. <br>
<strong>YYYY</strong> - the next four digits is the year of the invoice issue date <br>
<strong>999999999</strong> - the remaining nine digits means the successive number starting from 1 every year.<br></li>
<li><strong>Login</strong> method on the <strong>Authentication</strong> service will be used to autheticate and the session id will be send with every request.</li>
<li><strong>GetGibUserList</strong> method on the <strong>Authentication</strong> service returns list of firms which registered to TRA e-invoicing system. The list is updated every 2 hours from TRA.</li>
<li><strong>SendInvoice</strong> method will be used to to send outgoing e-Invoices.</li>
<li><strong>GetInvoice</strong> method will be used to retrieve incoming e-invoices to the client side. Maximum 100 new invoices can be returned with XML content. If there are 100 invoices in the returned list, GetInvoice method should be called again to check if there are any other invoices. If there are fewer than 100 invoices in the returned list, no further inquiry is required. If invoice is made with a timer, a service should be called for at least 15 minutes.</li>
<li><strong>GetInvoiceStatus</strong> method will be used to query the status of incoming / outgoing e-invoices. The status of the invoice must be queried from the service provider every 4 hours until it reaches the final state. Do not question frequently.</li>
<li><strong>MarkInvoice</strong> method should be executed for every invoice received successfully with GetInvoice method to mark it as read.</li>
<li><strong>SendInvoiceResponseWithServerSign</strong> method can be used to send an acceptance or rejection response for a commercial invoice. A commercial invoice can be accepted or rejected within 8 business days. Acceptance / rejection should be prevented after 8 days. For basic invoices, sending responses should be restricted. A maximum of 1 response can be sent electronically to a commercial invoice. Therefore, if a successful response (accept / reject) has been sent to an invoice, sending a different response should be restricted.</li>
<li><strong>Logout</strong> method on the <strong>Authentication</strong> service can be used close an active session.</li>
</ol>

          <h1 id="z-b-z-e-defter-uygulamas">İZİBİZ E-Defter Uygulaması</h1>

<h2 id="uygulaman-n-zellikleri">Uygulamanın Özellikleri</h2>

<ul>
<li>Platform bağımsız özelliği ile veritabanına erişerek doğrudan veya CSV formatında veri aktarımı desteklenmektedir</li>
<li>Yaygın kullanılan muhasebe sistemleri ile tam uyumludur. Veritabanına erişilebilen bütün senaryoları desteklemektedir</li>
<li>Yevmiye ve sıra numaralandırmasını ERP&#39;den veya E-Defter programından yapabilme</li>
<li>Kullanıcı yönetim ve yetkilendirme modülü ile sınırsız kullanıcı oluşturma ve yetkilendirme</li>
<li>Defter Oluşturma</li>
<li>Defter İmzalama</li>
<li>Berat Oluşturma</li>
<li>Berat İmzalama</li>
<li>GIB’e Otomatik Berat Yükleme</li>
<li>GIB’den Otomatik Berat İndirme</li>
<li>Birden fazla firmanın e-Defter ihtiyacını tek kurulum ile yönetebilme</li>
<li>Organizasyon yönetimi ile çoklu firma ve çoklu şube yönetimi desteklenmektedir</li>
<li>Kolay arayüzü ve yüksek performans sayesinde hızlı e-defter üretme ve takip</li>
<li>Doğrudan GİB entegrasyonu sayesinde program içerisinden online berat yükleme ve indirme</li>
<li>Oluşturulan E-Defterlerin İzibiz sunucularında saklama özelliği</li>
<li>Mali mühürün ortak bir sunucuda kurulumu yapılarak bir çok bilgisayarda kullanılması</li>
<li>İmzalama yönteminde mali mühür yanında zaman damgası kullanımı tercih ederek verinin değişmezliğinin sağlanması</li>
<li>Dönemde tarih aralığına göre defter oluşturma ve boyuta göre parçalama özelliği</li>
<li>Kullanıcı hatalarını önleyen arayüzü sayesinde iş akışına göre butonların aktif olması</li>
<li>Entegrasyon kaynağından aktarılan verilerin GİB standartlarına uygunluk kontrolü ve hatalı kayıt bazında kullanıcının uyarılması</li>
</ul>

<h2 id="rnek-verideseni">Örnek Verideseni</h2>

<p>İZİBİZ E-Defter uygulaması platform bağımsızdır. Bundan dolayı verilerin kaynak ortamda programın beklediği formatta hazırlanması beklemektedir. Beklenen veri desen hakkında aşağıda detaylı bilgi paylaşılmıştır.</p>

<p>Hazırlanan veriler <strong>CSV formatında</strong> olarak veya <strong>veritabanında View (Görünüm)</strong> hazırlanarak programa aktarılabilir.</p>

<p><strong>Örnek Dosya İndir:</strong> <a href="/resource/edefter/verideseni_ornek.csv" target="_blank">
                            <img src="/images/csv-icon.png" height="40" width="35"/>
                        </a>
<br><br></p>

<table><thead>
<tr>
<th><strong>Alan Adı</strong></th>
<th><strong>Açıklama</strong></th>
</tr>
</thead><tbody>
<tr>
<td><strong>detailref</strong></td>
<td>Detay satır referansı</td>
</tr>
<tr>
<td><strong>entryref</strong></td>
<td>Bu alan muhasebe fişlerini gruplamak için kullandığımız bir alandır, bulunması zorunludur.</td>
</tr>
<tr>
<td><strong>Fişler</strong></td>
<td>hesaplanırken bu referans numarasına göre gruplanmaktadır. Bu alana, eğer ERP’de muhasebe fiş satır referans numaraları varsa onların yazılması gerekmekte. Eğer yoksa yevmiye madde numarası yani linenumbercounter yazılması gerekmekte.</td>
</tr>
<tr>
<td><strong>linenumber</strong></td>
<td>Yevmiye madde numarası haricinde dönem başında 1’den başlayacak ve arada boşluk olmaksızın ardışık olacak şekilde yevmiye madde satır numarası</td>
</tr>
<tr>
<td><strong>linenumbercounter</strong></td>
<td>Yevmiye madde no</td>
</tr>
<tr>
<td><strong>accmainid</strong></td>
<td>Kebir kodu (muhasebe kodu ilk 3 hane)</td>
</tr>
<tr>
<td><strong>accmainiddesc</strong></td>
<td>Kebir kodu (muhasebe kodu ilk 3 hane) açıklaması</td>
</tr>
<tr>
<td><strong>accsubid</strong></td>
<td>Muhasebe kodu</td>
</tr>
<tr>
<td><strong>accsubdesc</strong></td>
<td>Muhasebe kod açıklaması</td>
</tr>
<tr>
<td><strong>amount</strong></td>
<td>Tutar (negatif değer olmamalı)</td>
</tr>
<tr>
<td><strong>debitcreditcode</strong></td>
<td>Borç ise D, Alacak ise C</td>
</tr>
<tr>
<td><strong>postingdate</strong></td>
<td>Muhasebe fiş tarihi</td>
</tr>
<tr>
<td><strong>documenttype</strong></td>
<td><strong>invoice:</strong> Fatura <strong>check:</strong> Çek  <strong>voucher:</strong> Senet  ** other:** other : Yukarıda sayılanların dışında varolan belgeler için <strong>“other”</strong> belge türü kullanılır ve bununda açıklaması (documenttypedescription) alanında yapılır.  Belgeler hakkında detaylı bilgi için <strong>Önemli Hususlar</strong> başlığını inceleyebilirsiniz.</td>
</tr>
<tr>
<td><strong>documenttypedesc</strong></td>
<td><em>Doküman tipinin other olması durumunda bazı örnekler;</em> <strong>Paymentmethod Banka;</strong> Gelen Havaleler, Gönderilen Havaleler <strong>Paymentmethod Nakit;</strong> CH Tahsilat, CH Ödeme, Bankaya Yatırılan, Bankadan Çekilen, Gider Pusulası, Verilen Serbest Meslek Makbuzu, Alınan Serbest Meslek Makbuzu <strong>Paymentmethod Teminat Mektubu;</strong> Teminat Girişi,Teminat Çıkışı</td>
</tr>
<tr>
<td><strong>documentnumber</strong></td>
<td>İlişkili belgenin numarası (Örn: Fatura numarası)</td>
</tr>
<tr>
<td><strong>documentreference</strong></td>
<td>Muhasebe fiş referans numarası, kullanılan sistemde böyle bir numara yoksa yevmiye no</td>
</tr>
<tr>
<td><strong>entrynumbercounter</strong></td>
<td>Yevmiye madde no</td>
</tr>
<tr>
<td><strong>documentdate</strong></td>
<td>İlişkili belgenin tarihi (Örn: Fatura tarihi) yyyy-aa-gg formatında</td>
</tr>
<tr>
<td><strong>paymentmethod</strong></td>
<td>Çek, Senet, Nakit, Banka, Teminat Mektubu ya da boş</td>
</tr>
<tr>
<td><strong>detailcomment</strong></td>
<td>Muhasebe fişi satır açıklaması</td>
</tr>
<tr>
<td><strong>erpno</strong></td>
<td>Kullanılan sistemde firmaları birbirinden ayırt eden firma numarası, yoksa 001</td>
</tr>
<tr>
<td><strong>divisionno</strong></td>
<td>Kullanılan sistemde işyerlerini birbirinden ayıran işyeri numarası, kağıt ortamında basılan defterlerde ayrı olarak basılıyorsa e-defter’de farklı bir işyeri numarasına sahip olmalı yoksa 0</td>
</tr>
<tr>
<td><strong>enteredby</strong></td>
<td>Muhasebe fişini giren kişinin ad soyad ilk harfi yada açık halde adı soyadı</td>
</tr>
<tr>
<td><strong>entereddate</strong></td>
<td>Muhasebe fişi kayıt tarihi</td>
</tr>
<tr>
<td><strong>entrynumber</strong></td>
<td>Muhasebe fiş numarası, kullanılan sistemde böyle bir numara yoksa yevmiye no</td>
</tr>
<tr>
<td><strong>entrycomment</strong></td>
<td>Muhasebe fişi açıklaması</td>
</tr>
</tbody></table>

<aside class="warning">
  Platform bağımsız e-defter uygulaması olduğumuz için Gelir İdaresi Başkanlığına gönderilecek verilerin hazırlanması mükellefin sorumluluğundadır.
Muhasebe programında GİB’in belirlediği doküman tipleri haricinde belge türü olması durumunda, bu belgelerin hangi belge türü ile ilişkilendirileceği konusunda mali müşavirinizden bilgi alabilirsiniz.
</aside>

<h2 id="nemli-hususlar">Önemli Hususlar</h2>

<p>E-defter uygulamasına geçen mükelleflerin e-defteri oluşturacak kayıtların oluşturulması esnasında dikkat etmesi gereken konuları, e-defter belge tiplerinin neler olduğunu, e-defter alanlarının nasıl doldurulması gerektiğine değineceğiz.
Elektronik defter tutanlar, elektronik defterlerini oluşturdukları ve muhafaza ettikleri bilgi işlem sistemlerinin haczedilmesi veya bu sistemlere yetkili mercilerce el konulması halinde, durumu en geç üç iş günü içerisinde Başkanlık’a bildirmek zorundadırlar.</p>

<aside class="notice">DİKKAT: Elektronik defter uygulamasında her bir belgeye ait bilgilerin, tek bir yevmiye kaydında gösterilmesi esastır.
</aside>

<h3 id="belge-tipi">Belge Tipi</h3>

<p>Muhasebe kaydına esas teşkil eden işlem bir belgeye dayanıyorsa, mutlaka belge tipi alanının kullanılması gerekmektedir. Ancak muhasebe kaydına esas teşkil eden işlem bir belgeye dayanmıyorsa belge tipi alanı kullanılmamalıdır. Dolayısıyla muhasebe kaydına esas teşkil eden işlem bir belgeye dayanmıyorsa, belge türü, tarihi veya numarası gibi bilgiler verilemez. Örneğin, açılış-kapanış işlemleri belgeye dayalı olmayabilir.</p>

<p>Gelir İdaresi Başkanlığının yayımlandığı Yevmiye Defteri kılavuzunda aşağıdaki sekiz belge tipi tanımlanmıştır. Tabloda sayılan yedi belge tipinin dışında ki belgeler için <strong>“Diğer”</strong> belge türü kullanılır.</p>

<table><thead>
<tr>
<th><strong>Belge Tipi</strong></th>
<th><strong>Esas Belge</strong></th>
</tr>
</thead><tbody>
<tr>
<td><strong>invoice</strong></td>
<td>Fatura</td>
</tr>
<tr>
<td><strong>check</strong></td>
<td>Çek</td>
</tr>
<tr>
<td><strong>voucher</strong></td>
<td>Senet</td>
</tr>
<tr>
<td><strong>receipt</strong></td>
<td>Makbuz</td>
</tr>
<tr>
<td><strong>shipment</strong></td>
<td>Navlun</td>
</tr>
<tr>
<td><strong>order-vendor</strong></td>
<td>Satıcı Sipariş Belgesi</td>
</tr>
<tr>
<td><strong>order-customer</strong></td>
<td>Müşteri Sipariş Belgesi</td>
</tr>
<tr>
<td><strong>other</strong></td>
<td>Diğer</td>
</tr>
</tbody></table>

<h3 id="perakende-sat-fi-i">Perakende Satışı Fişi</h3>

<p>Perakende satış fişi sayılan 7 belge içerisinde olmadığı için belge tipi diğer olarak, belge açıklaması da perakende satış fişi olarak seçilmelidir.</p>

<h3 id="banka-lemleri">Banka İşlemleri</h3>

<p>Bilindiği üzere bankaya ait işlemlerde muhasebe kaydına esas belge bankadan verilen dekont olmaktadır. Dekontların e-Defter uygulamasında belge tipi <strong>“Diğer”</strong> ve belge açıklaması <strong>“dekont”</strong> olarak kaydı yapılır ve dekontun numara ve tarihinin de girilmesi zorunludur. Ancak dekont üzerinde belge numarası-tarihi yok ise, kullanılan muhasebe programının söz konusu işleme vermiş olduğu tarih ve numara, belge numarası ve tarihi olarak yazılabilir.</p>

<p>Eğer bankaya ait işlemler dekont bazında tek tek muhasebeleştirilemiyorsa, bu banka işlemleri günlük olarak, banka banka ayrıştırmak koşuluyla, her bir bankadan yapılan işlemler birer muhasebe fişinde işlenebilir. e-Defterde bu kayda esas belge olarak muhasebe fişi gösterilebilir. Bu muhasebe fişi e-defter uygulamasında belge tipi <strong>“Diğer”</strong> ve belge açıklaması <strong>“Muhasebe Fişi”</strong> olarak kaydı yapılır ve fişin numarası ve tarihi girilir.</p>

<h3 id="masraf-listeleri">Masraf Listeleri</h3>

<p>Gün içinde işletmenin ya da personelin yapmış olduğu giderlere ilişkin alınmış belgeler teknik kılavuzlarda sayılan belgelerden biriyse mutlaka belge tipi kılavuzda belirtildiği gibi olmalıdır. Örneğin, personelin yapmış olduğu giderler arasında belge olarak fatura varsa, bu fatura ayrı bir yevmiye kaydında belge türü <strong>“invoice”</strong> yani fatura olarak fatura belge tarih-numarası da yazılmak şartıyla kaydedilmelidir. Eğer yapılan giderle ilgili belge tipi, tablo 1’de sayılan ilk yedi belge tipinden biri değil ise bir masraf formu oluşturulup eDefter uygulamasında belge tipi <strong>“Diğer”</strong> ve belge açıklaması <strong>“masraf formu”</strong> olarak kaydı yapılır. Ayrıca bu masraf formunun numarası ve tarihinin de girilmesi zorunludur. Bu masraf formlarında matbu bir numara ve tarih olmadığı için, oluşturulacak her bir form için müteselsil bir numara ve formun oluşturulduğu günün tarihi üzerine yazılmalıdır. Bu masraf formunda yapılan giderlere ait belgelerin detayları yer almak zorundadır. Ayrıca bu masraf formu firma kaşesi ve imzasıyla matbu olarak ya da elektronik imza/mali mühür ile elektronik ortamda muhafaza edilmek zorundadır. Elektronik ortamda tutulacak belgelerin görüntülenebilir ve doğrulanabilir şekilde muhafaza ve ibraz edilmesinden, diğer matbu belgeler de olduğu gibi, mükellef sorumludur.</p>

<h3 id="z-raporu">Z raporu</h3>

<p>Gün sonunda her bir yazar kasadan alınan Z raporu, muhasebe kaydında belge tipi <strong>“Diğer”</strong> ve belge açıklaması <strong>“Z Raporu”</strong> olarak kaydı yapılır. Ayrıca bu Z Raporu’nun numarası ve tarihinin de girilmesi zorunludur. Ancak gün içinde yapılan satışlarda Z Raporunun üzerinde yer alan ödeme yöntemlerine (nakit, kredi kartı, vb.) göre ayrıştırılmalıdır. Ödeme yöntemine isabet edecek KDV tutarlarının da ayrıştırılması ve her bir ödeme yönteminin farklı yevmiye maddelerinde gösterilmesi gerekmektedir.</p>

<h3 id="ek-bordrosu">Çek Bordrosu</h3>

<p>e-Defter uygulamasında kılavuzda sayılan tüm belge tiplerinde olduğu gibi, her bir çek belgesinin de ayrı yevmiye maddelerine kaydedilmesi esastır. Ancak çek bordrosuyla da kaydı mümkün olduğundan e-Defter uygulamasında da bu bordolar üzerinden, aynı alıcı veya satıcıya ait olmak şartıyla, birden fazla çek aynı yevmiye maddesinde kaydedilebilir. Ayrıca muhasebe kaydında belge tipi <strong>“Diğer”</strong> ve belge açıklaması <strong>“Çek bordrosu”</strong> olarak kaydı yapılır ve bu çek bordrosunun numarası ve tarihinin girilmesi zorunludur. Bu çek bordrosunda matbu bir numara ve tarih olmadığı için, oluşturulacak her bir bordro için müteselsil bir numara verilmeli ve bordronun oluşturulduğu günün tarihi üzerine yazılmalıdır. Her bir çek bordrosunda, çeklerin detayları yer almak zorundadır. Bu çek bordrosu firma kaşesi ve imzasıyla matbu olarak ya da elektronik imza/mali mühür ile elektronik ortamda muhafaza edilmek zorundadır. Elektronik ortamda tutulacak belgelerin görüntülenebilir ve doğrulanabilir şekilde muhafaza ve ibraz edilmesinden, diğer matbu belgeler de olduğu gibi, mükellef sorumludur.</p>

<h3 id="senet-bordrosu">Senet Bordrosu</h3>

<p>e-Defter uygulamasında kılavuzda sayılan tüm belge türlerinde olduğu gibi, her bir senet belgesinin de ayrı yevmiye maddelerine kaydedilmesi esastır. Ancak senet bordrosuyla da kaydı mümkün olduğundan e-Defter uygulamasında da bu bordolar üzerinden, aynı alıcı veya satıcıya ait olmak şartıyla, birden fazla senet aynı yevmiye maddesinde kaydedilebilir. Ayrıca muhasebe kaydında belge tipi <strong>“Diğer”</strong> ve belge açıklaması <strong>“Senet bordrosu”</strong> olarak kaydı yapılır ve bu senet bordrosunun numarası ve tarihinin girilmesi zorunludur. Bu senet bordrosunda matbu bir numara ve tarih olmadığı için, oluşturulacak her bir bordro için müteselsil bir numara verilmeli ve bordronun oluşturulduğu günün tarihi üzerine yazılmalıdır. Senet bordrolarında, senetlerin detayları yer almak zorundadır. Bu senet bordrosu firma kaşesi ve imzasıyla matbu olarak ya da elektronik imza/mali mühür ile elektronik ortamda muhafaza edilmek zorundadır. Elektronik ortamda tutulacak belgelerin görüntülenebilir ve doğrulanabilir şekilde muhafaza ve ibraz edilmesinden, diğer matbu belgeler de olduğu gibi, mükellef sorumludur</p>

<h3 id="cret-bordrosu">Ücret Bordrosu</h3>

<p>Firmalar çalışanları için aylık olarak oluşturacakları ücret bordrolarını, e-Defter uygulamasına aktarırken, tüm personel için oluşan bordroları bir listeye bağlayıp, belge tipi <strong>“Diğer”</strong> ve belge açıklaması <strong>“Ücret Bordrosu İcmali”</strong> olarak kaydedebilir. Ücret bordrosu icmalinin numara ve tarihinin girilmesi zorunludur. Ancak Ücret bordrosu icmalinde matbu bir numara ve tarih olmadığı için, oluşturulacak her bir icmal listesi için müteselsil bir numara verilmeli ve icmalin oluşturulduğu günün tarihi üzerine yazılmalıdır. Bu ücret bordrosu icmalinde her bir ücret bordrosunun detayları yer almalıdır. Ayrıca bu icmaller firma kaşesi ve imzasıyla matbu olarak ya da elektronik imza/mali mühür ile elektronik ortamda muhafaza edilmek zorundadır. Elektronik ortamda tutulacak belgelerin görüntülenebilir ve doğrulanabilir şekilde muhafaza ve ibraz edilmesinden, diğer matbu belgeler de olduğu gibi, mükellef sorumludur.</p>

<h3 id="serbest-meslek-makbuzu">Serbest Meslek Makbuzu</h3>

<p>Serbest meslek erbabının, mesleki faaliyetlerine ilişkin her türlü tahsilatı için düzenlediği belge serbest meslek makbuzudur. Bu makbuz e-Defter kılavuzunda sayılan belgeler arasında yer alan makbuz ile karıştırılmamalıdır. Serbest meslek makbuzu sayılan belgeler arasında yer almadığı için belge tipi <strong>“Diğer”</strong> ve belge açıklaması <strong>“serbest meslek makbuzu”</strong> olarak kaydı yapılır. Ayrıca belgenin numarası ve tarihinin de girilmesi zorunludur.</p>

<h2 id="e-defter-ematron-kontrol">E-Defter Şematron Kontrolü</h2>

<ul>
<li>Uygulamamız tarafından hazırlanan defterler Gelir İdaresi Başkanlığı tarafından yayınlanan şematron kurallarından, iş kurallarından, mali mühür ya da imza kontrolünden geçmektedir. Oluşturulan defterlerin şematron kontrolünde hata
almaması için aşağıdaki kurallara uygun olarak veri hazırlanmalıdır.</li>
<li>Oluşturulacak defterlerin boyutunun 200 MB’ı geçmesi halinde bölünmesi gerekmektedir. Bölme işlemi uygulama
tarafından Gelir İdaresi Başkanlığı tarafından belirlenen kurallara göre otomatik olarak yapılmaktadır.</li>
<li>Bir yevmiyenin satır kalemleri aynı defter parçasında olmak durumundadır. Bir yevmiye kaydı 200 MB’ı geçerse
belirli icmal yöntemleriyle yevmiye kaydı gruplandırılmalıdır. Firmaların veri büyüklüklerine göre farklılık
göstermekle birlikte 200 MB‘lık parça yaklaşık 100.000 yevmiye satırına denk gelmektedir.</li>
<li>Defterler sıra ile aylık olarak yüklenmelidir. Örneğin, Temmuz ayının defteri GİB’e yüklenmemişse ya da GİB’den
onaylı beratları alınıp ay kapatılmamışsa mükellef bir sonraki ayın yani Ağustos’un defterini sistemde oluşturamaz.
Uygulama bu durumda hata verir.</li>
<li>GİB’e yüklenmiş, GİB’den onaylı beratları alınmış bir tarih aralığı için bir daha defter oluşturulamaz, aynı yolla ileri
bir tarihi de kapsayacak şekilde defter oluşturulamaz.</li>
<li>Defter kaynak verilerindeki zorunlu alanların kontrolü yapılır, kaynak veri detayları için destek@izibiz.com.tr
adresinden detaylı bilgi talep edilebilir.</li>
</ul>

      </div>
      <div class="dark-box">
          <div class="lang-selector">
                <a href="#" data-language-name="csharp">C#</a>
          </div>
      </div>
    </div>
  </body>
</html>
